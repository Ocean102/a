















local a={}
local b

local function missing(c,d,e)
if type(d)==c then return d end
return e
end

local c=missing("function",cloneref,function(...)return...end)
local d=setmetatable({},{
__index=function(d,e)
d[e]=c(game:GetService(e))
return d[e]
end
})




local e=game
local f=workspace.Parent

local aa={
Explorer=function()







local g,h,i,j
local k,l,m,n
local o,p,q,r,s,t,u

local function initDeps(v)
g=v.Main
h=v.Lib
i=v.Apps
j=v.Settings

o=v.API
p=v.RMD
q=v.env
r=v.service
s=v.plr
t=v.create
u=v.createSimple
end

local function initAfterMain()
k=i.Explorer
l=i.Properties
m=i.ScriptViewer
n=i.Notebook
end

local function main()
local v={}
local w,x,y,z={},{},{},{}
local A
local B,C,D,E,F,G
local H=f.FindFirstAncestorWhichIsA
local I=f.GetDescendants
local J=r.TextService.GetTextSize
local K,L=false,false
local M={Obj=Instance.new"Folder"}
local N=0
local O,P,Q
local R,S,T
local U,V
local W,X=table,math
local Y,Z={},{}
local _=f.DescendantAdded.Connect
local aa,ab,ac

aa=function(ad)
if a[ad]then return end

local ae=false
local af=H(ad,"Instance")
local ag=a[af]


if not ag then
if Y[ad]then
Z[ad]=Z[ad]or{
_(ad.ChildAdded,aa),
_(ad.AncestryChanged,ac),
}
ag=M
ae=true
else
return
end
elseif Y[af]or ag==M then
Y[ad]=true
Z[ad]=Z[ad]or{
_(ad.ChildAdded,aa),
_(ad.AncestryChanged,ac),
}
ae=true
end

local ah={Obj=ad,Parent=ag}
a[ad]=ah


if U and A[ag]and ag.Sorted then
local ai,aj=1,#ag
local ak=X.floor
local al=v.NodeSorter
local am=(aj==0 and 1)

if not am then
while true do
if ai>=aj then
if al(ah,ag[ai])then
am=ai
else
am=ai+1
end
break
end

local an=ak((ai+aj)/2)
if al(ah,ag[an])then
aj=an-1
else
ai=an+1
end
end
end

W.insert(ag,am,ah)
else
ag[#ag+1]=ah
ag.Sorted=nil
end

local ai=I(ad)
for aj=1,#ai do
local ak=ai[aj]
if a[ak]then continue end

local al=a[H(ak,"Instance")]
if not al then continue end
local am={Obj=ak,Parent=al}
a[ak]=am
al[#al+1]=am


if ae then
Y[ak]=true
Z[ak]=Z[ak]or{
_(ak.ChildAdded,aa),
_(ak.AncestryChanged,ac),
}
end
end

if T and V then
T{ah}
end

if not K and v.IsNodeVisible(ag)then
if A[ag]then
v.PerformUpdate()
elseif not L then
v.PerformRefresh()
end
end
end

ab=function(ad)
local ae=a[ad]
if not ae then return end


if Y[ae.Obj]then
ac(ae.Obj)
return
end

local af=ae.Parent
if af then
af.HasDel=true
end

local function recur(ag)
for ah=1,#ag do
local ai=ag[ah]
if not ai.Del then
a[ai.Obj]=nil
if#ai>0 then recur(ai)end
end
end
end
recur(ae)
ae.Del=true
a[ad]=nil

if af and not K and v.IsNodeVisible(af)then
if A[af]then
v.PerformUpdate()
elseif not L then
v.PerformRefresh()
end
end
end

ac=function(ad)
local ae=a[ad]
if not ae then return end

local af=ae.Parent
local ag=a[H(ad,"Instance")]
if af==ag then return end


if not ag then
if Y[ad]then
ag=M
else
return
end
elseif Y[ag.Obj]or ag==M then
Y[ad]=true
Z[ad]=Z[ad]or{
_(ad.ChildAdded,aa),
_(ad.AncestryChanged,ac),
}
end

if af then
local ah=W.find(af,ae)
if ah then W.remove(af,ah)end
end

ae.Id=nil
ae.Parent=ag

if U and A[ag]and ag.Sorted then
local ah,ai=1,#ag
local aj=X.floor
local ak=v.NodeSorter
local al=(ai==0 and 1)

if not al then
while true do
if ah>=ai then
if ak(ae,ag[ah])then
al=ah
else
al=ah+1
end
break
end

local am=aj((ah+ai)/2)
if ak(ae,ag[am])then
ai=am-1
else
ah=am+1
end
end
end

W.insert(ag,al,ae)
else
ag[#ag+1]=ae
ag.Sorted=nil
end

if T and z[ae]then
local ah=ae.Parent
while ah and(not z[ah]or A[ah]==0)do
A[ah]=true
z[ah]=true
ah=ah.Parent
end
end

if not K and(v.IsNodeVisible(ag)or v.IsNodeVisible(af))then
if A[ag]or A[af]then
v.PerformUpdate()
elseif not L then
v.PerformRefresh()
end
end
end

v.ViewWidth=0
v.Index=0
v.EntryIndent=20
v.FreeWidth=32
v.GuiElems={}

v.InitRenameBox=function()
R=t{{1,"TextBox",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderColor3=Color3.new(0.062745101749897,0.51764708757401,1),BorderMode=2,ClearTextOnFocus=false,Font=3,Name="RenameBox",PlaceholderColor3=Color3.new(0.69803923368454,0.69803923368454,0.69803923368454),Position=UDim2.new(0,26,0,2),Size=UDim2.new(0,200,0,16),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=0,Visible=false,ZIndex=2}}}

R.Parent=v.Window.GuiElems.Content.List

R.FocusLost:Connect(function()
if not S then return end

pcall(function()S.Obj.Name=R.Text end)
S=nil
v.Refresh()
end)

R.Focused:Connect(function()
R.SelectionStart=1
R.CursorPosition=#R.Text+1
end)
end

v.SetRenamingNode=function(ad)
S=ad
R.Text=tostring(ad.Obj)
R:CaptureFocus()
v.Refresh()
end

v.SetSortingEnabled=function(ad)
U=ad
j.Explorer.Sorting=ad
end

v.UpdateView=function()
local ad=X.ceil(C.AbsoluteSize.Y/20)
local ae=C.AbsoluteSize.X
local af=v.ViewWidth+v.FreeWidth

O.VisibleSpace=ad
O.TotalSpace=#w+1
P.VisibleSpace=ae
P.TotalSpace=af

O.Gui.Visible=#w+1>ad
P.Gui.Visible=af>ae

local ag=C.Size
C.Size=UDim2.new(1,(O.Gui.Visible and-16 or 0),1,(P.Gui.Visible and-39 or-23))
if ag~=C.Size then
v.UpdateView()
else
O:Update()
P:Update()

R.Size=UDim2.new(0,ae-100,0,16)

if O.Gui.Visible and P.Gui.Visible then
O.Gui.Size=UDim2.new(0,16,1,-39)
P.Gui.Size=UDim2.new(1,-16,0,16)
v.Window.GuiElems.Content.ScrollCorner.Visible=true
else
O.Gui.Size=UDim2.new(0,16,1,-23)
P.Gui.Size=UDim2.new(1,0,0,16)
v.Window.GuiElems.Content.ScrollCorner.Visible=false
end

v.Index=O.Index
end
end

v.NodeSorter=function(ad,ae)
if ad.Del or ae.Del then return false end

local af=ad.Class
local ag=ae.Class
if not af then af=ad.Obj.ClassName ad.Class=af end
if not ag then ag=ae.Obj.ClassName ae.Class=ag end

local ah=y[af]
local ai=y[ag]
if not ah then ah=p.Classes[af]and tonumber(p.Classes[af].ExplorerOrder)or 9999 y[af]=ah end
if not ai then ai=p.Classes[ag]and tonumber(p.Classes[ag].ExplorerOrder)or 9999 y[ag]=ai end

if ah~=ai then
return ah<ai
else
local aj,ak=tostring(ad.Obj),tostring(ae.Obj)
if aj~=ak then
return aj<ak
elseif af~=ag then
return af<ag
else
local al=ad.Id if not al then al=N N=(N+0.001)%999999999 ad.Id=al end
local am=ae.Id if not am then am=N N=(N+0.001)%999999999 ae.Id=am end
return al<am
end
end
end

v.Update=function()
W.clear(w)
local ad,ae,af=0,1,1
local ag={}
local ah=Enum.Font.SourceSans
local ai=Vector2.new(X.huge,20)
local aj=j.Explorer.UseNameWidth
local ak=W.sort
local al=v.NodeSorter
local am=(A==v.SearchExpanded)
local an=r.TextService

local function recur(ao,ap)
if ap>ae then ae=ap end
ap=ap+1
if U and not ao.Sorted then
ak(ao,al)
ao.Sorted=true
end
for aq=1,#ao do
local ar=ao[aq]

if(am and not z[ar])or ar.Del then continue end

if aj then
local as=ar.NameWidth
if not as then
local at=tostring(ar.Obj)
as=ag[at]
if not as then
as=J(an,at,14,ah,ai).X
ag[at]=as
end
ar.NameWidth=as
end
if as>ad then
ad=as
end
end

w[af]=ar
af=af+1
if A[ar]and#ar>0 then
recur(ar,ap)
end
end
end

recur(a[f],1)


if q.getnilinstances then
if not(am and not z[M])then
w[af]=M
af=af+1
if A[M]then
recur(M,2)
end
end
end

v.MaxNameWidth=ad
v.MaxDepth=ae
v.ViewWidth=aj and v.EntryIndent*ae+ad+26 or v.EntryIndent*ae+226
v.UpdateView()
end

v.StartDrag=function(ad,ae)
if v.Dragging then return end
for af,ag in next,b.List do
local ah=ag.Obj
if ah.Parent==f or ah:IsA"Player"then
return
end
end
v.Dragging=true

local af=C:Clone()
af:ClearAllChildren()

for ag,ah in pairs(x)do
local ai=w[ag+v.Index]
if ai and b.Map[ai]then
local aj=ah:Clone()
aj.Active=false
aj.Indent.Expand.Visible=false
aj.Parent=af
end
end

local ag=Instance.new"ScreenGui"
ag.DisplayOrder=g.DisplayOrders.Menu
af.Parent=ag
h.ShowGui(ag)

local ah=t{
{1,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="DragSelect",Size=UDim2.new(1,0,1,0),}},
{2,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderSizePixel=0,Name="Line",Parent={1},Size=UDim2.new(1,0,0,1),ZIndex=2,}},
{3,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderSizePixel=0,Name="Line",Parent={1},Position=UDim2.new(0,0,1,-1),Size=UDim2.new(1,0,0,1),ZIndex=2,}},
{4,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderSizePixel=0,Name="Line",Parent={1},Size=UDim2.new(0,1,1,0),ZIndex=2,}},
{5,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderSizePixel=0,Name="Line",Parent={1},Position=UDim2.new(1,-1,0,0),Size=UDim2.new(0,1,1,0),ZIndex=2,}},
}
ah.Parent=C

local ai=g.Mouse or r.Players.LocalPlayer:GetMouse()
local function move()
local aj=ai.X-ad
local ak=ai.Y-ae
af.Position=UDim2.new(0,aj,0,ak)

for al=1,#x do
local am=x[al]
if h.CheckMouseInGui(am)then
ah.Position=UDim2.new(0,am.Indent.Position.X.Offset-P.Index,0,am.Position.Y.Offset)
ah.Size=UDim2.new(0,am.Size.X.Offset-am.Indent.Position.X.Offset,0,20)
ah.Visible=true
return
end
end
ah.Visible=false
end
move()

local aj=r.UserInputService
local ak,al

ak=aj.InputChanged:Connect(function(am)
if am.UserInputType==Enum.UserInputType.MouseMovement or am.UserInputType==Enum.UserInputType.Touch then
move()
end
end)

al=aj.InputEnded:Connect(function(am)
if am.UserInputType==Enum.UserInputType.MouseButton1 or am.UserInputType==Enum.UserInputType.Touch then
al:Disconnect()
ak:Disconnect()
ag:Destroy()
ah:Destroy()
v.Dragging=false

for an=1,#x do
if h.CheckMouseInGui(x[an])then
local ao=w[an+v.Index]
if ao then
if b.Map[ao]then return end
local ap=ao.Obj
local aq=b.List
for ar=1,#aq do
local as=aq[ar]
pcall(function()as.Obj.Parent=ap end)
end
v.ViewNode(aq[1])
end
break
end
end
end
end)
end

v.NewListEntry=function(ad)
local ae=B:Clone()
ae.Position=UDim2.new(0,0,0,20*(ad-1))

local af=false

ae.InputBegan:Connect(function(ag)
local ah=w[ad+v.Index]
if not ah or b.Map[ah]or(ag.UserInputType~=Enum.UserInputType.MouseMovement and ag.UserInputType~=Enum.UserInputType.Touch)then return end

ae.Indent.BackgroundColor3=j.Theme.Button
ae.Indent.BorderSizePixel=0
ae.Indent.BackgroundTransparency=0
end)

ae.InputEnded:Connect(function(ag)
local ah=w[ad+v.Index]
if not ah or b.Map[ah]or(ag.UserInputType~=Enum.UserInputType.MouseMovement and ag.UserInputType~=Enum.UserInputType.Touch)then return end

ae.Indent.BackgroundTransparency=1
end)

ae.MouseButton1Down:Connect(function()

end)

ae.MouseButton1Up:Connect(function()

end)

ae.InputBegan:Connect(function(ag)
if ag.UserInputType==Enum.UserInputType.MouseButton1 or ag.UserInputType==Enum.UserInputType.Touch then
local ah,ai

local aj=g.Mouse or s:GetMouse()
local ak,al

if ag.UserInputType==Enum.UserInputType.Touch then
ak=ag.Position.X
al=ag.Position.Y
else
ak=aj.X
al=aj.Y
end

local am=ak-C.AbsolutePosition.X
local an=al-C.AbsolutePosition.Y

ah=r.UserInputService.InputEnded:Connect(function(ao)
if ao.UserInputType==Enum.UserInputType.MouseButton1 or ao.UserInputType==Enum.UserInputType.Touch then
ah:Disconnect()
ai:Disconnect()
end
end)

ai=r.UserInputService.InputChanged:Connect(function(ao)
if ao.UserInputType==Enum.UserInputType.MouseMovement or ao.UserInputType==Enum.UserInputType.Touch then
local ap,aq

if ao.UserInputType==Enum.UserInputType.Touch then
ap=ao.Position.X
aq=ao.Position.Y
else
ap=aj.X
aq=aj.Y
end

local ar=ap-ak
local as=aq-al
local at=X.sqrt(ar^2+as^2)

if at>5 then
ah:Disconnect()
ai:Disconnect()
af=false
v.StartDrag(am,an)
end
end
end)
end
end)

ae.MouseButton2Down:Connect(function()

end)

ae.Indent.Expand.InputBegan:Connect(function(ag)
local ah=w[ad+v.Index]
if not ah or(ag.UserInputType~=Enum.UserInputType.MouseMovement and ag.UserInputType~=Enum.UserInputType.Touch)then return end

if ag.UserInputType==Enum.UserInputType.Touch then
v.MiscIcons:DisplayByKey(ae.Indent.Expand.Icon,A[ah]and"Collapse_Over"or"Expand_Over")
elseif ag.UserInputType==Enum.UserInputType.MouseMovement then
v.MiscIcons:DisplayByKey(ae.Indent.Expand.Icon,A[ah]and"Collapse_Over"or"Expand_Over")
end
end)

ae.Indent.Expand.InputEnded:Connect(function(ag)
local ah=w[ad+v.Index]
if not ah or(ag.UserInputType~=Enum.UserInputType.MouseMovement and ag.UserInputType~=Enum.UserInputType.Touch)then return end

if ag.UserInputType==Enum.UserInputType.Touch then
v.MiscIcons:DisplayByKey(ae.Indent.Expand.Icon,A[ah]and"Collapse"or"Expand")
elseif ag.UserInputType==Enum.UserInputType.MouseMovement then
v.MiscIcons:DisplayByKey(ae.Indent.Expand.Icon,A[ah]and"Collapse"or"Expand")
end
end)

ae.Indent.Expand.MouseButton1Down:Connect(function()
local ag=w[ad+v.Index]
if not ag or#ag==0 then return end

A[ag]=not A[ag]
v.Update()
v.Refresh()
end)

ae.Parent=C
return ae
end

v.Refresh=function()
local ad=X.max(X.ceil((C.AbsoluteSize.Y)/20),0)
local ae=false local af=
f.IsA

for ag=1,ad do
local ah=x[ag]
if not x[ag]then ah=v.NewListEntry(ag)x[ag]=ah v.ClickSystem:Add(ah)end

local ai=w[ag+v.Index]
if ai then
local aj=ai.Obj
local ak=v.EntryIndent*v.NodeDepth(ai)

ah.Visible=true
ah.Position=UDim2.new(0,-P.Index,0,ah.Position.Y.Offset)
ah.Size=UDim2.new(0,v.ViewWidth,0,20)
ah.Indent.EntryName.Text=tostring(ai.Obj)
ah.Indent.Position=UDim2.new(0,ak,0,0)
ah.Indent.Size=UDim2.new(1,-ak,1,0)

ah.Indent.EntryName.TextTruncate=(j.Explorer.UseNameWidth and Enum.TextTruncate.None or Enum.TextTruncate.AtEnd)

v.MiscIcons:DisplayExplorerIcons(ah.Indent.Icon,aj.ClassName)

if b.Map[ai]then
ah.Indent.BackgroundColor3=j.Theme.ListSelection
ah.Indent.BorderSizePixel=0
ah.Indent.BackgroundTransparency=0
else
if h.CheckMouseInGui(ah)then
ah.Indent.BackgroundColor3=j.Theme.Button
else
ah.Indent.BackgroundTransparency=1
end
end

if ai==S then
ae=true
R.Position=UDim2.new(0,ak+25-P.Index,0,ah.Position.Y.Offset+2)
R.Visible=true
end

if#ai>0 and A[ai]~=0 then
if h.CheckMouseInGui(ah.Indent.Expand)then
v.MiscIcons:DisplayByKey(ah.Indent.Expand.Icon,A[ai]and"Collapse_Over"or"Expand_Over")
else
v.MiscIcons:DisplayByKey(ah.Indent.Expand.Icon,A[ai]and"Collapse"or"Expand")
end
ah.Indent.Expand.Visible=true
else
ah.Indent.Expand.Visible=false
end
else
ah.Visible=false
end
end

if not ae then
R.Visible=false
end

for ag=ad+1,#x do
v.ClickSystem:Remove(x[ag])
x[ag]:Destroy()
x[ag]=nil
end
end

v.PerformUpdate=function(ad)
K=true
h.FastWait(not ad and 0.1)
if not K then return end
K=false
if not v.Window:IsVisible()then return end
v.Update()
v.Refresh()
end

v.ForceUpdate=function(ad)
K=false
v.Update()
if not ad then v.Refresh()end
end

v.PerformRefresh=function()
L=true
h.FastWait(0.1)
L=false
if K or not v.Window:IsVisible()then return end
v.Refresh()
end

v.IsNodeVisible=function(ad)
if not ad then return end

local ae=ad.Parent
while ae do
if not A[ae]then return false end
ae=ae.Parent
end
return true
end

v.NodeDepth=function(ad)
local ae=0

if ad==M then
return 1
end

local af=ad.Parent
while af do
if af==M then ae=ae+1 end
af=af.Parent
ae=ae+1
end
return ae
end

v.SetupConnections=function()
if E then E:Disconnect()end
if F then F:Disconnect()end
if G then G:Disconnect()end

if g.Elevated then
E=f.DescendantAdded:Connect(aa)
F=f.DescendantRemoving:Connect(ab)
else
E=f.DescendantAdded:Connect(function(ad)pcall(aa,ad)end)
F=f.DescendantRemoving:Connect(function(ad)pcall(ab,ad)end)
end

if j.Explorer.UseNameWidth then
G=f.ItemChanged:Connect(function(ad,ae)
if ae=="Parent"and a[ad]then
ac(ad)
elseif ae=="Name"and a[ad]then
a[ad].NameWidth=nil
end
end)
else
G=f.ItemChanged:Connect(function(ad,ae)
if ae=="Parent"and a[ad]then
ac(ad)
end
end)
end
end

v.ViewNode=function(ad)
if not ad then return end

v.MakeNodeVisible(ad)
v.ForceUpdate(true)
local ae=O.VisibleSpace

for af,ag in next,w do
if ag==ad then
local ah=af-1
if v.Index>ah then
O.Index=ah
elseif v.Index+ae-1<=ah then
O.Index=ah-ae+2
end
end
end

O:Update()v.Index=O.Index
v.Refresh()
end

v.ViewObj=function(ad)
v.ViewNode(a[ad])
end

v.MakeNodeVisible=function(ad,ae)
if not ad then return end

local af=false

if ae and not A[ad]then
A[ad]=true
af=true
end

local ag=ad.Parent
while ag do
af=true
A[ag]=true
ag=ag.Parent
end

if af and not K then
coroutine.wrap(v.PerformUpdate)(true)
end
end

v.ShowRightClick=function(ad)
local ae=ad or g.Mouse
local af=v.RightClickContext
local ag=af.Gui.AbsoluteSize
af.MaxHeight=(ag.Y<=600 and(ag.Y-40))or nil
af:Clear()

local ah=b.List
local ai=b.Map
local aj=#Q==0
local ak={}
local al=o.Classes

for am=1,#ah do
local an=ah[am]
local ao=an.Class
local ap=an.Obj

if not ak.isViableDecompileScript then
ak.isViableDecompileScript=q.isViableDecompileScript(ap)
end
if not ao then
ao=ap.ClassName
an.Class=ao
end

local aq=al[ao]
while aq and not ak[aq.Name]do
ak[aq.Name]=true
aq=aq.Superclass
end
end

af:AddRegistered"CUT"
af:AddRegistered"COPY"
af:AddRegistered("PASTE",aj)
af:AddRegistered"DUPLICATE"
af:AddRegistered"DELETE"
af:AddRegistered("RENAME",#ah~=1)

af:AddDivider()
af:AddRegistered"GROUP"
af:AddRegistered"UNGROUP"
af:AddRegistered"SELECT_CHILDREN"
af:AddRegistered"JUMP_TO_PARENT"
af:AddRegistered"EXPAND_ALL"
af:AddRegistered"COLLAPSE_ALL"

af:AddDivider()

if A==v.SearchExpanded then af:AddRegistered"CLEAR_SEARCH_AND_JUMP_TO"end
if q.setclipboard then af:AddRegistered"COPY_PATH"end
af:AddRegistered"INSERT_OBJECT"






af:QueueDivider()

if ak.BasePart or ak.Model then
af:AddRegistered"TELEPORT_TO"
af:AddRegistered"VIEW_OBJECT"
end
if ak.Tween then af:AddRegistered"PLAY_TWEEN"end
if ak.Animation then
af:AddRegistered"LOAD_ANIMATION"
af:AddRegistered"STOP_ANIMATION"
end

if ak.TouchTransmitter then af:AddRegistered("FIRE_TOUCHTRANSMITTER",firetouchinterest==nil)end
if ak.ClickDetector then af:AddRegistered("FIRE_CLICKDETECTOR",fireclickdetector==nil)end
if ak.ProximityPrompt then af:AddRegistered("FIRE_PROXIMITYPROMPT",fireproximityprompt==nil)end

if ak.Player then af:AddRegistered"SELECT_CHARACTER"af:AddRegistered"VIEW_PLAYER"end
if ak.Players then
af:AddRegistered"SELECT_LOCAL_PLAYER"
af:AddRegistered"SELECT_ALL_CHARACTERS"
end

if ak.LuaSourceContainer then
af:AddRegistered("VIEW_SCRIPT",not ak.isViableDecompileScript or q.decompile==nil)
af:AddRegistered("SAVE_SCRIPT",not ak.isViableDecompileScript or q.decompile==nil or q.writefile==nil)
af:AddRegistered("SAVE_BYTECODE",not ak.isViableDecompileScript or q.getscriptbytecode==nil or q.writefile==nil)
end

if ai[M]then
af:AddRegistered"REFRESH_NIL"
af:AddRegistered"HIDE_NIL"
end

v.LastRightClickX,v.LastRightClickY=ae.X,ae.Y
af:Show(ae.X,ae.Y)
end

v.InitRightClick=function()
local ad=h.ContextMenu.new()

ad:Register("CUT",{Name="Cut",IconMap=v.MiscIcons,Icon="Cut",DisabledIcon="Cut_Disabled",Shortcut="Ctrl+Z",OnClick=function()
local ae,af=f.Destroy,f.Clone
local ag,ah=b.List,{}
local ai=1
for aj=1,#ag do
local ak=ag[aj].Obj
local al,am=pcall(af,ak)
if al and am then
ah[ai]=am
ai=ai+1
end
pcall(ae,ak)
end
Q=ah
b:Clear()
end})

ad:Register("COPY",{Name="Copy",IconMap=v.MiscIcons,Icon="Copy",DisabledIcon="Copy_Disabled",Shortcut="Ctrl+C",OnClick=function()
local ae=f.Clone
local af,ag=b.List,{}
local ah=1
for ai=1,#af do
local aj=af[ai].Obj
local ak,al=pcall(ae,aj)
if ak and al then
ag[ah]=al
ah=ah+1
end
end
Q=ag
end})

ad:Register("PASTE",{Name="Paste Into",IconMap=v.MiscIcons,Icon="Paste",DisabledIcon="Paste_Disabled",Shortcut="Ctrl+Shift+V",OnClick=function()
local ae=b.List
local af={}
local ag=1
for ah=1,#ae do
local ai=ae[ah]
local aj=ai.Obj
v.MakeNodeVisible(ai,true)
for ak=1,#Q do
local al=Q[ak]:Clone()
if al then
al.Parent=aj
local am=a[al]
if am then af[ag]=am ag=ag+1 end
end
end
end
b:SetTable(af)

if#af>0 then
v.ViewNode(af[1])
end
end})

ad:Register("DUPLICATE",{Name="Duplicate",IconMap=v.MiscIcons,Icon="Copy",DisabledIcon="Copy_Disabled",Shortcut="Ctrl+D",OnClick=function()
local ae=f.Clone
local af=b.List
local ag={}
local ah=1
for ai=1,#af do
local aj=af[ai]
local ak=aj.Obj
local al=aj.Parent and aj.Parent.Obj
v.MakeNodeVisible(aj)
local am,an=pcall(ae,ak)
if am and an then
an.Parent=al
local ao=a[an]
if ao then ag[ah]=ao ah=ah+1 end
end
end

b:SetTable(ag)
if#ag>0 then
v.ViewNode(ag[1])
end
end})

ad:Register("DELETE",{Name="Delete",IconMap=v.MiscIcons,Icon="Delete",DisabledIcon="Delete_Disabled",Shortcut="Del",OnClick=function()
local ae=f.Destroy
local af=b.List
for ag=1,#af do
pcall(ae,af[ag].Obj)
end
b:Clear()
end})

ad:Register("RENAME",{Name="Rename",IconMap=v.MiscIcons,Icon="Rename",DisabledIcon="Rename_Disabled",Shortcut="F2",OnClick=function()
local ae=b.List
if ae[1]then
v.SetRenamingNode(ae[1])
end
end})

ad:Register("GROUP",{Name="Group",IconMap=v.MiscIcons,Icon="Group",DisabledIcon="Group_Disabled",Shortcut="Ctrl+G",OnClick=function()
local ae=b.List
if#ae==0 then return end

local af=Instance.new("Model",ae[#ae].Obj.Parent)
for ag=1,#ae do
pcall(function()ae[ag].Obj.Parent=af end)
end

if a[af]then
b:Set(a[af])
v.ViewNode(a[af])
end
end})

ad:Register("UNGROUP",{Name="Ungroup",IconMap=v.MiscIcons,Icon="Ungroup",DisabledIcon="Ungroup_Disabled",Shortcut="Ctrl+U",OnClick=function()
local ae={}
local af=1
local ag=f.IsA

local function ungroup(ah)
local ai=ah.Parent.Obj
local aj={}
local ak=1

for al=1,#ah do
local am=ah[al]
ae[af]=am
aj[ak]=am
af=af+1
ak=ak+1
end

for al=1,#aj do
pcall(function()aj[al].Obj.Parent=ai end)
end

ah.Obj:Destroy()
end

for ah,ai in next,b.List do
if ag(ai.Obj,"Model")then
ungroup(ai)
end
end

b:SetTable(ae)
if#ae>0 then
v.ViewNode(ae[1])
end
end})

ad:Register("SELECT_CHILDREN",{Name="Select Children",IconMap=v.MiscIcons,Icon="SelectChildren",DisabledIcon="SelectChildren_Disabled",OnClick=function()
local ae={}
local af=1
local ag=b.List

for ah=1,#ag do
local ai=ag[ah]
for aj=1,#ai do
local ak=ai[aj]
if aj==1 then v.MakeNodeVisible(ak)end

ae[af]=ak
af=af+1
end
end

b:SetTable(ae)
if#ae>0 then
v.ViewNode(ae[1])
else
v.Refresh()
end
end})

ad:Register("JUMP_TO_PARENT",{Name="Jump to Parent",IconMap=v.MiscIcons,Icon="JumpToParent",OnClick=function()
local ae={}
local af=1
local ag=b.List

for ah=1,#ag do
local ai=ag[ah]
if ai.Parent then
ae[af]=ai.Parent
af=af+1
end
end

b:SetTable(ae)
if#ae>0 then
v.ViewNode(ae[1])
else
v.Refresh()
end
end})

ad:Register("TELEPORT_TO",{Name="Teleport To",IconMap=v.MiscIcons,Icon="TeleportTo",OnClick=function()
local ae=b.List
local af=s.Character and s.Character:FindFirstChild"HumanoidRootPart"

if not af then return end

for ag,ah in next,ae do
local ai=ah.Obj

if ai:IsA"BasePart"then
if ai.CanCollide then
s.Character:MoveTo(ai.Position)
else
af.CFrame=CFrame.new(ai.Position+j.Explorer.TeleportToOffset)
end
break
elseif ai:IsA"Model"then
if ai.PrimaryPart then
if ai.PrimaryPart.CanCollide then
s.Character:MoveTo(ai.PrimaryPart.Position)
else
af.CFrame=CFrame.new(ai.PrimaryPart.Position+j.Explorer.TeleportToOffset)
end
break
else
local aj=ai:FindFirstChildWhichIsA("BasePart",true)
if aj and a[aj]then
if aj.CanCollide then
s.Character:MoveTo(aj.Position)
else
af.CFrame=CFrame.new(aj.Position+j.Explorer.TeleportToOffset)
end
break
elseif ai.WorldPivot then
af.CFrame=ai.WorldPivot
end
end
end
end
end})


ad:Register("PLAY_TWEEN",{Name="Play Tween",IconMap=v.MiscIcons,Icon="Play",OnClick=function()
local ae=b.List

for af=1,#ae do
local ag=ae[af]
local ah=ag.Obj

if ah:IsA"Tween"then ah:Play()end
end
end})

local ae
ad:Register("LOAD_ANIMATION",{Name="Load Animation",IconMap=v.MiscIcons,Icon="Play",OnClick=function()
local af=b.List

local ag=s.Character and s.Character:FindFirstChild"Humanoid"
if not ag then return end

for ah=1,#af do
local ai=af[ah]
local aj=ai.Obj

if aj:IsA"Animation"then
if ae then ae:Stop()end
ae=ag:LoadAnimation(aj)
ae:Play()
break
end
end
end})

ad:Register("STOP_ANIMATION",{Name="Stop Animation",IconMap=v.MiscIcons,Icon="Pause",OnClick=function()
local af=b.List

local ag=s.Character and s.Character:FindFirstChild"Humanoid"
if not ag then return end

for ah=1,#af do
local ai=af[ah]
local aj=ai.Obj

if aj:IsA"Animation"then
if ae then ae:Stop()end
ag:LoadAnimation(aj):Stop()
break
end
end
end})

ad:Register("EXPAND_ALL",{Name="Expand All",OnClick=function()
local af=b.List

local function expand(ag)
A[ag]=true
for ah=1,#ag do
if#ag[ah]>0 then
expand(ag[ah])
end
end
end

for ag=1,#af do
expand(af[ag])
end

v.ForceUpdate()
end})

ad:Register("COLLAPSE_ALL",{Name="Collapse All",OnClick=function()
local af=b.List

local function expand(ag)
A[ag]=nil
for ah=1,#ag do
if#ag[ah]>0 then
expand(ag[ah])
end
end
end

for ag=1,#af do
expand(af[ag])
end

v.ForceUpdate()
end})

ad:Register("CLEAR_SEARCH_AND_JUMP_TO",{Name="Clear Search and Jump to",OnClick=function()
local af={}
local ag=1
local ah=b.List

for ai=1,#ah do
af[ag]=ah[ai]
ag=ag+1
end

b:SetTable(af)
v.ClearSearch()
if#af>0 then
v.ViewNode(af[1])
end
end})


local af=function(af)
if af:sub(1,28)=="game:GetService(\"Workspace\")"then af=af:gsub("game:GetService%(\"Workspace\"%)","workspace",1)end
if af:sub(1,27+#s.Name)=="game:GetService(\"Players\")."..s.Name then af=af:gsub("game:GetService%(\"Players\"%)."..s.Name,"game:GetService(\"Players\").LocalPlayer",1)end
return af
end

ad:Register("COPY_PATH",{Name="Copy Path",IconMap=v.ClassIcons,Icon=50,OnClick=function()
local ag=b.List
if#ag==1 then
q.setclipboard(af(v.GetInstancePath(ag[1].Obj)))
elseif#ag>1 then
local ah={"{"}
local ai=2
for aj=1,#ag do
local ak="\t"..af(v.GetInstancePath(ag[aj].Obj))..","
if#ak>0 then
ah[ai]=ak
ai=ai+1
end
end
ah[ai]="}"
q.setclipboard(W.concat(ah,"\n"))
end
end})

ad:Register("INSERT_OBJECT",{Name="Insert Object",IconMap=v.MiscIcons,Icon="InsertObject",OnClick=function()
local ag=g.Mouse
local ah,ai=v.LastRightClickX or ag.X,v.LastRightClickY or ag.Y
v.InsertObjectContext:Show(ah,ai)
end})





















ad:Register("VIEW_OBJECT",{Name="View Object (Right click to reset)",IconMap=v.ClassIcons,Icon=5,OnClick=function()
local ag=b.List
local ah=f.IsA

for ai=1,#ag do
local aj=ag[ai]

if ah(aj.Obj,"BasePart")or ah(aj.Obj,"Model")then
workspace.CurrentCamera.CameraSubject=aj.Obj
break
end
end
end,OnRightClick=function()
workspace.CurrentCamera.CameraSubject=s.Character
end})

ad:Register("FIRE_TOUCHTRANSMITTER",{Name="Fire TouchTransmitter",IconMap=v.ClassIcons,Icon=37,OnClick=function()
local ag=s.Character and s.Character:FindFirstChild"HumanoidRootPart"
if not ag then return end
for ah,ai in ipairs(b.List)do if ai.Obj and ai.Obj:IsA"TouchTransmitter"then firetouchinterest(ag,ai.Obj.Parent,0)end end
end})

ad:Register("FIRE_CLICKDETECTOR",{Name="Fire ClickDetector",IconMap=v.ClassIcons,Icon=41,OnClick=function()
local ag=s.Character and s.Character:FindFirstChild"HumanoidRootPart"
if not ag then return end
for ah,ai in ipairs(b.List)do if ai.Obj and ai.Obj:IsA"ClickDetector"then fireclickdetector(ai.Obj)end end
end})

ad:Register("FIRE_PROXIMITYPROMPT",{Name="Fire ProximityPrompt",IconMap=v.ClassIcons,Icon=124,OnClick=function()
local ag=s.Character and s.Character:FindFirstChild"HumanoidRootPart"
if not ag then return end
for ah,ai in ipairs(b.List)do if ai.Obj and ai.Obj:IsA"ProximityPrompt"then fireproximityprompt(ai.Obj)end end
end})

ad:Register("VIEW_SCRIPT",{Name="View Script",IconMap=v.MiscIcons,Icon="ViewScript",OnClick=function()
local ag=b.List[1]and b.List[1].Obj
if ag then m.ViewScript(ag)end
end})

ad:Register("SAVE_SCRIPT",{Name="Save Script",IconMap=v.MiscIcons,Icon="Save",OnClick=function()
for ag,ah in next,b.List do
if ah.Obj:IsA"LuaSourceContainer"and q.isViableDecompileScript(ah.Obj)then
local ai,aj=pcall(q.decompile,ah.Obj)
if not ai or not aj then aj=("-- DEX - %s failed to decompile %s"):format(q.executor,ah.Obj.ClassName)end
local ak=("%i.%s.%s.Source.txt"):format(f.PlaceId,ah.Obj.ClassName,q.parsefile(ah.Obj.Name))
q.writefile(ak,aj)
task.wait(0.2)
end
end
end})

ad:Register("SAVE_BYTECODE",{Name="Save Script Bytecode",IconMap=v.MiscIcons,Icon="Save",OnClick=function()
for ag,ah in next,b.List do
if ah.Obj:IsA"LuaSourceContainer"and q.isViableDecompileScript(ah.Obj)then
local ai,aj=pcall(getscriptbytecode,ah.Obj)
if ai and type(aj)=="string"then
local ak=("%i.%s.%s.Bytecode.txt"):format(f.PlaceId,ah.Obj.ClassName,q.parsefile(ah.Obj.Name))
q.writefile(ak,aj)
task.wait(0.2)
end
end
end
end})

ad:Register("SELECT_CHARACTER",{Name="Select Character",IconMap=v.ClassIcons,Icon=9,OnClick=function()
local ag={}
local ah=1
local ai=b.List
local aj=f.IsA

for ak=1,#ai do
local al=ai[ak]
if aj(al.Obj,"Player")and a[al.Obj.Character]then
ag[ah]=a[al.Obj.Character]
ah=ah+1
end
end

b:SetTable(ag)
if#ag>0 then
v.ViewNode(ag[1])
else
v.Refresh()
end
end})

ad:Register("VIEW_PLAYER",{Name="View Player",IconMap=v.ClassIcons,Icon=5,OnClick=function()


local ag=b.List local ah=
f.IsA

for ai=1,#ag do
local aj=ag[ai]
local ak=aj.Obj
if ak:IsA"Player"and ak.Character then
workspace.CurrentCamera.CameraSubject=ak.Character
break
end
end
end})

ad:Register("SELECT_LOCAL_PLAYER",{Name="Select Local Player",IconMap=v.ClassIcons,Icon=9,OnClick=function()
pcall(function()if a[s]then b:Set(a[s])v.ViewNode(a[s])end end)
end})

ad:Register("SELECT_ALL_CHARACTERS",{Name="Select All Characters",IconMap=v.ClassIcons,Icon=2,OnClick=function()
local ag={}local ah=
b.List

for ai,aj in next,r.Players:GetPlayers()do
if aj.Character and a[aj.Character]then
if ai==1 then v.MakeNodeVisible(aj.Character)end
W.insert(ag,a[aj.Character])
end
end

b:SetTable(ag)
if#ag>0 then
v.ViewNode(ag[1])
else
v.Refresh()
end
end})

ad:Register("REFRESH_NIL",{Name="Refresh Nil Instances",OnClick=function()
v.RefreshNilInstances()
end})

ad:Register("HIDE_NIL",{Name="Hide Nil Instances",OnClick=function()
v.HideNilInstances()
end})

v.RightClickContext=ad
end

v.HideNilInstances=function()
W.clear(Y)

local ad=Instance.new"Folder".ChildAdded:Connect(function()end).Disconnect
for ae,af in next,Z do
ad(af[1])
ad(af[2])
end
W.clear(Z)

for ae=1,#M do
coroutine.wrap(ab)(M[ae].Obj)
end

v.Update()
v.Refresh()
end

v.RefreshNilInstances=function()
if not q.getnilinstances then return end

local ad=q.getnilinstances()
local ae=f
local af=ae.GetDescendants







for ag=1,#ad do
local ah=ad[ag]
if ah~=ae then
Y[ah]=true


local ai=af(ah)
for aj=1,#ai do
Y[ai[aj] ]=true
end
end
end












for ag=1,#ad do
local ah=ad[ag]
local ai=a[ah]
if not ai then coroutine.wrap(aa)(ah)end
end























v.Update()
v.Refresh()
end

v.GetInstancePath=function(ad)
local ae=f.FindFirstChild
local af=f.GetChildren
local ag=""
local ah=ad
local ai=tostring
local aj=string.match local ak=
string.gsub
local al=W.find
local am=j.Explorer.CopyPathUseGetChildren
local an=h.FormatLuaString

while ah do
if ah==f then
ag="game"..ag
break
end

local ao=ah.ClassName
local ap=ai(ah)
local aq
if aj(ap,"^[%a_][%w_]*$")then
aq="."..ap
else
local ar=an(ap)
aq='["'..ar..'"]'
end

local ar=ah.Parent
if ar then
local as=ae(ar,ap)
if am and as and as~=ah then
local at=af(ar)
local au=al(at,ah)
aq=":GetChildren()["..au.."]"
elseif ar==f and o.Classes[ao]and o.Classes[ao].Tags.Service then
aq=':GetService("'..ao..'")'
end
elseif ar==nil then
local as="local getNil = function(name, class) for _, v in next, getnilinstances() do if v.ClassName == class and v.Name == name then return v end end end"
local at="\n\ngetNil(\"%s\", \"%s\")"
aq=as..at:format(ah.Name,ao)
end

ag=aq..ag
ah=ar
end

return ag
end

v.DefaultProps={
BasePart={
Position=function(ad)
local ae=r.Players.LocalPlayer
if ae.Character and ae.Character:FindFirstChild"HumanoidRootPart"then
ad.Position=(ae.Character.HumanoidRootPart.CFrame*CFrame.new(0,0,-10)).p
end
return ad.Position
end,
Anchored=true
},
GuiObject={
Position=function(ad)return(ad.Parent:IsA"ScreenGui"and UDim2.new(0.5,0,0.5,0))or ad.Position end,
Active=true
}
}

v.InitInsertObject=function()
local ad=h.ContextMenu.new()
ad.SearchEnabled=true
ad.MaxHeight=400
ad:ApplyTheme{
ContentColor=j.Theme.Main2,
OutlineColor=j.Theme.Outline1,
DividerColor=j.Theme.Outline1,
TextColor=j.Theme.Text,
HighlightColor=j.Theme.ButtonHover
}

local ae={}
for af,ag in next,o.Classes do
local ah=ag.Tags
if not ah.NotCreatable and not ah.Service then
local ai=p.Classes[ag.Name]
ae[#ae+1]={ag,ai and ai.ClassCategory or"Uncategorized"}
end
end
W.sort(ae,function(af,ag)
if af[2]~=ag[2]then
return af[2]<ag[2]
else
return af[1].Name<ag[1].Name
end
end)

local function defaultProps(af)
for ag,ah in pairs(v.DefaultProps)do
if af:IsA(ag)then
for ai,aj in pairs(ah)do
af[ai]=(type(aj)=="function"and aj(af))or aj
end
end
end
end

local function onClick(af)
local ag=b.List
local ah=Instance.new
for ai=1,#ag do
local aj=ag[ai]
local ak=aj.Obj
v.MakeNodeVisible(aj,true)
local al,am=pcall(ah,af,ak)
if al and am then defaultProps(am)end
end
end

local af=""
for ag=1,#ae do
local ah=ae[ag][1]
local ai=p.Classes[ah.Name]
local aj=ai and tonumber(ai.ExplorerImageIndex)or 0
local ak=ae[ag][2]

if af~=ak then
ad:AddDivider(ak)
af=ak
end
ad:Add{Name=ah.Name,IconMap=v.ClassIcons,Icon=aj,OnClick=onClick}
end

v.InsertObjectContext=ad
end

v._SearchFilters={}do
local ad=v._SearchFilters

local function NewFilter(ae,af)
for ag,ah in next,ae do
ad[ah:lower()..":"]=af
end
end

local ae={
remotes={"RemoteEvent","RemoteFunction","BindableEvent","BindableFunction"},
scripts={"Script","LocalScript","ModuleScript"},
players={"Player"}
}

NewFilter({"parent","p"},function(af,ag)return af.Parent and(af.Parent.Name:lower()):find(ag)end)
NewFilter({"class","c"},function(af,ag)return(af.ClassName:lower()):find(ag)end)
NewFilter({"isa","i"},function(af,ag)return af:IsA(ag)end)

NewFilter({"only","o"},function(af,ag)
local ah=ae[ag]
return ah and W.find(ah,af.ClassName)
end)
end

v.DoSearch=function(ad)
W.clear(v.SearchExpanded)
W.clear(z)
A=(#ad==0 and v.Expanded)or v.SearchExpanded local ae=


W.find;

local af=v._SearchFilters
local ag=v.SearchExpanded

local ah=a[f]

local ai=(function(ai,aj)return(ai.Name:lower()):find(aj,1,true)end)

local function searchTable(aj,ak,al)
local am=false
for an,ao in ipairs(aj)do
if al(ao.Obj,ak)then
ag[ao]=0
z[ao]=true
if not am then
local ap=ao.Parent
while ap and(not z[ap]or ag[ap]==0)do
A[ap]=true
z[ap]=true
ap=ap.Parent
end
am=true
end
end

if#ao>0 then searchTable(ao,ak,al)end
end
end

local function Search(aj)
if aj:len()==0 then return end

local ak=aj:lower()
local al=ak:split":"
local am=(af[al[1]..":"])or nil

if am then
searchTable(ah,(al[2]or""),am)
else
searchTable(ah,(ak or""),ai)
end
end

for aj,ak in ipairs(ad:split",")do
if ak:len()>0 then
Search(ak)
end
end




































































v.ForceUpdate()
end

v.ClearSearch=function()
v.GuiElems.SearchBar.Text=""
A=v.Expanded
T=nil
end

v.InitSearch=function()
local ad=r.TweenService
local ae=v.GuiElems.ToolBar.SearchFrame
local af=ae.SearchBox
v.GuiElems.SearchBar=af

local ag=TweenInfo.new(0.2,Enum.EasingStyle.Quint)
local ah={
Start=ad:Create(ae.UIStroke,ag,{Color=Color3.fromRGB(0,120,215)}),
End=ad:Create(ae.UIStroke,ag,{Color=Color3.fromRGB(42,42,42)})
}

af.FocusLost:Connect(function()ah.End:Play()end)
af.Focused:Connect(function()ah.Start:Play()end)

h.ViewportTextBox.convert(af)

af.FocusLost:Connect(function()
v.DoSearch(af.Text)
end)
end

v.InitEntryTemplate=function()
B=t{
{1,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0,0,0),BackgroundTransparency=1,BorderColor3=Color3.new(0,0,0),Font=3,Name="Entry",Position=UDim2.new(0,1,0,1),Size=UDim2.new(0,250,0,20),Text="",TextSize=14,}},
{2,"Frame",{BackgroundColor3=Color3.new(0.04313725605607,0.35294118523598,0.68627452850342),BackgroundTransparency=1,BorderColor3=Color3.new(0.33725491166115,0.49019610881805,0.73725491762161),BorderSizePixel=0,Name="Indent",Parent={1},Position=UDim2.new(0,20,0,0),Size=UDim2.new(1,-20,1,0),}},
{3,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="EntryName",Parent={2},Position=UDim2.new(0,26,0,0),Size=UDim2.new(1,-26,1,0),Text="Workspace",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{4,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,ClipsDescendants=true,Font=3,Name="Expand",Parent={2},Position=UDim2.new(0,-20,0,0),Size=UDim2.new(0,20,0,20),Text="",TextSize=14,}},
{5,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5642383285",ImageRectOffset=Vector2.new(144,16),ImageRectSize=Vector2.new(16,16),Name="Icon",Parent={4},Position=UDim2.new(0,2,0,2),ScaleType=4,Size=UDim2.new(0,16,0,16),}},
{6,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,ImageRectOffset=Vector2.new(304,0),ImageRectSize=Vector2.new(16,16),Name="Icon",Parent={2},Position=UDim2.new(0,4,0,2),ScaleType=4,Size=UDim2.new(0,16,0,16),}},
}

local ad=h.ClickSystem.new()
ad.AllowedButtons={1,2}
ad.OnDown:Connect(function(ae,af,ag)
local ah=W.find(x,ae)
if not ah then return end
local ai=w[ah+v.Index]
if not ai then return end local aj=

x[ah]

if ag==1 then
if af==2 then
if ai.Obj:IsA"LuaSourceContainer"then
m.ViewScript(ai.Obj)
elseif#ai>0 and A[ai]~=0 then
A[ai]=not A[ai]
v.Update()
end
end

if l.SelectObject(ai.Obj)then
ad.IsRenaming=false
return
end

ad.IsRenaming=b.Map[ai]

if h.IsShiftDown()then
if not b.Piviot then return end

local ak=W.find(w,b.Piviot)
local al=W.find(w,ai)
if not ak or not al then return end
ak,al=X.min(ak,al),X.max(ak,al)

local am=b.List
for an=#am,1,-1 do
local ao=am[an]
if b.ShiftSet[ao]then
b.Map[ao]=nil
W.remove(am,an)
end
end
b.ShiftSet={}
for an=ak,al do
local ao=w[an]
if not b.Map[ao]then
b.ShiftSet[ao]=true
b.Map[ao]=true
am[#am+1]=ao
end
end
b.Changed:Fire()
elseif h.IsCtrlDown()then
b.ShiftSet={}
if b.Map[ai]then b:Remove(ai)else b:Add(ai)end
b.Piviot=ai
ad.IsRenaming=false
elseif not b.Map[ai]then
b.ShiftSet={}
b:Set(ai)
b.Piviot=ai
end
elseif ag==2 then
if l.SelectObject(ai.Obj)then
return
end

if not h.IsCtrlDown()and not b.Map[ai]then
b.ShiftSet={}
b:Set(ai)
b.Piviot=ai
v.Refresh()
end
end

v.Refresh()
end)

ad.OnRelease:Connect(function(ae,af,ag,ah)
local ai=W.find(x,ae)
if not ai then return end
local aj=w[ai+v.Index]
if not aj then return end

if ag==1 then
if b.Map[aj]and not h.IsShiftDown()and not h.IsCtrlDown()then
b.ShiftSet={}
b:Set(aj)
b.Piviot=aj
v.Refresh()
end

local ak=ad.ClickId
h.FastWait(ad.ComboTime)
if af==1 and ak==ad.ClickId and ad.IsRenaming and b.Map[aj]then
v.SetRenamingNode(aj)
end
elseif ag==2 then
v.ShowRightClick(ah)
end
end)
v.ClickSystem=ad
end

v.InitDelCleaner=function()
coroutine.wrap(function()
local ad=h.FastWait
while true do
local ae=false
local af=0
for ag,ah in next,a do
if ah.HasDel then
local ai
for aj=1,#ah do
if ah[aj].Del then
ai=aj
break
end
end
if ai then
for aj=ai+1,#ah do
local ak=ah[aj]
if not ak.Del then
ah[ai]=ak
ai=ai+1
end
end
for aj=ai,#ah do
ah[aj]=nil
end
end
ah.HasDel=false
ae=true
ad()
end
af=af+1
if af>10000 then
af=0
ad()
end
end
if ae and not L then v.PerformRefresh()end
ad(0.5)
end
end)()
end

v.UpdateSelectionVisuals=function()
local ad=v.SelectionVisualsHolder
local ae=f.IsA
local af=f.Clone
if not ad then
ad=Instance.new"ScreenGui"
ad.Name="ExplorerSelections"
ad.DisplayOrder=g.DisplayOrders.Core
h.ShowGui(ad)
v.SelectionVisualsHolder=ad
v.SelectionVisualCons={}

local ag=t{
{1,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Size=UDim2.new(0,100,0,100),}},
{2,"Frame",{BackgroundColor3=Color3.new(0.04313725605607,0.35294118523598,0.68627452850342),BorderSizePixel=0,Parent={1},Position=UDim2.new(0,-1,0,-1),Size=UDim2.new(1,2,0,1),}},
{3,"Frame",{BackgroundColor3=Color3.new(0.04313725605607,0.35294118523598,0.68627452850342),BorderSizePixel=0,Parent={1},Position=UDim2.new(0,-1,1,0),Size=UDim2.new(1,2,0,1),}},
{4,"Frame",{BackgroundColor3=Color3.new(0.04313725605607,0.35294118523598,0.68627452850342),BorderSizePixel=0,Parent={1},Position=UDim2.new(0,-1,0,0),Size=UDim2.new(0,1,1,0),}},
{5,"Frame",{BackgroundColor3=Color3.new(0.04313725605607,0.35294118523598,0.68627452850342),BorderSizePixel=0,Parent={1},Position=UDim2.new(1,0,0,0),Size=UDim2.new(0,1,1,0),}},
}
v.SelectionVisualGui=ag

local ah=Instance.new"SelectionBox"
ah.LineThickness=0.03
ah.Color3=Color3.fromRGB(0,170,255)
v.SelectionVisualBox=ah
end
ad:ClearAllChildren()


for ag,ah in pairs(v.SelectionVisualGui:GetChildren())do
ah.BackgroundColor3=Color3.fromRGB(0,170,255)
end

local ag=v.SelectionVisualCons
for ah=1,#ag do
ag[ah].Destroy()
end
W.clear(ag)

local ah=j.Explorer.PartSelectionBox
local ai=j.Explorer.GuiSelectionBox
if not ah and not ai then return end

local aj=v.SelectionVisualGui
local ak=v.SelectionVisualBox
local al=h.AttachTo
local am=b.List
local an=1
local ao=0
local ap=a[workspace]
for aq=1,#am do
if ao>1000 then break end
local ar=am[aq]
local as=ar.Obj

if ar~=ap then
if ae(as,"GuiObject")and ai then
local at=af(aj)
ag[an]=al(at,{Target=as,Resize=true})
an=an+1
at.Parent=ad
ao=ao+1
elseif ae(as,"PVInstance")and ah then
local at=af(ak)
at.Adornee=as
at.Parent=ad
ao=ao+1
end
end
end
end

v.Init=function()
v.ClassIcons=h.IconMap.newLinear("rbxasset://textures/ClassImages.PNG",16,16)
v.MiscIcons=g.MiscIcons

Q={}

b=h.Set.new()
b.ShiftSet={}
b.Changed:Connect(l.ShowExplorerProps)
v.Selection=b

v.InitRightClick()
v.InitInsertObject()
v.SetSortingEnabled(j.Explorer.Sorting)
v.Expanded=setmetatable({},{__mode="k"})
v.SearchExpanded=setmetatable({},{__mode="k"})
A=v.Expanded

M.Obj.Name="Nil Instances"
M.Locked=true

local ad=t{
{1,"Folder",{Name="ExplorerItems",}},
{2,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="ToolBar",Parent={1},Size=UDim2.new(1,0,0,22),}},
{3,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.1176470592618,0.1176470592618,0.1176470592618),BorderSizePixel=0,Name="SearchFrame",Parent={2},Position=UDim2.new(0,3,0,1),Size=UDim2.new(1,-6,0,18),}},
{4,"TextBox",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,ClearTextOnFocus=false,Font=3,Name="SearchBox",Parent={3},PlaceholderColor3=Color3.new(0.39215689897537,0.39215689897537,0.39215689897537),PlaceholderText="Search workspace",Position=UDim2.new(0,4,0,0),Size=UDim2.new(1,-24,0,18),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=0,}},
{5,"UICorner",{CornerRadius=UDim.new(0,2),Parent={3},}},
{6,"UIStroke",{Thickness=1.4,Parent={3},Color=Color3.fromRGB(42,42,42)}},
{7,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Reset",Parent={3},Position=UDim2.new(1,-17,0,1),Size=UDim2.new(0,16,0,16),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{8,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5034718129",ImageColor3=Color3.new(0.39215686917305,0.39215686917305,0.39215686917305),Parent={7},Size=UDim2.new(0,16,0,16),}},
{9,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Refresh",Parent={2},Position=UDim2.new(1,-20,0,1),Size=UDim2.new(0,18,0,18),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,Visible=false,}},
{10,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5642310344",Parent={9},Position=UDim2.new(0,3,0,3),Size=UDim2.new(0,12,0,12),}},
{11,"Frame",{BackgroundColor3=Color3.new(0.15686275064945,0.15686275064945,0.15686275064945),BorderSizePixel=0,Name="ScrollCorner",Parent={1},Position=UDim2.new(1,-16,1,-16),Size=UDim2.new(0,16,0,16),Visible=false,}},
{12,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,ClipsDescendants=true,Name="List",Parent={1},Position=UDim2.new(0,0,0,23),Size=UDim2.new(1,0,1,-23),}}
}

D=ad.ToolBar
C=ad.List

v.GuiElems.ToolBar=D
v.GuiElems.TreeFrame=C

O=h.ScrollBar.new()
O.WheelIncrement=3
O.Gui.Position=UDim2.new(1,-16,0,23)
O:SetScrollFrame(C)
O.Scrolled:Connect(function()
v.Index=O.Index
v.Refresh()
end)

P=h.ScrollBar.new(true)
P.Increment=5
P.WheelIncrement=v.EntryIndent
P.Gui.Position=UDim2.new(0,0,1,-16)
P.Scrolled:Connect(function()
v.Refresh()
end)

local ae=h.Window.new()
v.Window=ae
ae:SetTitle"Explorer"
ae.GuiElems.Line.Position=UDim2.new(0,0,0,22)

v.InitEntryTemplate()
D.Parent=ae.GuiElems.Content
C.Parent=ae.GuiElems.Content
ad.ScrollCorner.Parent=ae.GuiElems.Content
O.Gui.Parent=ae.GuiElems.Content
P.Gui.Parent=ae.GuiElems.Content


v.InitRenameBox()
v.InitSearch()
v.InitDelCleaner()
b.Changed:Connect(v.UpdateSelectionVisuals)


ae.GuiElems.Main:GetPropertyChangedSignal"AbsoluteSize":Connect(function()
if v.Active then
v.UpdateView()
v.Refresh()
end
end)
ae.OnActivate:Connect(function()
v.Active=true
v.UpdateView()
v.Update()
v.Refresh()
end)
ae.OnRestore:Connect(function()
v.Active=true
v.UpdateView()
v.Update()
v.Refresh()
end)
ae.OnDeactivate:Connect(function()v.Active=false end)
ae.OnMinimize:Connect(function()v.Active=false end)


V=j.Explorer.AutoUpdateSearch


a[f]={Obj=f}
A[a[f] ]=true


if q.getnilinstances then
a[M.Obj]=M
end

v.SetupConnections()

local af=I(f)
if g.Elevated then
for ag=1,#af do
local ah=af[ag]
local ai=a[H(ah,"Instance")]
if not ai then continue end
local aj={
Obj=ah,
Parent=ai,
}
a[ah]=aj
ai[#ai+1]=aj
end
else
for ag=1,#af do
local ah=af[ag]local
ai, aj=pcall(H,ah,"Instance")
local ak=a[aj]
if not ak then continue end
local al={
Obj=ah,
Parent=ak,
}
a[ah]=al
ak[#ak+1]=al
end
end
end

return v
end

return{InitDeps=initDeps,InitAfterMain=initAfterMain,Main=main}
end,
Properties=function()







local aa,ab,ac,ad
local ae,af,ag,ah
local ai,aj,ak,al,am,an,ao

local function initDeps(ap)
aa=ap.Main
ab=ap.Lib
ac=ap.Apps
ad=ap.Settings

ai=ap.API
aj=ap.RMD
ak=ap.env
al=ap.service
am=ap.plr
an=ap.create
ao=ap.createSimple
end

local function initAfterMain()
ae=ac.Explorer
af=ac.Properties
ag=ac.ScriptViewer
ah=ac.Notebook
end

local function main()
local ap={}

local aq,ar,as
local at,au
local g
local h,i,j,k,l,m={},{},{},{},{},{}
local n,o,p
local q,r={},{}
local s,t=table,string
local u=f.GetPropertyChangedSignal
local v=f.GetAttributeChangedSignal
local w=f.IsA
local x=f.GetAttribute
local y=f.SetAttribute

ap.GuiElems={}
ap.Index=0
ap.ViewWidth=0
ap.MinInputWidth=100
ap.EntryIndent=16
ap.EntryOffset=4
ap.NameWidthCache={}
ap.SubPropCache={}
ap.ClassLists={}
ap.SearchText=""

ap.AddAttributeProp={Category="Attributes",Class="",Name="",SpecialRow="AddAttribute",Tags={}}
ap.SoundPreviewProp={Category="Data",ValueType={Name="SoundPlayer"},Class="Sound",Name="Preview",Tags={}}

ap.IgnoreProps={
DataModel={
PrivateServerId=true,
PrivateServerOwnerId=true,
VIPServerId=true,
VIPServerOwnerId=true
}
}

ap.ExpandableTypes={
Vector2=true,
Vector3=true,
UDim=true,
UDim2=true,
CFrame=true,
Rect=true,
PhysicalProperties=true,
Ray=true,
NumberRange=true,
Faces=true,
Axes=true
}

ap.ExpandableProps={
["Sound.SoundId"]=true
}

ap.CollapsedCategories={
["Surface Inputs"]=true,
Surface=true
}

ap.ConflictSubProps={
Vector2={"X","Y"},
Vector3={"X","Y","Z"},
UDim={"Scale","Offset"},
UDim2={"X","X.Scale","X.Offset","Y","Y.Scale","Y.Offset"},
CFrame={"Position","Position.X","Position.Y","Position.Z",
"RightVector","RightVector.X","RightVector.Y","RightVector.Z",
"UpVector","UpVector.X","UpVector.Y","UpVector.Z",
"LookVector","LookVector.X","LookVector.Y","LookVector.Z"},
Rect={"Min.X","Min.Y","Max.X","Max.Y"},
PhysicalProperties={"Density","Elasticity","ElasticityWeight","Friction","FrictionWeight"},
Ray={"Origin","Origin.X","Origin.Y","Origin.Z","Direction","Direction.X","Direction.Y","Direction.Z"},
NumberRange={"Min","Max"},
Faces={"Back","Bottom","Front","Left","Right","Top"},
Axes={"X","Y","Z"}
}

ap.ConflictIgnore={
BasePart={
ResizableFaces=true
}
}

ap.RoundableTypes={
float=true,
double=true,
Color3=true,
UDim=true,
UDim2=true,
Vector2=true,
Vector3=true,
NumberRange=true,
Rect=true,
NumberSequence=true,
ColorSequence=true,
Ray=true,
CFrame=true
}

ap.TypeNameConvert={
number="double",
boolean="bool"
}

ap.ToNumberTypes={
int=true,
int64=true,
float=true,
double=true
}

ap.DefaultPropValue={
string="",
bool=false,
double=0,
UDim=UDim.new(0,0),
UDim2=UDim2.new(0,0,0,0),
BrickColor=BrickColor.new"Medium stone grey",
Color3=Color3.new(1,1,1),
Vector2=Vector2.new(0,0),
Vector3=Vector3.new(0,0,0),
NumberSequence=NumberSequence.new(1),
ColorSequence=ColorSequence.new(Color3.new(1,1,1)),
NumberRange=NumberRange.new(0),
Rect=Rect.new(0,0,0,0)
}

ap.AllowedAttributeTypes={"string","boolean","number","UDim","UDim2","BrickColor","Color3","Vector2","Vector3","NumberSequence","ColorSequence","NumberRange","Rect"}

ap.StringToValue=function(z,A)
local B=z.ValueType
local C=B.Name

if C=="string"or C=="Content"then
return A
elseif ap.ToNumberTypes[C]then
return tonumber(A)
elseif C=="Vector2"then
local D=A:split","
local E,F=tonumber(D[1]),tonumber(D[2])
if E and F and#D>=2 then return Vector2.new(E,F)end
elseif C=="Vector3"then
local D=A:split","
local E,F,G=tonumber(D[1]),tonumber(D[2]),tonumber(D[3])
if E and F and G and#D>=3 then return Vector3.new(E,F,G)end
elseif C=="UDim"then
local D=A:split","
local E,F=tonumber(D[1]),tonumber(D[2])
if E and F and#D>=2 then return UDim.new(E,F)end
elseif C=="UDim2"then
local D=A:gsub("[{}]",""):split","
local E,F,G,H=tonumber(D[1]),tonumber(D[2]),tonumber(D[3]),tonumber(D[4])
if E and F and G and H and#D>=4 then return UDim2.new(E,F,G,H)end
elseif C=="CFrame"then
local D=A:split","
local E,F=pcall(CFrame.new,unpack(D))
if E and#D>=12 then return F end
elseif C=="Rect"then
local D=A:split","
local E,F=pcall(Rect.new,unpack(D))
if E and#D>=4 then return F end
elseif C=="Ray"then
local D=A:gsub("[{}]",""):split","
local E,F=pcall(Vector3.new,unpack(D,1,3))
local G,H=pcall(Vector3.new,unpack(D,4,6))
if E and G and#D>=6 then return Ray.new(F,H)end
elseif C=="NumberRange"then
local D=A:split","
local E,F=pcall(NumberRange.new,unpack(D))
if E and#D>=1 then return F end
elseif C=="Color3"then
local D=A:gsub("[{}]",""):split","
local E,F=pcall(Color3.fromRGB,unpack(D))
if E and#D>=3 then return F end
end

return nil
end

ap.ValueToString=function(z,A)
local B=z.ValueType
local C=B.Name

if C=="Color3"then
return ab.ColorToBytes(A)
elseif C=="NumberRange"then
return A.Min..", "..A.Max
end

return tostring(A)
end

ap.GetIndexableProps=function(z,A)
if not aa.Elevated then
if not pcall(function()return z.ClassName end)then return nil end
end

local B=ap.IgnoreProps[A.Name]or{}

local C={}
local D=1
local E=A.Properties
for F=1,#E do
local G=E[F]
if not B[G.Name]then
local H=pcall(function()return z[G.Name]end)
if H then
C[D]=G
D=D+1
end
end
end

return C
end

ap.FindFirstObjWhichIsA=function(z)
local A=ap.ClassLists[z]or{}
if A and#A>0 then
return A[1]
end

return nil
end

ap.ComputeConflicts=function(z)
local A=ad.Properties.MaxConflictCheck
local B=ae.Selection.List
local C=ap.ClassLists
local D=t.split
local E=s.clear
local F=ap.ConflictIgnore
local G={}
local H=z and{z}or h

if z then
local I=z.Class.."."..z.Name
m[I]=nil
local J=ap.ConflictSubProps[z.ValueType.Name]or{}
for K=1,#J do
m[I.."."..J[K] ]=nil
end
else
s.clear(m)
end

if#B>0 then
for I=1,#H do
local J=H[I]
local K,L=J.Name,J.Class
local M=J.RootType or J.ValueType
local N=M.Name
local O=J.AttributeName
local P=L.."."..K

local Q=0
local R=ap.ConflictSubProps[N]or{}
local S=#R
local T=S+1
local U=0
local V={}
local W=F[L]and F[L][K]
local X=(N=="PhysicalProperties")
local Y=J.IsAttribute
local Z=J.MultiType

E(G)

if not Z then
local _,av,aw
local ax=C[J.Class]or{}
for ay=1,#ax do
local az=ax[ay]
if not aw then
if Y then
_=x(az,O)
if _~=nil then
av=az
aw=true
end
else
_=az[K]
av=az
aw=true
end
if W then break end
else
local aA,aB
if Y then
aA=x(az,O)
if aA==nil then aB=true end
else
aA=az[K]
end

if not aB then
if not G[1]then
if X then
if(_ and true or false)~=(aA and true or false)then
G[1]=true
U=U+1
end
elseif _~=aA then
G[1]=true
U=U+1
end
end

if S>0 then
for aC=1,S do
local aD=V[aC]
if not aD then aD=D(R[aC],".")V[aC]=aD end

local aE=_
local aF=aA

for aG=1,#aD do
if not aE or not aF then break end
local aH=aD[aG]
aE=aE[aH]
aF=aF[aH]
end

local aG=aC+1
if not G[aG]and aE~=aF then
G[aG]=true
U=U+1
end
end
end

if U==T then break end
end
end

Q=Q+1
if Q==A then break end
end

if not G[1]then m[P]=av end
for ay=1,S do
if not G[ay+1]then
m[P.."."..R[ay] ]=av
end
end
end
end
end

if z then
ap.Refresh()
end
end


ad.Properties.ShowAttributes=true
ap.ShowExplorerProps=function()local av=
ad.Properties.MaxConflictCheck
local aw=ae.Selection.List
local ax={}
local ay=1 local az=
aa.Elevated
local aA,aB=ad.Properties.ShowDeprecated,ad.Properties.ShowHidden
local aC=ai.Classes
local aD={}
local aE=t.lower
local aF=aj.PropertyOrders
local aG=f.GetAttributes
local aH=ad.Properties.MaxAttributes
local z=ad.Properties.ShowAttributes
local A={}
local B=0
local C=typeof
local D=ap.TypeNameConvert

s.clear(h)

for E=1,#aw do
local F=aw[E]
local G=F.Obj
local H=F.Class
if not H then H=G.ClassName F.Class=H end

local I=aC[H]
while I do
local J=I.Name
if not ax[J]then
local K=k[J]
if not K then K=ap.GetIndexableProps(G,I)k[J]=K end

for L=1,#K do
local M=K[L]
local N=M.Tags
if(not N.Deprecated or aA)and(not N.Hidden or aB)then
h[ay]=M
ay=ay+1
end
end
ax[J]=true
end

local K=aD[J]
if not K then K={}aD[J]=K end
K[#K+1]=G

I=I.Superclass
end

if z and B<aH then
local J=aG(G)
for K,L in pairs(J)do
local M=C(L)
if not A[K]then
local N=(M=="Instance"and"Class")or(M=="EnumItem"and"Enum")or"Other"
local O={Name=D[M]or M,Category=N}
local P={IsAttribute=true,Name="ATTR_"..K,AttributeName=K,DisplayName=K,Class="Instance",ValueType=O,Category="Attributes",Tags={}}
h[ay]=P
ay=ay+1
B=B+1
A[K]={M,P}
if B==aH then break end
elseif A[K][1]~=M then
A[K][2].MultiType=true
A[K][2].Tags.ReadOnly=true
A[K][2].ValueType={Name="string"}
end
end
end
end

s.sort(h,function(E,F)
if E.Category~=F.Category then
return(g[E.Category]or 9999)<(g[F.Category]or 9999)
else
local G=(aF[E.Class]and aF[E.Class][E.Name])or 9999999
local H=(aF[F.Class]and aF[F.Class][F.Name])or 9999999
if G~=H then
return G<H
else
return aE(E.Name)<aE(F.Name)
end
end
end)


ap.ClassLists=aD
ap.ComputeConflicts()

if#h>0 then
h[#h+1]=ap.AddAttributeProp
end

ap.Update()
ap.Refresh()
end

ap.UpdateView=function()
local aw=math.ceil(as.AbsoluteSize.Y/23)
local ax=as.AbsoluteSize.X
local ay=ap.ViewWidth+ap.MinInputWidth

at.VisibleSpace=aw
at.TotalSpace=#i+1
au.VisibleSpace=ax
au.TotalSpace=ay

at.Gui.Visible=#i+1>aw
au.Gui.Visible=ad.Properties.ScaleType==0 and ay>ax

local az=as.Size
as.Size=UDim2.new(1,(at.Gui.Visible and-16 or 0),1,(au.Gui.Visible and-39 or-23))
if az~=as.Size then
ap.UpdateView()
else
at:Update()
au:Update()

if at.Gui.Visible and au.Gui.Visible then
at.Gui.Size=UDim2.new(0,16,1,-39)
au.Gui.Size=UDim2.new(1,-16,0,16)
ap.Window.GuiElems.Content.ScrollCorner.Visible=true
else
at.Gui.Size=UDim2.new(0,16,1,-23)
au.Gui.Size=UDim2.new(1,0,0,16)
ap.Window.GuiElems.Content.ScrollCorner.Visible=false
end

ap.Index=at.Index
end
end

ap.MakeSubProp=function(aw,ax,ay,az)
local aA={}
for aB,aC in pairs(aw)do
aA[aB]=aC
end
aA.RootType=aA.RootType or aA.ValueType
aA.ValueType=ay
aA.SubName=aA.SubName and(aA.SubName..ax)or ax
aA.DisplayName=az

return aA
end

ap.GetExpandedProps=function(aw)
local ax={}
local ay=aw.ValueType
local az=ay.Name
local aA=ap.MakeSubProp

if az=="Vector2"then
ax[1]=aA(aw,".X",{Name="float"})
ax[2]=aA(aw,".Y",{Name="float"})
elseif az=="Vector3"then
ax[1]=aA(aw,".X",{Name="float"})
ax[2]=aA(aw,".Y",{Name="float"})
ax[3]=aA(aw,".Z",{Name="float"})
elseif az=="CFrame"then
ax[1]=aA(aw,".Position",{Name="Vector3"})
ax[2]=aA(aw,".RightVector",{Name="Vector3"})
ax[3]=aA(aw,".UpVector",{Name="Vector3"})
ax[4]=aA(aw,".LookVector",{Name="Vector3"})
elseif az=="UDim"then
ax[1]=aA(aw,".Scale",{Name="float"})
ax[2]=aA(aw,".Offset",{Name="int"})
elseif az=="UDim2"then
ax[1]=aA(aw,".X",{Name="UDim"})
ax[2]=aA(aw,".Y",{Name="UDim"})
elseif az=="Rect"then
ax[1]=aA(aw,".Min.X",{Name="float"},"X0")
ax[2]=aA(aw,".Min.Y",{Name="float"},"Y0")
ax[3]=aA(aw,".Max.X",{Name="float"},"X1")
ax[4]=aA(aw,".Max.Y",{Name="float"},"Y1")
elseif az=="PhysicalProperties"then
ax[1]=aA(aw,".Density",{Name="float"})
ax[2]=aA(aw,".Elasticity",{Name="float"})
ax[3]=aA(aw,".ElasticityWeight",{Name="float"})
ax[4]=aA(aw,".Friction",{Name="float"})
ax[5]=aA(aw,".FrictionWeight",{Name="float"})
elseif az=="Ray"then
ax[1]=aA(aw,".Origin",{Name="Vector3"})
ax[2]=aA(aw,".Direction",{Name="Vector3"})
elseif az=="NumberRange"then
ax[1]=aA(aw,".Min",{Name="float"})
ax[2]=aA(aw,".Max",{Name="float"})
elseif az=="Faces"then
ax[1]=aA(aw,".Back",{Name="bool"})
ax[2]=aA(aw,".Bottom",{Name="bool"})
ax[3]=aA(aw,".Front",{Name="bool"})
ax[4]=aA(aw,".Left",{Name="bool"})
ax[5]=aA(aw,".Right",{Name="bool"})
ax[6]=aA(aw,".Top",{Name="bool"})
elseif az=="Axes"then
ax[1]=aA(aw,".X",{Name="bool"})
ax[2]=aA(aw,".Y",{Name="bool"})
ax[3]=aA(aw,".Z",{Name="bool"})
end

if aw.Name=="SoundId"and aw.Class=="Sound"then
ax[1]=ap.SoundPreviewProp
end

return ax
end

ap.Update=function()
s.clear(i)

local aw=ap.NameWidthCache
local ax
local ay=1
local az,aA=0,1

local aB=al.TextService
local aC=aB.GetTextSize
local aD=Enum.Font.SourceSans
local aE=Vector2.new(math.huge,20)
local aF=t.split
local aG=ap.EntryIndent
local aH=ad.Properties.ScaleType==0
local z,A=t.find,t.lower
local B=(#ap.SearchText>0 and A(ap.SearchText))

local function recur(C,D)
for E=1,#C do
local F=C[E]
local G=F.Name
local H=F.SubName
local I=F.Category

local J
if B and D==1 then
if z(A(G),B,1,true)then
J=true
end
else
J=true
end

if J and ax~=I then
i[ay]={CategoryName=I}
ay=ay+1
ax=I
end

if(j["CAT_"..I]and J)or F.SpecialRow then
if D>1 then F.Depth=D if D>aA then aA=D end end

if aH then
local K=H and aF(H,".")
local L=F.DisplayName or(K and K[#K])or G

local M=aw[L]
if not M then M=aC(aB,L,14,aD,aE).X aw[L]=M end

local N=M+aG*D
if N>az then
az=N
end
end

i[ay]=F
ay=ay+1

local K=F.Class.."."..F.Name..(F.SubName or"")
if j[K]then
local L=D+1
local M=ap.GetExpandedProps(F)
if#M>0 then
recur(M,L)
end
end
end
end
end
recur(h,1)

p=nil
ap.ViewWidth=az+9+ap.EntryOffset
ap.UpdateView()
end

ap.NewPropEntry=function(aw)
local ax=ap.EntryTemplate:Clone()
local ay=ax.NameFrame
local az=ax.ValueFrame
local aA=ab.Checkbox.new(1)
aA.Gui.Position=UDim2.new(0,3,0,3)
aA.Gui.Parent=az
aA.OnInput:Connect(function()
local aB=i[aw+ap.Index]
if not aB then return end

if aB.ValueType.Name=="PhysicalProperties"then
ap.SetProp(aB,aA.Toggled and true or nil)
else
ap.SetProp(aB,aA.Toggled)
end
end)
q[aw]=aA

local aB=aa.MiscIcons:GetLabel()
aB.Position=UDim2.new(0,2,0,3)
aB.Parent=ax.ValueFrame.RightButton

ax.Position=UDim2.new(0,0,0,23*(aw-1))

ay.Expand.InputBegan:Connect(function(aC)
local aD=i[aw+ap.Index]
if not aD or(aC.UserInputType~=Enum.UserInputType.MouseMovement and aC.UserInputType~=Enum.UserInputType.Touch)then return end

local aE=(aD.CategoryName and"CAT_"..aD.CategoryName)or aD.Class.."."..aD.Name..(aD.SubName or"")

aa.MiscIcons:DisplayByKey(ax.NameFrame.Expand.Icon,j[aE]and"Collapse_Over"or"Expand_Over")
end)

ay.Expand.InputEnded:Connect(function(aC)
local aD=i[aw+ap.Index]
if not aD or(aC.UserInputType~=Enum.UserInputType.MouseMovement and aC.UserInputType~=Enum.UserInputType.Touch)then return end

local aE=(aD.CategoryName and"CAT_"..aD.CategoryName)or aD.Class.."."..aD.Name..(aD.SubName or"")

aa.MiscIcons:DisplayByKey(ax.NameFrame.Expand.Icon,j[aE]and"Collapse"or"Expand")
end)

ay.Expand.MouseButton1Down:Connect(function()
local aC=i[aw+ap.Index]
if not aC then return end

local aD=(aC.CategoryName and"CAT_"..aC.CategoryName)or aC.Class.."."..aC.Name..(aC.SubName or"")
if not aC.CategoryName and not ap.ExpandableTypes[aC.ValueType and aC.ValueType.Name]and not ap.ExpandableProps[aD]then return end

j[aD]=not j[aD]
ap.Update()
ap.Refresh()
end)

ay.PropName.InputBegan:Connect(function(aC)
local aD=i[aw+ap.Index]
if not aD then return end
if(aC.UserInputType==Enum.UserInputType.MouseMovement or aC.UserInputType==Enum.UserInputType.Touch)and not ay.PropName.TextFits then
local aE=ap.FullNameFrame
local aF=t.split(aD.Class.."."..aD.Name..(aD.SubName or""),".")
local aG=aD.DisplayName or aF[#aF]
local aH=al.TextService:GetTextSize(aG,14,Enum.Font.SourceSans,Vector2.new(math.huge,20)).X

aE.TextLabel.Text=aG
aE.Size=UDim2.new(0,aH+4,0,22)
aE.Visible=true
ap.FullNameFrameIndex=aw
ap.FullNameFrameAttach.SetData(aE,{Target=ay})
ap.FullNameFrameAttach.Enable()
end
end)

ay.PropName.InputEnded:Connect(function(aC)
if(aC.UserInputType==Enum.UserInputType.MouseMovement or aC.UserInputType==Enum.UserInputType.Touch)and ap.FullNameFrameIndex==aw then
ap.FullNameFrame.Visible=false
ap.FullNameFrameAttach.Disable()
end
end)


az.ValueBox.MouseButton1Down:Connect(function()
local aC=i[aw+ap.Index]
if not aC then return end

ap.SetInputProp(aC,aw)
end)

az.ColorButton.MouseButton1Down:Connect(function()
local aC=i[aw+ap.Index]
if not aC then return end

ap.SetInputProp(aC,aw,"color")
end)

az.RightButton.MouseButton1Click:Connect(function()
local aC=i[aw+ap.Index]
if not aC then return end

local aD=aC.Class.."."..aC.Name..(aC.SubName or"")
local aE=p and(p.Class.."."..p.Name..(p.SubName or""))

if aD==aE and p.ValueType.Category=="Class"then
p=nil
ap.SetProp(aC,nil)
else
ap.SetInputProp(aC,aw,"right")
end
end)

ay.ToggleAttributes.MouseButton1Click:Connect(function()
ad.Properties.ShowAttributes=not ad.Properties.ShowAttributes
ap.ShowExplorerProps()
end)

ax.RowButton.MouseButton1Click:Connect(function()
ap.DisplayAddAttributeWindow()
end)

ax.EditAttributeButton.MouseButton1Down:Connect(function()
local aC=i[aw+ap.Index]
if not aC then return end

ap.DisplayAttributeContext(aC)
end)

az.SoundPreview.ControlButton.MouseButton1Click:Connect(function()
if ap.PreviewSound and ap.PreviewSound.Playing then
ap.SetSoundPreview(false)
else
local aC=ap.FindFirstObjWhichIsA"Sound"
if aC then ap.SetSoundPreview(aC)end
end
end)

az.SoundPreview.InputBegan:Connect(function(aC)
if aC.UserInputType~=Enum.UserInputType.MouseButton1 and aC.UserInputType~=Enum.UserInputType.Touch then return end

local aD,aE
aD=al.UserInputService.InputEnded:Connect(function(aF)
if aF.UserInputType==Enum.UserInputType.MouseButton1 or aF.UserInputType==Enum.UserInputType.Touch then
aD:Disconnect()
if aE then
aE:Disconnect()
end
end
end)

local aF=ax.ValueFrame.SoundPreview.TimeLine
local aG=ap.FindFirstObjWhichIsA"Sound"
if aG then ap.SetSoundPreview(aG,true)end

local function update(aH)
local z=ap.PreviewSound
if not z or z.TimeLength==0 then return end

local A=(aH.UserInputType==Enum.UserInputType.Touch)and aH.Position.X or aH.Position.X
local B=aF.AbsoluteSize
local C=A-aF.AbsolutePosition.X

if B.X<=1 then return end
if C<0 then C=0 elseif C>=B.X then C=B.X-1 end

local D=(C/(B.X-1))
z.TimePosition=D*z.TimeLength
aF.Slider.Position=UDim2.new(D,-4,0,-8)
end

update(aC)

aE=al.UserInputService.InputChanged:Connect(function(aH)
if aH.UserInputType==Enum.UserInputType.MouseMovement or aH.UserInputType==Enum.UserInputType.Touch then
update(aH)
end
end)
end)


ax.Parent=as

return{
Gui=ax,
GuiElems={
NameFrame=ay,
ValueFrame=az,
PropName=ay.PropName,
ValueBox=az.ValueBox,
Expand=ay.Expand,
ColorButton=az.ColorButton,
ColorPreview=az.ColorButton.ColorPreview,
Gradient=az.ColorButton.ColorPreview.UIGradient,
EnumArrow=az.EnumArrow,
Checkbox=az.Checkbox,
RightButton=az.RightButton,
RightButtonIcon=aB,
RowButton=ax.RowButton,
EditAttributeButton=ax.EditAttributeButton,
ToggleAttributes=ay.ToggleAttributes,
SoundPreview=az.SoundPreview,
SoundPreviewSlider=az.SoundPreview.TimeLine.Slider
}
}
end

ap.GetSoundPreviewEntry=function()
for aw=1,#i do
if i[aw]==ap.SoundPreviewProp then
return l[aw-ap.Index]
end
end
end

ap.SetSoundPreview=function(aw,ax)
local ay=ap.PreviewSound
if not ay then
ay=Instance.new"Sound"
ay.Name="Preview"
ay.Paused:Connect(function()
local az=ap.GetSoundPreviewEntry()
if az then aa.MiscIcons:DisplayByKey(az.GuiElems.SoundPreview.ControlButton.Icon,"Play")end
end)
ay.Resumed:Connect(function()ap.Refresh()end)
ay.Ended:Connect(function()
local az=ap.GetSoundPreviewEntry()
if az then az.GuiElems.SoundPreviewSlider.Position=UDim2.new(0,-4,0,-8)end
ap.Refresh()
end)
ay.Parent=aq.Gui
ap.PreviewSound=ay
end

if not aw then
ay:Pause()
else
local az=ay.SoundId~=aw.SoundId
ay.SoundId=aw.SoundId
ay.PlaybackSpeed=aw.PlaybackSpeed
ay.Volume=aw.Volume
if az then ay.TimePosition=0 end
if not ax then ay:Resume()end

coroutine.wrap(function()
local aA=tick()
ap.SoundPreviewTime=aA
while aA==ap.SoundPreviewTime and ay.Playing do
local aB=ap.GetSoundPreviewEntry()
if aB then
local aC=ay.TimeLength
local aD=ay.TimePosition/(aC==0 and 1 or aC)
aB.GuiElems.SoundPreviewSlider.Position=UDim2.new(aD,-4,0,-8)
end
ab.FastWait()
end
end)()
ap.Refresh()
end
end

ap.DisplayAttributeContext=function(aw)
local ax=ap.AttributeContext
if not ax then
ax=ab.ContextMenu.new()
ax.Iconless=true
ax.Width=80
end
ax:Clear()

ax:Add{Name="Edit",OnClick=function()
ap.DisplayAddAttributeWindow(aw)
end}
ax:Add{Name="Delete",OnClick=function()
ap.SetProp(aw,nil,true)
ap.ShowExplorerProps()
end}

ax:Show()
end

ap.DisplayAddAttributeWindow=function(aw)
local ax=ap.AddAttributeWindow
if not ax then
ax=ab.Window.new()
ax.Alignable=false
ax.Resizable=false
ax:SetTitle"Add Attribute"
ax:SetSize(200,130)

local ay=ab.Button.new()
local az=ab.Label.new()
az.Text="Name"
az.Position=UDim2.new(0,30,0,10)
az.Size=UDim2.new(0,40,0,20)
ax:Add(az)

local aA=ab.ViewportTextBox.new()
aA.Position=UDim2.new(0,75,0,10)
aA.Size=UDim2.new(0,120,0,20)
ax:Add(aA,"NameBox")
aA.TextBox:GetPropertyChangedSignal"Text":Connect(function()
ay:SetDisabled(#aA:GetText()==0)
end)

local aB=ab.Label.new()
aB.Text="Type"
aB.Position=UDim2.new(0,30,0,40)
aB.Size=UDim2.new(0,40,0,20)
ax:Add(aB)

local aC=ab.DropDown.new()
aC.CanBeEmpty=false
aC.Position=UDim2.new(0,75,0,40)
aC.Size=UDim2.new(0,120,0,20)
aC:SetOptions(ap.AllowedAttributeTypes)
ax:Add(aC,"TypeChooser")

local aD=ab.Label.new()
aD.Text=""
aD.Position=UDim2.new(0,5,1,-45)
aD.Size=UDim2.new(1,-10,0,20)
aD.TextColor3=ad.Theme.Important
ax.ErrorLabel=aD
ax:Add(aD,"Error")

local aE=ab.Button.new()
aE.Text="Cancel"
aE.Position=UDim2.new(1,-97,1,-25)
aE.Size=UDim2.new(0,92,0,20)
aE.OnClick:Connect(function()
ax:Close()
end)
ax:Add(aE)

ay.Text="Save"
ay.Position=UDim2.new(0,5,1,-25)
ay.Size=UDim2.new(0,92,0,20)
ay.OnClick:Connect(function()
local aF=aA:GetText()
if#aF>100 then
aD.Text="Error: Name over 100 chars"
return
elseif aF:sub(1,3)=="RBX"then
aD.Text="Error: Name begins with 'RBX'"
return
end

local aG=aC.Selected
local aH={Name=ap.TypeNameConvert[aG]or aG,Category="DataType"}
local z={IsAttribute=true,Name="ATTR_"..aF,AttributeName=aF,DisplayName=aF,Class="Instance",ValueType=aH,Category="Attributes",Tags={}}

ad.Properties.ShowAttributes=true
ap.SetProp(z,ap.DefaultPropValue[aH.Name],true,ap.EditingAttribute)
ap.ShowExplorerProps()
ax:Close()
end)
ax:Add(ay,"SaveButton")

ap.AddAttributeWindow=ax
end

ap.EditingAttribute=aw
ax:SetTitle(aw and"Edit Attribute "..aw.AttributeName or"Add Attribute")
ax.Elements.Error.Text=""
ax.Elements.NameBox:SetText""
ax.Elements.SaveButton:SetDisabled(true)
ax.Elements.TypeChooser:SetSelected(1)
ax:Show()
end

ap.IsTextEditable=function(aw)
local ax=aw.ValueType
local ay=ax.Name

return ay~="bool"and ax.Category~="Enum"and ax.Category~="Class"and ay~="BrickColor"
end

ap.DisplayEnumDropdown=function(aw)
local ax=ap.EnumContext
if not ax then
ax=ab.ContextMenu.new()
ax.Iconless=true
ax.MaxHeight=200
ax.ReverseYOffset=22
ap.EnumDropdown=ax
end

if not p or p.ValueType.Category~="Enum"then return end
local ay=p

local az=l[aw]
local aA=az.GuiElems.ValueFrame

local aB=Enum[ay.ValueType.Name]
if not aB then return end

local aC={}
for aD,aE in next,aB:GetEnumItems()do
aC[#aC+1]=aE
end
s.sort(aC,function(aD,aE)return aD.Name<aE.Name end)

ax:Clear()

local function onClick(aD)
if ay~=p then return end

local aE=aB[aD]
p=nil
ap.SetProp(ay,aE)
end

for aD=1,#aC do
local aE=aC[aD]
ax:Add{Name=aE.Name,OnClick=onClick}
end

ax.Width=aA.AbsoluteSize.X
ax:Show(aA.AbsolutePosition.X,aA.AbsolutePosition.Y+22)
end

ap.DisplayBrickColorEditor=function(aw,ax,ay)
local az=ap.BrickColorEditor
if not az then
az=ab.BrickColorPicker.new()
az.Gui.DisplayOrder=aa.DisplayOrders.Menu
az.ReverseYOffset=22

az.OnSelect:Connect(function(aA)
if not az.CurrentProp or az.CurrentProp.ValueType.Name~="BrickColor"then return end

if az.CurrentProp==p then p=nil end
ap.SetProp(az.CurrentProp,BrickColor.new(aA))
end)

az.OnMoreColors:Connect(function()
az:Close()
local aA
for aB,aC in pairs(ai.Classes.BasePart.Properties)do
if aC.Name=="Color"then
aA=aC
break
end
end
ap.DisplayColorEditor(aA,az.SavedColor.Color)
end)

ap.BrickColorEditor=az
end

local aA=l[ax]
local aB=aA.GuiElems.ValueFrame

az.CurrentProp=aw
az.SavedColor=ay
if aw and aw.Class=="BasePart"and aw.Name=="BrickColor"then
az:SetMoreColorsVisible(true)
else
az:SetMoreColorsVisible(false)
end
az:Show(aB.AbsolutePosition.X,aB.AbsolutePosition.Y+22)
end

ap.DisplayColorEditor=function(aw,ax)
local ay=ap.ColorEditor
if not ay then
ay=ab.ColorPicker.new()

ay.OnSelect:Connect(function(az)
if not ay.CurrentProp then return end
local aA=ay.CurrentProp.ValueType.Name
if aA~="Color3"and aA~="BrickColor"then return end

local aB=(aA=="Color3"and az or BrickColor.new(az))

if ay.CurrentProp==p then p=nil end
ap.SetProp(ay.CurrentProp,aB)
end)

ap.ColorEditor=ay
end

ay.CurrentProp=aw
if ax then
ay:SetColor(ax)
else
local az=ap.GetFirstPropVal(aw)
if az then ay:SetColor(az)end
end
ay:Show()
end

ap.DisplayNumberSequenceEditor=function(aw,ax)
local ay=ap.NumberSequenceEditor
if not ay then
ay=ab.NumberSequenceEditor.new()

ay.OnSelect:Connect(function(az)
if not ay.CurrentProp or ay.CurrentProp.ValueType.Name~="NumberSequence"then return end

if ay.CurrentProp==p then p=nil end
ap.SetProp(ay.CurrentProp,az)
end)

ap.NumberSequenceEditor=ay
end

ay.CurrentProp=aw
if ax then
ay:SetSequence(ax)
else
local az=ap.GetFirstPropVal(aw)
if az then ay:SetSequence(az)end
end
ay:Show()
end

ap.DisplayColorSequenceEditor=function(aw,ax)
local ay=ap.ColorSequenceEditor
if not ay then
ay=ab.ColorSequenceEditor.new()

ay.OnSelect:Connect(function(az)
if not ay.CurrentProp or ay.CurrentProp.ValueType.Name~="ColorSequence"then return end

if ay.CurrentProp==p then p=nil end
ap.SetProp(ay.CurrentProp,az)
end)

ap.ColorSequenceEditor=ay
end

ay.CurrentProp=aw
if ax then
ay:SetSequence(ax)
else
local az=ap.GetFirstPropVal(aw)
if az then ay:SetSequence(az)end
end
ay:Show()
end

ap.GetFirstPropVal=function(aw)
local ax=ap.FindFirstObjWhichIsA(aw.Class)
if ax then
return ap.GetPropVal(aw,ax)
end
end

ap.GetPropVal=function(aw,ax)
if aw.MultiType then return"<Multiple Types>"end
if not ax then return end

local ay
if aw.IsAttribute then
ay=x(ax,aw.AttributeName)
if ay==nil then return nil end

local az=typeof(ay)
local aA=ap.TypeNameConvert[az]or az
if aw.RootType then
if aw.RootType.Name~=aA then
return nil
end
elseif aw.ValueType.Name~=aA then
return nil
end
else
ay=ax[aw.Name]
end
if aw.SubName then
local az=t.split(aw.SubName,".")
for aA=1,#az do
local aB=az[aA]
if#aB>0 and ay then
ay=ay[aB]
end
end
end

return ay
end

ap.SelectObject=function(aw)
if p and p.ValueType.Category=="Class"then
local ax=p
p=nil

if w(aw,ax.ValueType.Name)then
ap.SetProp(ax,aw)
else
ap.Refresh()
end

return true
end

return false
end

ap.DisplayProp=function(aw,ax)local ay=
aw.Name
local az=aw.ValueType
local aA=az.Name
local aB=aw.Tags
local aC=aw.Class.."."..aw.Name..(aw.SubName or"")
local aD=m[aC]
local aE=l[ax]
local aF=UDim2

local aG=aE.GuiElems local aH=
aG.ValueFrame
local z=aG.ValueBox
local A=aG.ColorButton
local B=aG.ColorPreview
local C=aG.Gradient
local D=aG.EnumArrow
local E=aG.Checkbox
local F=aG.RightButton
local G=aG.SoundPreview

local H=ap.GetPropVal(aw,aD)
local I=p and(p.Class.."."..p.Name..(p.SubName or""))

local J=4
local K=6


if(aA=="Color3"or aA=="BrickColor"or aA=="ColorSequence")then
A.Visible=true
D.Visible=false
if H then
C.Color=(aA=="Color3"and ColorSequence.new(H))or(aA=="BrickColor"and ColorSequence.new(H.Color))or H
else
C.Color=ColorSequence.new(Color3.new(1,1,1))
end
B.BorderColor3=(aA=="ColorSequence"and Color3.new(1,1,1)or Color3.new(0,0,0))
J=22
K=24+(aA=="ColorSequence"and 20 or 0)
elseif az.Category=="Enum"then
A.Visible=false
D.Visible=not aw.Tags.ReadOnly
K=22
elseif(aC==I and az.Category=="Class")or aA=="NumberSequence"then
A.Visible=false
D.Visible=false
K=26
else
A.Visible=false
D.Visible=false
end

z.Position=aF.new(0,J,0,0)
z.Size=aF.new(1,-K,1,0)


if I==aC and az.Category=="Class"then
aa.MiscIcons:DisplayByKey(aG.RightButtonIcon,"Delete")
aG.RightButtonIcon.Visible=true
F.Text=""
F.Visible=true
elseif aA=="NumberSequence"or aA=="ColorSequence"then
aG.RightButtonIcon.Visible=false
F.Text="..."
F.Visible=true
else
F.Visible=false
end


if aA=="bool"or aA=="PhysicalProperties"then
z.Visible=false
E.Visible=true
G.Visible=false
q[ax].Disabled=aB.ReadOnly
if aA=="PhysicalProperties"and m[aC]then
q[ax]:SetState(H and true or false)
else
q[ax]:SetState(H)
end
elseif aA=="SoundPlayer"then
z.Visible=false
E.Visible=false
G.Visible=true
local L=ap.PreviewSound and ap.PreviewSound.Playing
aa.MiscIcons:DisplayByKey(G.ControlButton.Icon,L and"Pause"or"Play")
else
z.Visible=true
E.Visible=false
G.Visible=false

if H~=nil then
if aA=="Color3"then
z.Text="["..ab.ColorToBytes(H).."]"
elseif az.Category=="Enum"then
z.Text=H.Name
elseif ap.RoundableTypes[aA]and ad.Properties.NumberRounding then
local L=ap.ValueToString(aw,H)
z.Text=L:gsub("-?%d+%.%d+",function(M)
return tostring(tonumber(("%."..ad.Properties.NumberRounding.."f"):format(M)))
end)
else
z.Text=ap.ValueToString(aw,H)
end
else
z.Text=""
end

z.TextColor3=aB.ReadOnly and ad.Theme.PlaceholderText or ad.Theme.Text
end
end

ap.Refresh=function()
local aw=math.max(math.ceil((as.AbsoluteSize.Y)/23),0)
local ax=as.AbsoluteSize.X
local az=math.max(ap.MinInputWidth,ax-ap.ViewWidth)
local aA=false local aB=
f.IsA
local aC=UDim2
local aD=t.split
local aE=ad.Properties.ScaleType


for aF=1,#r do
r[aF]:Disconnect()
end
s.clear(r)


ap.FullNameFrame.Visible=false
ap.FullNameFrameAttach.Disable()

for aF=1,aw do
local aG=l[aF]
if not l[aF]then aG=ap.NewPropEntry(aF)l[aF]=aG end

local aH=aG.Gui
local z=aG.GuiElems
local A=z.NameFrame
local B=z.PropName
local C=z.ValueFrame
local D=z.Expand
local E=z.ValueBox
local F=z.PropName local G=
z.RightButton
local H=z.EditAttributeButton
local I=z.ToggleAttributes

local J=i[aF+ap.Index]
if J then
local K=(aE==0 and au.Index or 0)
aH.Visible=true
aH.Position=aC.new(0,-K,0,aH.Position.Y.Offset)
aH.Size=aC.new(aE==0 and 0 or 1,aE==0 and ap.ViewWidth+az or 0,0,22)

if J.SpecialRow then
if J.SpecialRow=="AddAttribute"then
A.Visible=false
C.Visible=false
z.RowButton.Visible=true
end
else

A.Visible=true
z.RowButton.Visible=false

local L=ap.EntryIndent*(J.Depth or 1)
local M=L+ap.EntryOffset
A.Position=aC.new(0,M,0,0)
B.Size=aC.new(1,-2-(aE==0 and 0 or 6),1,0)

local N=(J.CategoryName and"CAT_"..J.CategoryName)or J.Class.."."..J.Name..(J.SubName or"")

if J.CategoryName then
aH.BackgroundColor3=ad.Theme.Main1
C.Visible=false

F.Text=J.CategoryName
F.Font=Enum.Font.SourceSansBold
D.Visible=true
F.TextColor3=ad.Theme.Text
A.BackgroundTransparency=1
A.Size=aC.new(1,0,1,0)
H.Visible=false

local O=ad.Properties.ShowAttributes
I.Position=aC.new(1,-85-M,0,0)
I.Text=(O and"[Setting: ON]"or"[Setting: OFF]")
I.TextColor3=ad.Theme.Text
I.Visible=(J.CategoryName=="Attributes")
else
local O=J.Name
local P=J.ValueType
local Q=P.Name
local R=J.Tags
local S=m[N]

local T=(J.IsAttribute and 20 or 0)
H.Visible=(J.IsAttribute and not J.RootType)
I.Visible=false


if aE==0 then
A.Size=aC.new(0,ap.ViewWidth-M-1,1,0)
C.Position=aC.new(0,ap.ViewWidth,0,0)
C.Size=aC.new(0,az-T,1,0)
else
A.Size=aC.new(0.5,-M-1,1,0)
C.Position=aC.new(0.5,0,0,0)
C.Size=aC.new(0.5,-T,1,0)
end

local U=aD(N,".")
F.Text=J.DisplayName or U[#U]
F.Font=Enum.Font.SourceSans
aH.BackgroundColor3=ad.Theme.Main2
C.Visible=true

D.Visible=P.Category=="DataType"and ap.ExpandableTypes[Q]or ap.ExpandableProps[N]
F.TextColor3=R.ReadOnly and ad.Theme.PlaceholderText or ad.Theme.Text


ap.DisplayProp(J,aF)
if S then
if J.IsAttribute then
r[#r+1]=v(S,J.AttributeName):Connect(function()
ap.DisplayProp(J,aF)
end)
else
r[#r+1]=u(S,O):Connect(function()
ap.DisplayProp(J,aF)
end)
end
end


local V=E.Visible
local W=p and(p.Class.."."..p.Name..(p.SubName or""))
if N==W then
A.BackgroundColor3=ad.Theme.ListSelection
A.BackgroundTransparency=0
if P.Category=="Class"or P.Category=="Enum"or Q=="BrickColor"then
C.BackgroundColor3=ad.Theme.TextBox
C.BackgroundTransparency=0
E.Visible=true
else
aA=true
local X=(aE==0 and 0 or 0.5)
local Y=(aE==0 and ap.ViewWidth-au.Index or 0)
local Z=0

if Q=="Color3"or Q=="ColorSequence"then
Y=Y+22
end

if Q=="NumberSequence"or Q=="ColorSequence"then
Z=20
end

n.Position=aC.new(X,Y,0,aH.Position.Y.Offset)
n.Size=aC.new(1-X,-Y-Z-T,0,22)
n.Visible=true
E.Visible=false
end
else
A.BackgroundColor3=ad.Theme.Main1
A.BackgroundTransparency=1
C.BackgroundColor3=ad.Theme.Main1
C.BackgroundTransparency=1
E.Visible=V
end
end


if J.CategoryName or ap.ExpandableTypes[J.ValueType and J.ValueType.Name]or ap.ExpandableProps[N]then
if ab.CheckMouseInGui(D)then
aa.MiscIcons:DisplayByKey(D.Icon,j[N]and"Collapse_Over"or"Expand_Over")
else
aa.MiscIcons:DisplayByKey(D.Icon,j[N]and"Collapse"or"Expand")
end
D.Visible=true
else
D.Visible=false
end
end
aH.Visible=true
else
aH.Visible=false
end
end

if not aA then
n.Visible=false
end

for aF=aw+1,#l do
l[aF].Gui:Destroy()
l[aF]=nil
q[aF]=nil
end
end

ap.SetProp=function(aw,ax,az,aA)
local aB=ae.Selection.List
local aC=aw.Name
local aD=aw.SubName
local aE=aw.Class
local aF=aw.ValueType
local aG=aF.Name
local aH=aw.AttributeName
local z=aw.RootType
local A=z and z.Name local B=
aw.Class.."."..aw.Name..(aw.SubName or"")
local C=Vector3

for D=1,#aB do
local E=aB[D]
local F=E.Obj

if w(F,aE)then
pcall(function()
local G=ax
local H
if aw.IsAttribute then
H=x(F,aH)
else
H=F[aC]
end

if aA then
if aA.ValueType.Name==aG then
G=x(F,aA.AttributeName)or G
end
y(F,aA.AttributeName,nil)
end

if A then
if A=="Vector2"then
G=Vector2.new((aD==".X"and G)or H.X,(aD==".Y"and G)or H.Y)
elseif A=="Vector3"then
G=C.new((aD==".X"and G)or H.X,(aD==".Y"and G)or H.Y,(aD==".Z"and G)or H.Z)
elseif A=="UDim"then
G=UDim.new((aD==".Scale"and G)or H.Scale,(aD==".Offset"and G)or H.Offset)
elseif A=="UDim2"then
local I,J=H.X,H.Y
local K=(aD==".X"and G)or UDim.new((aD==".X.Scale"and G)or I.Scale,(aD==".X.Offset"and G)or I.Offset)
local L=(aD==".Y"and G)or UDim.new((aD==".Y.Scale"and G)or J.Scale,(aD==".Y.Offset"and G)or J.Offset)
G=UDim2.new(K,L)
elseif A=="CFrame"then
local I,J,K,L=H.Position,H.RightVector,H.UpVector,H.LookVector
local M=(aD==".Position"and G)or C.new((aD==".Position.X"and G)or I.X,(aD==".Position.Y"and G)or I.Y,(aD==".Position.Z"and G)or I.Z)
local N=(aD==".RightVector"and G)or C.new((aD==".RightVector.X"and G)or J.X,(aD==".RightVector.Y"and G)or J.Y,(aD==".RightVector.Z"and G)or J.Z)
local O=(aD==".UpVector"and G)or C.new((aD==".UpVector.X"and G)or K.X,(aD==".UpVector.Y"and G)or K.Y,(aD==".UpVector.Z"and G)or K.Z)
local P=(aD==".LookVector"and G)or C.new((aD==".LookVector.X"and G)or L.X,(aD==".RightVector.Y"and G)or L.Y,(aD==".RightVector.Z"and G)or L.Z)
G=CFrame.fromMatrix(M,N,O,-P)
elseif A=="Rect"then
local I,J=H.Min,H.Max
local K=Vector2.new((aD==".Min.X"and G)or I.X,(aD==".Min.Y"and G)or I.Y)
local L=Vector2.new((aD==".Max.X"and G)or J.X,(aD==".Max.Y"and G)or J.Y)
G=Rect.new(K,L)
elseif A=="PhysicalProperties"then
local I=PhysicalProperties.new(F.Material)
local J=(aD==".Density"and G)or(H and H.Density)or I.Density
local K=(aD==".Friction"and G)or(H and H.Friction)or I.Friction
local L=(aD==".Elasticity"and G)or(H and H.Elasticity)or I.Elasticity
local M=(aD==".FrictionWeight"and G)or(H and H.FrictionWeight)or I.FrictionWeight
local N=(aD==".ElasticityWeight"and G)or(H and H.ElasticityWeight)or I.ElasticityWeight
G=PhysicalProperties.new(J,K,L,M,N)
elseif A=="Ray"then
local I,J=H.Origin,H.Direction
local K=(aD==".Origin"and G)or C.new((aD==".Origin.X"and G)or I.X,(aD==".Origin.Y"and G)or I.Y,(aD==".Origin.Z"and G)or I.Z)
local L=(aD==".Direction"and G)or C.new((aD==".Direction.X"and G)or J.X,(aD==".Direction.Y"and G)or J.Y,(aD==".Direction.Z"and G)or J.Z)
G=Ray.new(K,L)
elseif A=="Faces"then
local I={}
local J={"Back","Bottom","Front","Left","Right","Top"}
for K,L in pairs(J)do
local M
if aD=="."..L then
M=G
else
M=H[L]
end
if M then I[#I+1]=Enum.NormalId[L]end
end
G=Faces.new(unpack(I))
elseif A=="Axes"then
local I={}
local J={"X","Y","Z"}
for K,L in pairs(J)do
local M
if aD=="."..L then
M=G
else
M=H[L]
end
if M then I[#I+1]=Enum.Axis[L]end
end
G=Axes.new(unpack(I))
elseif A=="NumberRange"then
G=NumberRange.new(aD==".Min"and G or H.Min,aD==".Max"and G or H.Max)
end
end

if aG=="PhysicalProperties"and G then
G=H or PhysicalProperties.new(F.Material)
end

if aw.IsAttribute then
y(F,aH,G)
else
F[aC]=G
end
end)
end
end

if not az then
ap.ComputeConflicts(aw)
end
end

ap.InitInputBox=function()
n=an{
{1,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderSizePixel=0,Name="InputBox",Size=UDim2.new(0,200,0,22),Visible=false,ZIndex=2,}},
{2,"TextBox",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BackgroundTransparency=1,BorderColor3=Color3.new(0.062745101749897,0.51764708757401,1),BorderSizePixel=0,ClearTextOnFocus=false,Font=3,Parent={1},PlaceholderColor3=Color3.new(0.69803923368454,0.69803923368454,0.69803923368454),Position=UDim2.new(0,3,0,0),Size=UDim2.new(1,-6,1,0),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=0,ZIndex=2,}},
}
o=n.TextBox
n.BackgroundColor3=ad.Theme.TextBox
n.Parent=ap.Window.GuiElems.Content.List

o.FocusLost:Connect(function()
if not p then return end

local aw=p
p=nil
local ax=ap.StringToValue(aw,o.Text)
if ax then ap.SetProp(aw,ax)else ap.Refresh()end
end)

o.Focused:Connect(function()
o.SelectionStart=1
o.CursorPosition=#o.Text+1
end)

ab.ViewportTextBox.convert(o)
end

ap.SetInputProp=function(aw,ax,az)
local aA=aw.ValueType
local aB=aA.Name
local aC=aw.Class.."."..aw.Name..(aw.SubName or"")
local aD=m[aC]
local aE=ap.GetPropVal(aw,aD)

if aw.Tags.ReadOnly then return end

p=aw
if az then
if az=="color"then
if aB=="Color3"then
o.Text=aE and ap.ValueToString(aw,aE)or""
ap.DisplayColorEditor(aw,aE)
elseif aB=="BrickColor"then
ap.DisplayBrickColorEditor(aw,ax,aE)
elseif aB=="ColorSequence"then
o.Text=aE and ap.ValueToString(aw,aE)or""
ap.DisplayColorSequenceEditor(aw,aE)
end
elseif az=="right"then
if aB=="NumberSequence"then
o.Text=aE and ap.ValueToString(aw,aE)or""
ap.DisplayNumberSequenceEditor(aw,aE)
elseif aB=="ColorSequence"then
o.Text=aE and ap.ValueToString(aw,aE)or""
ap.DisplayColorSequenceEditor(aw,aE)
end
end
else
if ap.IsTextEditable(aw)then
o.Text=aE and ap.ValueToString(aw,aE)or""
o:CaptureFocus()
elseif aA.Category=="Enum"then
ap.DisplayEnumDropdown(ax)
elseif aB=="BrickColor"then
ap.DisplayBrickColorEditor(aw,ax,aE)
end
end
ap.Refresh()
end

ap.InitSearch=function()
local aw=al.TweenService
local ax=ap.GuiElems.ToolBar.SearchFrame
local az=ax.SearchBox

local aA=TweenInfo.new(0.2,Enum.EasingStyle.Quint)

local aB={
Start=aw:Create(ax.UIStroke,aA,{Color=Color3.fromRGB(0,120,215)}),
End=aw:Create(ax.UIStroke,aA,{Color=Color3.fromRGB(42,42,42)})
}

ab.ViewportTextBox.convert(az)

az.FocusLost:Connect(function()aB.End:Play()end)
az.Focused:Connect(function()aB.Start:Play()end)

az:GetPropertyChangedSignal"Text":Connect(function()
ap.SearchText=az.Text
ap.Update()
ap.Refresh()
end)
end

ap.InitEntryStuff=function()
ap.EntryTemplate=an{
{1,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderColor3=Color3.new(0.1294117718935,0.1294117718935,0.1294117718935),Font=3,Name="Entry",Position=UDim2.new(0,1,0,1),Size=UDim2.new(0,250,0,22),Text="",TextSize=14,}},
{2,"Frame",{BackgroundColor3=Color3.new(0.04313725605607,0.35294118523598,0.68627452850342),BackgroundTransparency=1,BorderColor3=Color3.new(0.33725491166115,0.49019610881805,0.73725491762161),BorderSizePixel=0,Name="NameFrame",Parent={1},Position=UDim2.new(0,20,0,0),Size=UDim2.new(1,-40,1,0),}},
{3,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="PropName",Parent={2},Position=UDim2.new(0,2,0,0),Size=UDim2.new(1,-2,1,0),Text="Anchored",TextColor3=Color3.new(1,1,1),TextSize=14,TextTransparency=0.10000000149012,TextTruncate=1,TextXAlignment=0,}},
{4,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,ClipsDescendants=true,Font=3,Name="Expand",Parent={2},Position=UDim2.new(0,-20,0,1),Size=UDim2.new(0,20,0,20),Text="",TextSize=14,Visible=false,}},
{5,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5642383285",ImageRectOffset=Vector2.new(144,16),ImageRectSize=Vector2.new(16,16),Name="Icon",Parent={4},Position=UDim2.new(0,2,0,2),ScaleType=4,Size=UDim2.new(0,16,0,16),}},
{6,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=4,Name="ToggleAttributes",Parent={2},Position=UDim2.new(1,-85,0,0),Size=UDim2.new(0,85,0,22),Text="[SETTING: OFF]",TextColor3=Color3.new(1,1,1),TextSize=14,TextTransparency=0.10000000149012,Visible=false,}},
{7,"Frame",{BackgroundColor3=Color3.new(0.04313725605607,0.35294118523598,0.68627452850342),BackgroundTransparency=1,BorderColor3=Color3.new(0.33725491166115,0.49019607901573,0.73725491762161),BorderSizePixel=0,Name="ValueFrame",Parent={1},Position=UDim2.new(1,-100,0,0),Size=UDim2.new(0,80,1,0),}},
{8,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderColor3=Color3.new(0.33725491166115,0.49019610881805,0.73725491762161),BorderSizePixel=0,Name="Line",Parent={7},Position=UDim2.new(0,-1,0,0),Size=UDim2.new(0,1,1,0),}},
{9,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="ColorButton",Parent={7},Size=UDim2.new(0,20,0,22),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,Visible=false,}},
{10,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderColor3=Color3.new(0,0,0),Name="ColorPreview",Parent={9},Position=UDim2.new(0,5,0,6),Size=UDim2.new(0,10,0,10),}},
{11,"UIGradient",{Parent={10},}},
{12,"Frame",{BackgroundTransparency=1,Name="EnumArrow",Parent={7},Position=UDim2.new(1,-16,0,3),Size=UDim2.new(0,16,0,16),Visible=false,}},
{13,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={12},Position=UDim2.new(0,8,0,9),Size=UDim2.new(0,1,0,1),}},
{14,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={12},Position=UDim2.new(0,7,0,8),Size=UDim2.new(0,3,0,1),}},
{15,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={12},Position=UDim2.new(0,6,0,7),Size=UDim2.new(0,5,0,1),}},
{16,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="ValueBox",Parent={7},Position=UDim2.new(0,4,0,0),Size=UDim2.new(1,-8,1,0),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,TextTransparency=0.10000000149012,TextTruncate=1,TextXAlignment=0,}},
{17,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="RightButton",Parent={7},Position=UDim2.new(1,-20,0,0),Size=UDim2.new(0,20,0,22),Text="...",TextColor3=Color3.new(1,1,1),TextSize=14,Visible=false,}},
{18,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="SettingsButton",Parent={7},Position=UDim2.new(1,-20,0,0),Size=UDim2.new(0,20,0,22),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,Visible=false,}},
{19,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="SoundPreview",Parent={7},Size=UDim2.new(1,0,1,0),Visible=false,}},
{20,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="ControlButton",Parent={19},Size=UDim2.new(0,20,0,22),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{21,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5642383285",ImageRectOffset=Vector2.new(144,16),ImageRectSize=Vector2.new(16,16),Name="Icon",Parent={20},Position=UDim2.new(0,2,0,3),ScaleType=4,Size=UDim2.new(0,16,0,16),}},
{22,"Frame",{BackgroundColor3=Color3.new(0.3137255012989,0.3137255012989,0.3137255012989),BorderSizePixel=0,Name="TimeLine",Parent={19},Position=UDim2.new(0,26,0.5,-1),Size=UDim2.new(1,-34,0,2),}},
{23,"Frame",{BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.1294117718935,0.1294117718935,0.1294117718935),Name="Slider",Parent={22},Position=UDim2.new(0,-4,0,-8),Size=UDim2.new(0,8,0,18),}},
{24,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="EditAttributeButton",Parent={1},Position=UDim2.new(1,-20,0,0),Size=UDim2.new(0,20,0,22),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{25,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5034718180",ImageTransparency=0.20000000298023,Name="Icon",Parent={24},Position=UDim2.new(0,2,0,3),Size=UDim2.new(0,16,0,16),}},
{26,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderSizePixel=0,Font=3,Name="RowButton",Parent={1},Size=UDim2.new(1,0,1,0),Text="Add Attribute",TextColor3=Color3.new(1,1,1),TextSize=14,TextTransparency=0.10000000149012,Visible=false,}},
}

local aw=ab.Frame.new()
local ax=ab.Label.new()
ax.Parent=aw.Gui
ax.Position=UDim2.new(0,2,0,0)
ax.Size=UDim2.new(1,-4,1,0)
aw.Visible=false
aw.Parent=aq.Gui

ap.FullNameFrame=aw
ap.FullNameFrameAttach=ab.AttachTo(aw)
end

ap.Init=function()
local aw=an{
{1,"Folder",{Name="Items",}},
{2,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="ToolBar",Parent={1},Size=UDim2.new(1,0,0,22),}},
{3,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.1176470592618,0.1176470592618,0.1176470592618),BorderSizePixel=0,Name="SearchFrame",Parent={2},Position=UDim2.new(0,3,0,1),Size=UDim2.new(1,-6,0,18),}},
{4,"TextBox",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,ClearTextOnFocus=false,Font=3,Name="SearchBox",Parent={3},PlaceholderColor3=Color3.new(0.39215689897537,0.39215689897537,0.39215689897537),PlaceholderText="Search properties",Position=UDim2.new(0,4,0,0),Size=UDim2.new(1,-24,0,18),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=0,}},
{5,"UICorner",{CornerRadius=UDim.new(0,2),Parent={3},}},
{6,"UIStroke",{Thickness=1.4,Parent={3},Color=Color3.fromRGB(42,42,42)}},
{7,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Reset",Parent={3},Position=UDim2.new(1,-17,0,1),Size=UDim2.new(0,16,0,16),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{8,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5034718129",ImageColor3=Color3.new(0.39215686917305,0.39215686917305,0.39215686917305),Parent={7},Size=UDim2.new(0,16,0,16),}},
{9,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Refresh",Parent={2},Position=UDim2.new(1,-20,0,1),Size=UDim2.new(0,18,0,18),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,Visible=false,}},
{10,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5642310344",Parent={9},Position=UDim2.new(0,3,0,3),Size=UDim2.new(0,12,0,12),}},
{11,"Frame",{BackgroundColor3=Color3.new(0.15686275064945,0.15686275064945,0.15686275064945),BorderSizePixel=0,Name="ScrollCorner",Parent={1},Position=UDim2.new(1,-16,1,-16),Size=UDim2.new(0,16,0,16),Visible=false,}},
{12,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,ClipsDescendants=true,Name="List",Parent={1},Position=UDim2.new(0,0,0,23),Size=UDim2.new(1,0,1,-23),}},
}


g=ai.CategoryOrder
for ax,az in next,g do
if not ap.CollapsedCategories[ax]then
j["CAT_"..ax]=true
end
end
j["Sound.SoundId"]=true


aq=ab.Window.new()
ap.Window=aq
aq:SetTitle"Properties"

ar=aw.ToolBar
as=aw.List

ap.GuiElems.ToolBar=ar
ap.GuiElems.PropsFrame=as

ap.InitEntryStuff()


aq.GuiElems.Main:GetPropertyChangedSignal"AbsoluteSize":Connect(function()
if ap.Window:IsContentVisible()then
ap.UpdateView()
ap.Refresh()
end
end)
aq.OnActivate:Connect(function()
ap.UpdateView()
ap.Update()
ap.Refresh()
end)
aq.OnRestore:Connect(function()
ap.UpdateView()
ap.Update()
ap.Refresh()
end)


at=ab.ScrollBar.new()
at.WheelIncrement=3
at.Gui.Position=UDim2.new(1,-16,0,23)
at:SetScrollFrame(as)
at.Scrolled:Connect(function()
ap.Index=at.Index
ap.Refresh()
end)

au=ab.ScrollBar.new(true)
au.Increment=5
au.WheelIncrement=20
au.Gui.Position=UDim2.new(0,0,1,-16)
au.Scrolled:Connect(function()
ap.Refresh()
end)


aq.GuiElems.Line.Position=UDim2.new(0,0,0,22)
ar.Parent=aq.GuiElems.Content
as.Parent=aq.GuiElems.Content
aw.ScrollCorner.Parent=aq.GuiElems.Content
at.Gui.Parent=aq.GuiElems.Content
au.Gui.Parent=aq.GuiElems.Content
ap.InitInputBox()
ap.InitSearch()
end

return ap
end

return{InitDeps=initDeps,InitAfterMain=initAfterMain,Main=main}
end,
ScriptViewer=function()







local aa,ab,ac,ad
local ae,af,ag,ah
local ai,aj,ak,al,am,an,ao

local function initDeps(ap)
aa=ap.Main
ab=ap.Lib
ac=ap.Apps
ad=ap.Settings

ai=ap.API
aj=ap.RMD
ak=ap.env
al=ap.service
am=ap.plr
an=ap.create
ao=ap.createSimple
end

local function initAfterMain()
ae=ac.Explorer
af=ac.Properties
ag=ac.ScriptViewer
ah=ac.Notebook
end

local function main()
local ap={}
local aq,ar
local as

ap.ViewScript=function(at)
local au,aw=pcall(ak.decompile,at)
if not au or not aw then aw,as=("-- DEX - %s failed to decompile %s"):format(ak.executor,at.ClassName),nil else as=at end
ar:SetText(aw:gsub("\0","\\0"))
aq:Show()
end

ap.Init=function()
aq=ab.Window.new()
aq:SetTitle"Script Viewer"
aq:Resize(500,400)
ap.Window=aq

ar=ab.CodeFrame.new()
ar.Frame.Position=UDim2.new(0,0,0,20)
ar.Frame.Size=UDim2.new(1,0,1,-20)
ar.Frame.Parent=aq.GuiElems.Content


local at=Instance.new("TextButton",aq.GuiElems.Content)
at.BackgroundTransparency=1
at.Size=UDim2.new(0.5,0,0,20)
at.Text="Copy to Clipboard"
at.TextColor3=Color3.new(1,1,1)

at.MouseButton1Click:Connect(function()
local au=ar:GetText()
ak.setclipboard(au)
end)

local au=Instance.new("TextButton",aq.GuiElems.Content)
au.BackgroundTransparency=1
au.Position=UDim2.new(0.35,0,0,0)
au.Size=UDim2.new(0.3,0,0,20)
au.Text="Save to File"
au.TextColor3=Color3.new(1,1,1)

au.MouseButton1Click:Connect(function()
local aw=ar:GetText()
local ax="Place_"..f.PlaceId.."_Script_"..os.time()..".txt"

ak.writefile(ax,aw)
if ak.movefileas then
ak.movefileas(ax,".txt")
end
end)

local aw=Instance.new("TextButton",aq.GuiElems.Content)
aw.BackgroundTransparency=1
aw.Position=UDim2.new(0.7,0,0,0)
aw.Size=UDim2.new(0.3,0,0,20)
aw.Text="Dump Functions"
aw.TextColor3=Color3.new(1,1,1)

aw.MouseButton1Click:Connect(function()
if as~=nil then
pcall(function()

local ax=getgc or get_gc_objects
local az=(debug and debug.getupvalues)or getupvalues or getupvals
local aA=(debug and debug.getconstants)or getconstants or getconsts
local aB=(debug and(debug.getinfo or debug.info))or getinfo
local aC=("\n-- // Function Dumper made by King.Kevin\n-- // Script Path: %s\n\n--[["):format(as:GetFullName())
local aD=aC
local aE,aF={},{}
function aE.add_to_dump(aG,aH,g,h)
local i=h or true
aD=aD..("%s%s%s"):format(string.rep("		",g),tostring(aH),i and"\n"or"")
end
function aE.get_function_name(aG,aH)
local g=aB(aH).name
return g~=""and g or"Unknown Name"
end
function aE.dump_table(aG,aH,g,h)
local i=g<0 and 0 or g
aE:add_to_dump(("%s [%s] %s"):format(tostring(h),tostring(typeof(aH)),tostring(aH)),i-1)
local j=0
for k,l in pairs(aH)do
j=j+1
if type(l)=="function"then
aE:add_to_dump(("%d [function] = %s"):format(j,aE:get_function_name(l)),i)
elseif type(l)=="table"then
if not aF[l]then
aF[l]=true
aE:add_to_dump(("%d [table]:"):format(j),i)
aE:dump_table(l,i+1,k)
else
aE:add_to_dump(("%d [table] (Recursive table detected)"):format(j),i)
end
else
aE:add_to_dump(("%d [%s] = %s"):format(j,tostring(typeof(l)),tostring(l)),i)
end
end
end
function aE.dump_function(aG,aH,g)
aE:add_to_dump(("\nFunction Dump: %s"):format(aE:get_function_name(aH)),g)
aE:add_to_dump(("\nFunction Upvalues: %s"):format(aE:get_function_name(aH)),g)
for h,i in pairs(az(aH))do
if type(i)=="function"then
aE:add_to_dump(("%d [function] = %s"):format(h,aE:get_function_name(i)),g+1)
elseif type(i)=="table"then
if not aF[i]then
aF[i]=true
aE:add_to_dump(("%d [table]:"):format(h),g+1)
aE:dump_table(i,g+2,h)
else
aE:add_to_dump(("%d [table] (Recursive table detected)"):format(h),g+1)
end
else
aE:add_to_dump(("%d [%s] = %s"):format(h,tostring(typeof(i)),tostring(i)),g+1)
end
end
aE:add_to_dump(("\nFunction Constants: %s"):format(aE:get_function_name(aH)),g)
for h,i in pairs(aA(aH))do
if type(i)=="function"then
aE:add_to_dump(("%d [function] = %s"):format(h,aE:get_function_name(i)),g+1)
elseif type(i)=="table"then
if not aF[i]then
aF[i]=true
aE:add_to_dump(("%d [table]:"):format(h),g+1)
aE:dump_table(i,g+2,h)
else
aE:add_to_dump(("%d [table] (Recursive table detected)"):format(h),g+1)
end
else
aE:add_to_dump(("%d [%s] = %s"):format(h,tostring(typeof(i)),tostring(i)),g+1)
end
end
end
for aG,aH in pairs(ax())do
if typeof(aH)=="function"and getfenv(aH).script and getfenv(aH).script==as then
aE:dump_function(aH,0)
aE:add_to_dump("\n"..("="):rep(100),0,false)
end
end
local aG=ar:GetText()

if aD~=aC then aG=aG..aD.."]]"end
ar:SetText(aG)
end)
end
end)
end

return ap
end

return{InitDeps=initDeps,InitAfterMain=initAfterMain,Main=main}
end,
Lib=function()







local aa,ab,ac,ad
local ae,af,ag,ah
local ai,aj,ak,al,am,an,ao

local function initDeps(ap)
aa=ap.Main
ab=ap.Lib
ac=ap.Apps
ad=ap.Settings

ai=ap.API
aj=ap.RMD
ak=ap.env
al=ap.service
am=ap.plr
an=ap.create
ao=ap.createSimple
end

local function initAfterMain()
ae=ac.Explorer
af=ac.Properties
ag=ac.ScriptViewer
ah=ac.Notebook
end

local function main()
local ap={}

local aq=al.RunService.RenderStepped
local ar=aq.wait
local as=newproxy()
local at=newproxy()


local function initObj(au,aw)
local ax=type
local function copy(az)
local aA={}
for aB,aC in pairs(az)do
if aC==at then
aA[aB]=ap.Signal.new()
elseif ax(aC)=="table"then
aA[aB]=copy(aC)
else
aA[aB]=aC
end
end
return aA
end

local az=copy(au)
return setmetatable(az,aw)
end

local function getGuiMT(au,aw)
return{__index=function(ax,az)if not au[az]then return aw[az]or ax.Gui[az]end end,
__newindex=function(ax,az,aA)if not au[az]then ax.Gui[az]=aA else rawset(ax,az,aA)end end}
end



ap.FormatLuaString=(function()
local au=string
local aw=au.gsub
local ax=au.format
local az=au.char
local aA={['"']='\\"',['\\']='\\\\'}
for aB=0,31 do
aA[az(aB)]="\\"..ax("%03d",aB)
end
for aB=127,255 do
aA[az(aB)]="\\"..ax("%03d",aB)
end

return function(aB)
return aw(aB,"[\"\\\0-\31\127-\255]",aA)
end
end)()

ap.CheckMouseInGui=function(au)
if au==nil then return false end
local aw=aa.Mouse
local ax=au.AbsolutePosition
local az=au.AbsoluteSize

return aw.X>=ax.X and aw.X<ax.X+az.X and aw.Y>=ax.Y and aw.Y<ax.Y+az.Y
end

ap.IsShiftDown=function()
return al.UserInputService:IsKeyDown(Enum.KeyCode.LeftShift)or al.UserInputService:IsKeyDown(Enum.KeyCode.RightShift)
end

ap.IsCtrlDown=function()
return al.UserInputService:IsKeyDown(Enum.KeyCode.LeftControl)or al.UserInputService:IsKeyDown(Enum.KeyCode.RightControl)
end

ap.CreateArrow=function(au,aw,ax)
local az=aw
local aA=ao("Frame",{
BackgroundTransparency=1,
Name="Arrow",
Size=UDim2.new(0,au,0,au)
})
if ax=="up"then
for aB=1,aw do
ao("Frame",{
BackgroundColor3=Color3.new(0.8627450980392157,0.8627450980392157,0.8627450980392157),
BorderSizePixel=0,
Position=UDim2.new(0,math.floor(au/2)-(aB-1),0,math.floor(au/2)+aB-math.floor(az/2)-1),
Size=UDim2.new(0,aB+(aB-1),0,1),
Parent=aA
})
end
return aA
elseif ax=="down"then
for aB=1,aw do
ao("Frame",{
BackgroundColor3=Color3.new(0.8627450980392157,0.8627450980392157,0.8627450980392157),
BorderSizePixel=0,
Position=UDim2.new(0,math.floor(au/2)-(aB-1),0,math.floor(au/2)-aB+math.floor(az/2)+1),
Size=UDim2.new(0,aB+(aB-1),0,1),
Parent=aA
})
end
return aA
elseif ax=="left"then
for aB=1,aw do
ao("Frame",{
BackgroundColor3=Color3.new(0.8627450980392157,0.8627450980392157,0.8627450980392157),
BorderSizePixel=0,
Position=UDim2.new(0,math.floor(au/2)+aB-math.floor(az/2)-1,0,math.floor(au/2)-(aB-1)),
Size=UDim2.new(0,1,0,aB+(aB-1)),
Parent=aA
})
end
return aA
elseif ax=="right"then
for aB=1,aw do
ao("Frame",{
BackgroundColor3=Color3.new(0.8627450980392157,0.8627450980392157,0.8627450980392157),
BorderSizePixel=0,
Position=UDim2.new(0,math.floor(au/2)-aB+math.floor(az/2)+1,0,math.floor(au/2)-(aB-1)),
Size=UDim2.new(0,1,0,aB+(aB-1)),
Parent=aA
})
end
return aA
end
error"r u ok"
end

ap.ParseXML=(function()
local au=function()
local


au,aw=string,pairs







au.byte('>',1)
local ax=au.byte('/',1)
au.byte('D',1)
local az=au.byte('E',1)

function parse(aA,aB)

aA=aA:gsub('<!%-%-(.-)%-%->','')

local aC,aD={}

if aB then
local aE=aA:find'<[_%w]'
if aE then
aA:sub(1,aE):gsub('<!ENTITY%s+([_%w]+)%s+(.)(.-)%2',function(aF,aG,aH)
aC[#aC+1]={name=aF,value=aH}
end)
aD=createEntityTable(aC)
aA=replaceEntities(aA:sub(aE),aD)
end
end

local aE,aF={},{}

local aG=function(aG)
aG=aG:match'^%s*(.*%S)'or''
if#aG~=0 then
aE[#aE+1]={text=aG}
end
end

aA:gsub('<([?!/]?)([-:_%w]+)%s*(/?>?)([^<]*)',function(aH,g,h,i)

if#aH==0 then
local j={}
if#h==0 then
local k=0
for l,m,n,o,p in au.gmatch(i,"(.-([-_%w]+)%s*=%s*(.)(.-)%3%s*(/?>?))")do
k=k+#l
j[m]=o
if#p~=0 then
i=i:sub(k+1)
h=p
break
end
end
end
aE[#aE+1]={tag=g,attrs=j,children={}}

if h:byte(1)~=ax then
aF[#aF+1]=aE
aE=aE[#aE].children
end

aG(i)

elseif'/'==aH then
aE=aF[#aF]
aF[#aF]=nil

aG(i)

elseif'!'==aH then
if az==g:byte(1)then
i:gsub('([_%w]+)%s+(.)(.-)%2',function(j,k,l)
aC[#aC+1]={name=j,value=l}
end,1)
end






end
end)

return{children=aE,entities=aC,tentities=aD}
end

function parseText(aA)
return parse(aA)
end

function defaultEntityTable()
return{quot='"',apos='\'',lt='<',gt='>',amp='&',tab='\t',nbsp=' ',}
end

function replaceEntities(aA,aB)
return aA:gsub('&([^;]+);',aB)
end

function createEntityTable(aA,aB)
entities=aB or defaultEntityTable()
for aC,aD in aw(aA)do
aD.value=replaceEntities(aD.value,entities)
entities[aD.name]=aD.value
end
return entities
end

return parseText
end
local aw=setmetatable({},{__index=getfenv()})
setfenv(au,aw)
return au()
end)()

ap.FastWait=function(au)
if not au then return ar(aq)end
local aw=tick()
while tick()-aw<au do ar(aq)end
end

ap.ButtonAnim=function(au,aw)
local ax=false
local az=false
local aA=aw and aw.Mode or 1
local aB={}

if aA==2 then
local aC=aw.LerpTo or Color3.new(0,0,0)
local aD=aw.LerpDelta or 0.2
aB.StartColor=aw.StartColor or au.BackgroundColor3
aB.PressColor=aw.PressColor or aB.StartColor:lerp(aC,aD)
aB.HoverColor=aw.HoverColor or aB.StartColor:lerp(aB.PressColor,0.6)
aB.OutlineColor=aw.OutlineColor
end

au.InputBegan:Connect(function(aC)
if az then return end

if aC.UserInputType==Enum.UserInputType.MouseMovement or aC.UserInputType==Enum.UserInputType.Touch then
if not ax then
if aA==1 then
au.BackgroundTransparency=0.4
elseif aA==2 then
au.BackgroundColor3=aB.HoverColor
end
end
elseif aC.UserInputType==Enum.UserInputType.MouseButton1 or aC.UserInputType==Enum.UserInputType.Touch then
ax=true
if aA==1 then
au.BackgroundTransparency=0
elseif aA==2 then
au.BackgroundColor3=aB.PressColor
if aB.OutlineColor then au.BorderColor3=aB.PressColor end
end
end
end)

au.InputEnded:Connect(function(aC)
if az then return end

if aC.UserInputType==Enum.UserInputType.MouseMovement or aC.UserInputType==Enum.UserInputType.Touch then
if not ax then
if aA==1 then
au.BackgroundTransparency=1
elseif aA==2 then
au.BackgroundColor3=aB.StartColor
end
end
elseif aC.UserInputType==Enum.UserInputType.MouseButton1 or aC.UserInputType==Enum.UserInputType.Touch then
ax=false
if aA==1 then
au.BackgroundTransparency=ap.CheckMouseInGui(au)and 0.4 or 1
elseif aA==2 then
au.BackgroundColor3=ap.CheckMouseInGui(au)and aB.HoverColor or aB.StartColor
if aB.OutlineColor then au.BorderColor3=aB.OutlineColor end
end
end
end)

aB.Disable=function()
az=true
ax=false

if aA==1 then
au.BackgroundTransparency=1
elseif aA==2 then
au.BackgroundColor3=aB.StartColor
end
end

aB.Enable=function()
az=false
end

return aB
end

ap.FindAndRemove=function(au,aw)
local ax=table.find(au,aw)
if ax then table.remove(au,ax)end
end

ap.AttachTo=function(au,aw)
local ax,az,aA,aB,aC,aD,aE
local aF=false

local function update()
if not au or not ax then return end

local aG=ax.AbsolutePosition
local aH=ax.AbsoluteSize
au.Position=UDim2.new(0,aG.X+az,0,aG.Y+aA)
if aD then au.Size=UDim2.new(0,aH.X+aB,0,aH.Y+aC)end
end

local function setup(aG,aH)
au=aG
aH=aH or{}
ax=aH.Target
az=aH.PosOffX or 0
aA=aH.PosOffY or 0
aB=aH.SizeOffX or 0
aC=aH.SizeOffY or 0
aD=aH.Resize or false

if aE then aE:Disconnect()aE=nil end
if ax then
aE=ax.Changed:Connect(function(g)
if not aF and g=="AbsolutePosition"or g=="AbsoluteSize"then
update()
end
end)
end

update()
end
setup(au,aw)

return{
SetData=function(aG,aH)
setup(aG,aH)
end,
Enable=function()
aF=false
update()
end,
Disable=function()
aF=true
end,
Destroy=function()
aE:Disconnect()
aE=nil
end,
}
end

ap.ProtectedGuis={}

ap.ShowGui=function(au)
if ak.gethui then
au.Parent=ak.gethui()
elseif ak.protectgui then
ak.protectgui(au)
au.Parent=aa.GuiHolder
else
au.Parent=aa.GuiHolder
end
end

ap.ColorToBytes=function(au)
local aw=math.round
return string.format("%d, %d, %d",aw(au.r*255),aw(au.g*255),aw(au.b*255))
end

ap.ReadFile=function(au)
if not ak.readfile then return end

local aw,ax=pcall(ak.readfile,au)
if aw and ax then return ax end
end

ap.DeferFunc=function(au,...)
ar(aq)
return au(...)
end

ap.LoadCustomAsset=function(au)
if not ak.getcustomasset or not ak.isfile or not ak.isfile(au)then return end

return ak.getcustomasset(au)
end

ap.FetchCustomAsset=function(au,aw)
if not ak.writefile then return end

local ax,az=pcall(e.HttpGet,f,au)
if not ax then return end

ak.writefile(aw,az)
return ap.LoadCustomAsset(aw)
end



ap.Signal=(function()
local au={}

local aw=function(aw)
local ax=table.find(aw.Signal.Connections,aw)
if ax then table.remove(aw.Signal.Connections,ax)end
end

au.Connect=function(ax,az)
if type(az)~="function"then error"Attempt to connect a non-function"end
local aA={
Signal=ax,
Func=az,
Disconnect=aw
}
ax.Connections[#ax.Connections+1]=aA
return aA
end

au.Fire=function(ax,...)
for az,aA in next,ax.Connections do
xpcall(coroutine.wrap(aA.Func),function(aB)warn(aB.."\n"..debug.traceback())end,...)
end
end

local ax={
__index=au,
__tostring=function(ax)
return"Signal: "..tostring(#ax.Connections).." Connections"
end
}

local function new()
local az={}
az.Connections={}

return setmetatable(az,ax)
end

return{new=new}
end)()

ap.Set=(function()
local au={}

au.Add=function(aw,ax)
if aw.Map[ax]then return end

local az=aw.List
az[#az+1]=ax
aw.Map[ax]=true
aw.Changed:Fire()
end

au.AddTable=function(aw,ax)
local az
local aA,aB=aw.List,aw.Map
for aC=1,#ax do
local aD=ax[aC]
if not aB[aD]then
aA[#aA+1]=aD
aB[aD]=true
az=true
end
end
if az then aw.Changed:Fire()end
end

au.Remove=function(aw,ax)
if not aw.Map[ax]then return end

local az=aw.List
local aA=table.find(az,ax)
if aA then table.remove(az,aA)end
aw.Map[ax]=nil
aw.Changed:Fire()
end

au.RemoveTable=function(aw,ax)
local az
local aA,aB=aw.List,aw.Map
local aC={}
for aD=1,#ax do
local aE=ax[aD]
aB[aE]=nil
aC[aE]=true
end

for aD=#aA,1,-1 do
local aE=aA[aD]
if aC[aE]then
table.remove(aA,aD)
az=true
end
end
if az then aw.Changed:Fire()end
end

au.Set=function(aw,ax)
if#aw.List==1 and aw.List[1]==ax then return end

aw.List={ax}
aw.Map={[ax]=true}
aw.Changed:Fire()
end

au.SetTable=function(aw,ax)
local az,aA={},{}
aw.List,aw.Map=az,aA
table.move(ax,1,#ax,1,az)
for aB=1,#ax do
aA[ax[aB] ]=true
end
aw.Changed:Fire()
end

au.Clear=function(aw)
if#aw.List==0 then return end
aw.List={}
aw.Map={}
aw.Changed:Fire()
end

local aw={__index=au}

local function new()
local ax=setmetatable({
List={},
Map={},
Changed=ap.Signal.new()
},aw)

return ax
end

return{new=new}
end)()

ap.IconMap=(function()
local au={}
local aw,ax=(483448923),{
Accessory=32;
Accoutrement=32;
AdService=73;
Animation=60;
AnimationController=60;
AnimationTrack=60;
Animator=60;
ArcHandles=56;
AssetService=72;
Attachment=34;
Backpack=20;
BadgeService=75;
BallSocketConstraint=89;
BillboardGui=64;
BinaryStringValue=4;
BindableEvent=67;
BindableFunction=66;
BlockMesh=8;
BloomEffect=90;
BlurEffect=90;
BodyAngularVelocity=14;
BodyForce=14;
BodyGyro=14;
BodyPosition=14;
BodyThrust=14;
BodyVelocity=14;
BoolValue=4;
BoxHandleAdornment=54;
BrickColorValue=4;
Camera=5;
CFrameValue=4;
CharacterMesh=60;
Chat=33;
ClickDetector=41;
CollectionService=30;
Color3Value=4;
ColorCorrectionEffect=90;
ConeHandleAdornment=54;
Configuration=58;
ContentProvider=72;
ContextActionService=41;
CoreGui=46;
CoreScript=18;
CornerWedgePart=1;
CustomEvent=4;
CustomEventReceiver=4;
CylinderHandleAdornment=54;
CylinderMesh=8;
CylindricalConstraint=89;
Debris=30;
Decal=7;
Dialog=62;
DialogChoice=63;
DoubleConstrainedValue=4;
Explosion=36;
FileMesh=8;
Fire=61;
Flag=38;
FlagStand=39;
FloorWire=4;
Folder=70;
ForceField=37;
Frame=48;
GamePassService=19;
Glue=34;
GuiButton=52;
GuiMain=47;
GuiService=47;
Handles=53;
HapticService=84;
Hat=45;
HingeConstraint=89;
Hint=33;
HopperBin=22;
HttpService=76;
Humanoid=9;
ImageButton=52;
ImageLabel=49;
InsertService=72;
IntConstrainedValue=4;
IntValue=4;
JointInstance=34;
JointsService=34;
Keyframe=60;
KeyframeSequence=60;
KeyframeSequenceProvider=60;
Lighting=13;
LineHandleAdornment=54;
LocalScript=18;
LogService=87;
MarketplaceService=46;
Message=33;
Model=2;
ModuleScript=71;
Motor=34;
Motor6D=34;
MoveToConstraint=89;
NegateOperation=78;
NetworkClient=16;
NetworkReplicator=29;
NetworkServer=15;
NumberValue=4;
ObjectValue=4;
Pants=44;
ParallelRampPart=1;
Part=1;
ParticleEmitter=69;
PartPairLasso=57;
PathfindingService=37;
Platform=35;
Player=12;
PlayerGui=46;
Players=21;
PlayerScripts=82;
PointLight=13;
PointsService=83;
Pose=60;
PrismaticConstraint=89;
PrismPart=1;
PyramidPart=1;
RayValue=4;
ReflectionMetadata=86;
ReflectionMetadataCallbacks=86;
ReflectionMetadataClass=86;
ReflectionMetadataClasses=86;
ReflectionMetadataEnum=86;
ReflectionMetadataEnumItem=86;
ReflectionMetadataEnums=86;
ReflectionMetadataEvents=86;
ReflectionMetadataFunctions=86;
ReflectionMetadataMember=86;
ReflectionMetadataProperties=86;
ReflectionMetadataYieldFunctions=86;
RemoteEvent=80;
RemoteFunction=79;
ReplicatedFirst=72;
ReplicatedStorage=72;
RightAngleRampPart=1;
RocketPropulsion=14;
RodConstraint=89;
RopeConstraint=89;
Rotate=34;
RotateP=34;
RotateV=34;
RunService=66;
ScreenGui=47;
Script=6;
ScrollingFrame=48;
Seat=35;
Selection=55;
SelectionBox=54;
SelectionPartLasso=57;
SelectionPointLasso=57;
SelectionSphere=54;
ServerScriptService=0;
ServerStorage=74;
Shirt=43;
ShirtGraphic=40;
SkateboardPlatform=35;
Sky=28;
SlidingBallConstraint=89;
Smoke=59;
Snap=34;
Sound=11;
SoundService=31;
Sparkles=42;
SpawnLocation=25;
SpecialMesh=8;
SphereHandleAdornment=54;
SpotLight=13;
SpringConstraint=89;
StarterCharacterScripts=82;
StarterGear=20;
StarterGui=46;
StarterPack=20;
StarterPlayer=88;
StarterPlayerScripts=82;
Status=2;
StringValue=4;
SunRaysEffect=90;
SurfaceGui=64;
SurfaceLight=13;
SurfaceSelection=55;
Team=24;
Teams=23;
TeleportService=81;
Terrain=65;
TerrainRegion=65;
TestService=68;
TextBox=51;
TextButton=51;
TextLabel=50;
Texture=10;
TextureTrail=4;
Tool=17;
TouchTransmitter=37;
TrussPart=1;
UnionOperation=77;
UserInputService=84;
Vector3Value=4;
VehicleSeat=35;
VelocityMotor=34;
WedgePart=1;
Weld=34;
Workspace=19;

}
au.ExplorerIcons={MapId=aw,Icons=ax}

au.GetLabel=function(az)
local aA=Instance.new"ImageLabel"
az:SetupLabel(aA)
return aA
end

au.SetupLabel=function(az,aA)
aA.BackgroundTransparency=1
aA.ImageRectOffset=Vector2.new(0,0)
aA.ImageRectSize=Vector2.new(az.IconSizeX,az.IconSizeY)
aA.ScaleType=Enum.ScaleType.Crop
aA.Size=UDim2.new(0,az.IconSizeX,0,az.IconSizeY)
end

au.Display=function(az,aA,aB)
aA.Image=az.MapId
if not az.NumX then
aA.ImageRectOffset=Vector2.new(az.IconSizeX*aB,0)
else
aA.ImageRectOffset=Vector2.new(az.IconSizeX*(aB%az.NumX),az.IconSizeY*math.floor(aB/az.NumX))
end
end

au.DisplayByKey=function(az,aA,aB)
if az.IndexDict[aB]then
az:Display(aA,az.IndexDict[aB])
else
local aC=aj.Classes[aA.ClassName]
ae.ClassIcons:Display(aA,aC and aC.ExplorerImageIndex or 0)
end
end

au.IconDehash=function(az,aA)
return math.floor(aA/14%14),math.floor(aA%14)
end

au.GetExplorerIcon=function(az,aA,aB)
aB=(az.ExplorerIcons.Icons[aB]or 0)
local aC,aD=az:IconDehash(aB)
local aE=Vector2.new(256,256)
local aF,aG=2,1
local aH=16

aA.Position=UDim2.new(-aD-(aF*(aD+1)+aG)/aH,0,-aC-(aF*(aC+1)+aG)/aH,0)
aA.Size=UDim2.new(aE.X/aH,0,aE.Y/aH,0)
end

au.DisplayExplorerIcons=function(az,aA,aB)
if aA:FindFirstChild"IconMap"then
az:GetExplorerIcon(aA.IconMap,aB)
else
aA.ClipsDescendants=true

local aC=Instance.new("ImageLabel",aA)
aC.BackgroundTransparency=1
aC.Image=("http://www.roblox.com/asset/?id="..(az.ExplorerIcons.MapId))
aC.Name="IconMap"
az:GetExplorerIcon(aC,aB)
end
end

au.SetDict=function(az,aA)
az.IndexDict=aA
end

local az={}
az.__index=au

local function new(aA,aB,aC,aD,aE)
local aF=setmetatable({
MapId=aA,
MapSizeX=aB,
MapSizeY=aC,
IconSizeX=aD,
IconSizeY=aE,
NumX=aB/aD,
IndexDict={}
},az)
return aF
end

local function newLinear(aA,aB,aC)
local aD=setmetatable({
MapId=aA,
IconSizeX=aB,
IconSizeY=aC,
IndexDict={}
},az)
return aD
end

return{new=new,newLinear=newLinear}
end)()

ap.ScrollBar=(function()
local au={}
local aw=al.UserInputService
local ax=am:GetMouse()
local az=ap.CheckMouseInGui
local aA=ap.CreateArrow

local function drawThumb(aB)
local aC=aB.TotalSpace
local aD=aB.VisibleSpace local aE=
aB.Index
local aF=aB.GuiElems.ScrollThumb
local aG=aB.GuiElems.ScrollThumbFrame

if not(aB:CanScrollUp()or aB:CanScrollDown())then
aF.Visible=false
else
aF.Visible=true
end

if aB.Horizontal then
aF.Size=UDim2.new(aD/aC,0,1,0)
if aF.AbsoluteSize.X<16 then
aF.Size=UDim2.new(0,16,1,0)
end
local aH=aG.AbsoluteSize.X
local g=aF.AbsoluteSize.X
aF.Position=UDim2.new(aB:GetScrollPercent()*(aH-g)/aH,0,0,0)
else
aF.Size=UDim2.new(1,0,aD/aC,0)
if aF.AbsoluteSize.Y<16 then
aF.Size=UDim2.new(1,0,0,16)
end
local aH=aG.AbsoluteSize.Y
local g=aF.AbsoluteSize.Y
aF.Position=UDim2.new(0,0,aB:GetScrollPercent()*(aH-g)/aH,0)
end
end

local function createFrame(aB)
local aC=ao("Frame",{Style=0,Active=true,AnchorPoint=Vector2.new(0,0),BackgroundColor3=Color3.new(0.35294118523598,0.35294118523598,0.35294118523598),BackgroundTransparency=0,BorderColor3=Color3.new(0.10588236153126,0.16470588743687,0.20784315466881),BorderSizePixel=0,ClipsDescendants=false,Draggable=false,Position=UDim2.new(1,-16,0,0),Rotation=0,Selectable=false,Size=UDim2.new(0,16,1,0),SizeConstraint=0,Visible=true,ZIndex=1,Name="ScrollBar",})
local aD,aE

if aB.Horizontal then
aC.Size=UDim2.new(1,0,0,16)
aD=ao("ImageButton",{
Parent=aC,
Name="Left",
Size=UDim2.new(0,16,0,16),
BackgroundTransparency=1,
BorderSizePixel=0,
AutoButtonColor=false
})
aA(16,4,"left").Parent=aD
aE=ao("ImageButton",{
Parent=aC,
Name="Right",
Position=UDim2.new(1,-16,0,0),
Size=UDim2.new(0,16,0,16),
BackgroundTransparency=1,
BorderSizePixel=0,
AutoButtonColor=false
})
aA(16,4,"right").Parent=aE
else
aC.Size=UDim2.new(0,16,1,0)
aD=ao("ImageButton",{
Parent=aC,
Name="Up",
Size=UDim2.new(0,16,0,16),
BackgroundTransparency=1,
BorderSizePixel=0,
AutoButtonColor=false
})
aA(16,4,"up").Parent=aD
aE=ao("ImageButton",{
Parent=aC,
Name="Down",
Position=UDim2.new(0,0,1,-16),
Size=UDim2.new(0,16,0,16),
BackgroundTransparency=1,
BorderSizePixel=0,
AutoButtonColor=false
})
aA(16,4,"down").Parent=aE
end

local aF=ao("ImageButton",{
BackgroundTransparency=1,
Parent=aC
})
if aB.Horizontal then
aF.Position=UDim2.new(0,16,0,0)
aF.Size=UDim2.new(1,-32,1,0)
else
aF.Position=UDim2.new(0,0,0,16)
aF.Size=UDim2.new(1,0,1,-32)
end

local aG=ao("Frame",{
BackgroundColor3=Color3.new(0.47058823529411764,0.47058823529411764,0.47058823529411764),
BorderSizePixel=0,
Parent=aF
})

local aH=ao("Frame",{
BackgroundTransparency=1,
Name="Markers",
Size=UDim2.new(1,0,1,0),
Parent=aF
})

local g=false
local h=false
local i=false

local function handleButtonPress(j,k)
if aB:CanScroll(k)then
j.BackgroundTransparency=0.5
aB:ScrollToDirection(k)
aB.Scrolled:Fire()
local l=tick()
local m
m=aw.InputEnded:Connect(function(n)
if n.UserInputType==Enum.UserInputType.MouseButton1 or n.UserInputType==Enum.UserInputType.Touch then
m:Disconnect()
j.BackgroundTransparency=az(j)and 0.8 or 1
g=false
end
end)
while g do
if tick()-l>=0.25 and aB:CanScroll(k)then
aB:ScrollToDirection(k)
aB.Scrolled:Fire()
end
task.wait()
end
end
end

aD.MouseButton1Down:Connect(function(j)
g=true
handleButtonPress(aD,"Up")
end)

aD.InputEnded:Connect(function(j)
if j.UserInputType==Enum.UserInputType.MouseButton1 or j.UserInputType==Enum.UserInputType.Touch then
aD.BackgroundTransparency=1
end
end)

aE.MouseButton1Down:Connect(function(j)
g=true
handleButtonPress(aE,"Down")
end)

aE.InputEnded:Connect(function(j)
if j.UserInputType==Enum.UserInputType.MouseButton1 or j.UserInputType==Enum.UserInputType.Touch then
aE.BackgroundTransparency=1
end
end)

aG.InputBegan:Connect(function(j)
if(j.UserInputType==Enum.UserInputType.MouseButton1 or j.UserInputType==Enum.UserInputType.Touch)then
local k=aB.Horizontal and"X"or"Y"
local l
h=true
aG.BackgroundTransparency=0
local m=ax[k]-aG.AbsolutePosition[k]
local n
local o

n=aw.InputEnded:Connect(function(p)
if p.UserInputType==Enum.UserInputType.MouseButton1 or p.UserInputType==Enum.UserInputType.Touch then
n:Disconnect()
if o then o:Disconnect()end
aG.BackgroundTransparency=0.2
h=false
end
end)

o=aw.InputChanged:Connect(function(p)
if(p.UserInputType==Enum.UserInputType.MouseMovement or p.UserInputType==Enum.UserInputType.Touch)and h then
local q=aF.AbsoluteSize[k]-aG.AbsoluteSize[k]
local r=ax[k]-aF.AbsolutePosition[k]-m
if r>q then r=q
elseif r<0 then r=0 end
if l~=r then
l=r
aB:ScrollTo(math.floor(0.5+r/q*(aB.TotalSpace-aB.VisibleSpace)))
end
end
end)
end
end)

aG.InputEnded:Connect(function(j)
if j.UserInputType==Enum.UserInputType.MouseMovement or j.UserInputType==Enum.UserInputType.Touch then
aG.BackgroundTransparency=0
end
end)

aF.InputBegan:Connect(function(j)
if(j.UserInputType==Enum.UserInputType.MouseButton1 or j.UserInputType==Enum.UserInputType.Touch)and not az(aG)then
local k=aB.Horizontal and"X"or"Y"
local l=(ax[k]>=aG.AbsolutePosition[k]+aG.AbsoluteSize[k])and 1 or 0
local function doTick()
local m=aB.VisibleSpace-1
if l==0 and ax[k]<aG.AbsolutePosition[k]then
aB:ScrollTo(aB.Index-m)
elseif l==1 and ax[k]>=aG.AbsolutePosition[k]+aG.AbsoluteSize[k]then
aB:ScrollTo(aB.Index+m)
end
end

h=false
i=true
doTick()
local m=tick()
local n
n=aw.InputEnded:Connect(function(o)
if o.UserInputType==Enum.UserInputType.MouseButton1 or o.UserInputType==Enum.UserInputType.Touch then
n:Disconnect()
i=false
end
end)

while i do
if tick()-m>=0.3 and az(aF)then
doTick()
end
task.wait()
end
end
end)

aC.MouseWheelForward:Connect(function()
aB:ScrollTo(aB.Index-aB.WheelIncrement)
end)

aC.MouseWheelBackward:Connect(function()
aB:ScrollTo(aB.Index+aB.WheelIncrement)
end)

aB.GuiElems.ScrollThumb=aG
aB.GuiElems.ScrollThumbFrame=aF
aB.GuiElems.Button1=aD
aB.GuiElems.Button2=aE
aB.GuiElems.MarkerFrame=aH

return aC
end

au.Update=function(aB,aC)
local aD=aB.TotalSpace
local aE=aB.VisibleSpace local aF=
aB.Index
local aG=aB.GuiElems.Button1
local aH=aB.GuiElems.Button2

aB.Index=math.clamp(aB.Index,0,math.max(0,aD-aE))

if aB.LastTotalSpace~=aB.TotalSpace then
aB.LastTotalSpace=aB.TotalSpace
aB:UpdateMarkers()
end

if aB:CanScrollUp()then
for g,h in pairs(aG.Arrow:GetChildren())do
h.BackgroundTransparency=0
end
else
aG.BackgroundTransparency=1
for g,h in pairs(aG.Arrow:GetChildren())do
h.BackgroundTransparency=0.5
end
end
if aB:CanScrollDown()then
for g,h in pairs(aH.Arrow:GetChildren())do
h.BackgroundTransparency=0
end
else
aH.BackgroundTransparency=1
for g,h in pairs(aH.Arrow:GetChildren())do
h.BackgroundTransparency=0.5
end
end

drawThumb(aB)
end

au.UpdateMarkers=function(aB)
local aC=aB.GuiElems.MarkerFrame
aC:ClearAllChildren()

for aD,aE in pairs(aB.Markers)do
if aD<aB.TotalSpace then
ao("Frame",{
BackgroundTransparency=0,
BackgroundColor3=aE,
BorderSizePixel=0,
Position=aB.Horizontal and UDim2.new(aD/aB.TotalSpace,0,1,-6)or UDim2.new(1,-6,aD/aB.TotalSpace,0),
Size=aB.Horizontal and UDim2.new(0,1,0,6)or UDim2.new(0,6,0,1),
Name="Marker"..tostring(aD),
Parent=aC
})
end
end
end

au.AddMarker=function(aB,aC,aD)
aB.Markers[aC]=aD or Color3.new(0,0,0)
end
au.ScrollTo=function(aB,aC,aD)
aB.Index=aC
aB:Update()
if not aD then
aB.Scrolled:Fire()
end
end
au.ScrollUp=function(aB)
aB.Index=aB.Index-aB.Increment
aB:Update()
end
au.CanScroll=function(aB,aC)
if aC=="Up"then
return aB:CanScrollUp()
elseif aC=="Down"then
return aB:CanScrollDown()
end
return false
end
au.ScrollDown=function(aB)
aB.Index=aB.Index+aB.Increment
aB:Update()
end
au.CanScrollUp=function(aB)
return aB.Index>0
end
au.CanScrollDown=function(aB)
return aB.Index+aB.VisibleSpace<aB.TotalSpace
end
au.GetScrollPercent=function(aB)
return aB.Index/(aB.TotalSpace-aB.VisibleSpace)
end
au.SetScrollPercent=function(aB,aC)
aB.Index=math.floor(aC*(aB.TotalSpace-aB.VisibleSpace))
aB:Update()
end
au.ScrollToDirection=function(aB,aC)
if aC=="Up"then
aB:ScrollUp()
elseif aC=="Down"then
aB:ScrollDown()
end
end

au.Texture=function(aB,aC)
aB.ThumbColor=aC.ThumbColor or Color3.new(0,0,0)
aB.ThumbSelectColor=aC.ThumbSelectColor or Color3.new(0,0,0)
aB.GuiElems.ScrollThumb.BackgroundColor3=aC.ThumbColor or Color3.new(0,0,0)
aB.Gui.BackgroundColor3=aC.FrameColor or Color3.new(0,0,0)
aB.GuiElems.Button1.BackgroundColor3=aC.ButtonColor or Color3.new(0,0,0)
aB.GuiElems.Button2.BackgroundColor3=aC.ButtonColor or Color3.new(0,0,0)
for aD,aE in pairs(aB.GuiElems.Button1.Arrow:GetChildren())do
aE.BackgroundColor3=aC.ArrowColor or Color3.new(0,0,0)
end
for aD,aE in pairs(aB.GuiElems.Button2.Arrow:GetChildren())do
aE.BackgroundColor3=aC.ArrowColor or Color3.new(0,0,0)
end
end

au.SetScrollFrame=function(aB,aC)
if aB.ScrollUpEvent then aB.ScrollUpEvent:Disconnect()aB.ScrollUpEvent=nil end
if aB.ScrollDownEvent then aB.ScrollDownEvent:Disconnect()aB.ScrollDownEvent=nil end
aB.ScrollUpEvent=aC.MouseWheelForward:Connect(function()aB:ScrollTo(aB.Index-aB.WheelIncrement)end)
aB.ScrollDownEvent=aC.MouseWheelBackward:Connect(function()aB:ScrollTo(aB.Index+aB.WheelIncrement)end)
end

local aB={}
aB.__index=au

local function new(aC)
local aD=setmetatable({
Index=0,
VisibleSpace=0,
TotalSpace=0,
Increment=1,
WheelIncrement=1,
Markers={},
GuiElems={},
Horizontal=aC,
LastTotalSpace=0,
Scrolled=ap.Signal.new()
},aB)
aD.Gui=createFrame(aD)
aD:Texture{
ThumbColor=Color3.fromRGB(60,60,60),
ThumbSelectColor=Color3.fromRGB(75,75,75),
ArrowColor=Color3.new(1,1,1),
FrameColor=Color3.fromRGB(40,40,40),
ButtonColor=Color3.fromRGB(75,75,75)
}
return aD
end

return{new=new}
end)()

ap.Window=(function()
local au={}
local aw={MinWidth=200,FreeWidth=200}
am:GetMouse()
local ax,az
local aA={}
local aB={Width=300,Windows={},ResizeCons={},Hidden=true}
local aC={Width=300,Windows={},ResizeCons={},Hidden=true}

local aD
local aE
local aF=TweenInfo.new(0.3,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)
local aG={}
local aH=f.IsA

local g={
MainColor1=Color3.fromRGB(52,52,52),
MainColor2=Color3.fromRGB(45,45,45),
Button=Color3.fromRGB(60,60,60)
}

local function stopTweens()
for h=1,#aG do
aG[h]:Cancel()
end
aG={}
end

local function resizeHook(h,i,j)
local k=h.GuiElems.Main
i.InputBegan:Connect(function(l)
if not h.Dragging and not h.Resizing and h.Resizable and h.ResizableInternal then
local m=j:find"[WE]"and true
local n=j:find"[NS]"and true
local o=j:find("W",1,true)and-1 or 1
local p=j:find("N",1,true)and-1 or 1

if h.Minimized and n then return end

if l.UserInputType==Enum.UserInputType.MouseMovement or l.UserInputType==Enum.UserInputType.Touch then
i.BackgroundTransparency=0.5
elseif l.UserInputType==Enum.UserInputType.MouseButton1 or l.UserInputType==Enum.UserInputType.Touch then
local q,r

local s=l.Position.X-i.AbsolutePosition.X
local t=l.Position.Y-i.AbsolutePosition.Y

h.Resizing=i
i.BackgroundTransparency=1

q=al.UserInputService.InputEnded:Connect(function(u)
if u.UserInputType==Enum.UserInputType.MouseButton1 or u.UserInputType==Enum.UserInputType.Touch then
q:Disconnect()
if r then r:Disconnect()end
h.Resizing=false
i.BackgroundTransparency=1
end
end)

r=al.UserInputService.InputChanged:Connect(function(u)
if h.Resizable and h.ResizableInternal and(u.UserInputType==Enum.UserInputType.MouseMovement or u.UserInputType==Enum.UserInputType.Touch)then
h:StopTweens()
local v=u.Position.X-i.AbsolutePosition.X-s
local w=u.Position.Y-i.AbsolutePosition.Y-t

if k.AbsoluteSize.X+v*o<h.MinX then v=o*(h.MinX-k.AbsoluteSize.X)end
if k.AbsoluteSize.Y+w*p<h.MinY then w=p*(h.MinY-k.AbsoluteSize.Y)end
if p<0 and k.AbsolutePosition.Y+w<0 then w=-k.AbsolutePosition.Y end

k.Position=k.Position+UDim2.new(0,(o<0 and v or 0),0,(p<0 and w or 0))
h.SizeX=h.SizeX+(m and v*o or 0)
h.SizeY=h.SizeY+(n and w*p or 0)
k.Size=UDim2.new(0,h.SizeX,0,h.Minimized and 20 or h.SizeY)
end
end)
end
end
end)

i.InputEnded:Connect(function(l)
if(l.UserInputType==Enum.UserInputType.MouseMovement or l.UserInputType==Enum.UserInputType.Touch)and h.Resizing~=i then
i.BackgroundTransparency=1
end
end)
end

local h

local function moveToTop(i)
local j=table.find(aA,i)
if j then
table.remove(aA,j)
table.insert(aA,1,i)
h()
end
end

local function sideHasRoom(i,j)
local k=ax.AbsoluteSize.Y-(math.max(0,#i.Windows-1)*4)
local l=0
for m,n in pairs(i.Windows)do
l=l+(n.MinY or 100)
if l>k-j then return false end
end

return true
end

local function getSideInsertPos(i,j)
local k=#i.Windows+1
local l={0,ax.AbsoluteSize.Y}

for m,n in pairs(i.Windows)do
local o=n.PosY+n.SizeY/2
if j<=o then
k=m
l[2]=o
break
else
l[1]=o
end
end

return k,l
end

local function focusInput(i,j)
if aH(j,"GuiButton")then
j.MouseButton1Down:Connect(function()
moveToTop(i)
end)
elseif aH(j,"TextBox")then
j.Focused:Connect(function()
moveToTop(i)
end)
end
end

local i=function(i)
local j=an{
{1,"ScreenGui",{Name="Window",}},
{2,"Frame",{Active=true,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="Main",Parent={1},Position=UDim2.new(0.40000000596046,0,0.40000000596046,0),Size=UDim2.new(0,300,0,300),}},
{3,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,Name="Content",Parent={2},Position=UDim2.new(0,0,0,20),Size=UDim2.new(1,0,1,-20),ClipsDescendants=true}},
{4,"Frame",{BackgroundColor3=Color3.fromRGB(33,33,33),BorderSizePixel=0,Name="Line",Parent={3},Size=UDim2.new(1,0,0,1),}},
{5,"TextButton",{Text="",AutoButtonColor=false,BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="TopBar",Parent={2},Size=UDim2.new(1,0,0,20),}},
{6,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={5},Position=UDim2.new(0,5,0,0),Size=UDim2.new(1,-10,0,20),Text="Window",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=0,}},
{7,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Close",Parent={5},Position=UDim2.new(1,-18,0,2),Size=UDim2.new(0,16,0,16),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{8,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5054663650",Parent={7},Position=UDim2.new(0,3,0,3),Size=UDim2.new(0,10,0,10),}},
{9,"UICorner",{CornerRadius=UDim.new(0,4),Parent={7},}},
{10,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Minimize",Parent={5},Position=UDim2.new(1,-36,0,2),Size=UDim2.new(0,16,0,16),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{11,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://5034768003",Parent={10},Position=UDim2.new(0,3,0,3),Size=UDim2.new(0,10,0,10),}},
{12,"UICorner",{CornerRadius=UDim.new(0,4),Parent={10},}},
{13,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Image="rbxassetid://1427967925",Name="Outlines",Parent={2},Position=UDim2.new(0,-5,0,-5),ScaleType=1,Size=UDim2.new(1,10,1,10),SliceCenter=Rect.new(6,6,25,25),TileSize=UDim2.new(0,20,0,20),}},
{14,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="ResizeControls",Parent={2},Position=UDim2.new(0,-5,0,-5),Size=UDim2.new(1,10,1,10),}},
{15,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="North",Parent={14},Position=UDim2.new(0,5,0,0),Size=UDim2.new(1,-10,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{16,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="South",Parent={14},Position=UDim2.new(0,5,1,-5),Size=UDim2.new(1,-10,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{17,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="NorthEast",Parent={14},Position=UDim2.new(1,-5,0,0),Size=UDim2.new(0,5,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{18,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="East",Parent={14},Position=UDim2.new(1,-5,0,5),Size=UDim2.new(0,5,1,-10),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{19,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="West",Parent={14},Position=UDim2.new(0,0,0,5),Size=UDim2.new(0,5,1,-10),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{20,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="SouthEast",Parent={14},Position=UDim2.new(1,-5,1,-5),Size=UDim2.new(0,5,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{21,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="NorthWest",Parent={14},Size=UDim2.new(0,5,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{22,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.27450981736183,0.27450981736183,0.27450981736183),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="SouthWest",Parent={14},Position=UDim2.new(0,0,1,-5),Size=UDim2.new(0,5,0,5),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
}

local k=j.Main
local l=k.TopBar
local m=k.ResizeControls

i.GuiElems.Main=k
i.GuiElems.TopBar=k.TopBar
i.GuiElems.Content=k.Content
i.GuiElems.Line=k.Content.Line
i.GuiElems.Outlines=k.Outlines
i.GuiElems.Title=l.Title
i.GuiElems.Close=l.Close
i.GuiElems.Minimize=l.Minimize
i.GuiElems.ResizeControls=m
i.ContentPane=k.Content

local n=false
l.MouseButton1Down:Connect(function()n=true end)
l.MouseButton1Up:Connect(function()n=false end)

l.InputBegan:Connect(function(o)
if o.UserInputType==Enum.UserInputType.MouseButton1 or o.UserInputType==Enum.UserInputType.Touch then
if i.Draggable then
local p,q

local r=ax.AbsoluteSize.X
local s=k.AbsolutePosition.X
local t=k.AbsolutePosition.Y
local u=o.Position.X-s
local v=o.Position.Y-t

local w,x

guiDragging=true

p=al.UserInputService.InputEnded:Connect(function(y)
if y.UserInputType==Enum.UserInputType.MouseButton1 or y.UserInputType==Enum.UserInputType.Touch then
p:Disconnect()
if q then q:Disconnect()end
guiDragging=false
az.Parent=nil
if x then
local z=(x=="left"and aB)or(x=="right"and aC)
i:AlignTo(z,w)
end
end
end)

q=al.UserInputService.InputChanged:Connect(function(y)
if(y.UserInputType==Enum.UserInputType.MouseMovement or y.UserInputType==Enum.UserInputType.Touch)and i.Draggable and not i.Closed and n then
if i.Aligned then
if aB.Resizing or aC.Resizing then return end
local z,A=y.Position.X-u,y.Position.Y-v
local B=math.sqrt((z-s)^2+(A-t)^2)
if B>=5 then
i:SetAligned(false)
end
else
local z,A=y.Position.X,y.Position.Y
local B,C=z-u,A-v
if C<0 then C=0 end
k.Position=UDim2.new(0,B,0,C)

if i.Resizable and i.Alignable then
if z<25 then
if sideHasRoom(aB,i.MinY or 100)then
local D,E=getSideInsertPos(aB,A)
az.Indicator.Position=UDim2.new(0,-15,0,E[1])
az.Indicator.Size=UDim2.new(0,40,0,E[2]-E[1])
ap.ShowGui(az)
w=D
x="left"
return
end
elseif z>=r-25 then
if sideHasRoom(aC,i.MinY or 100)then
local D,E=getSideInsertPos(aC,A)
az.Indicator.Position=UDim2.new(0,r-25,0,E[1])
az.Indicator.Size=UDim2.new(0,40,0,E[2]-E[1])
ap.ShowGui(az)
w=D
x="right"
return
end
end
end
az.Parent=nil
w=nil
x=nil
end
end
end)
end
end
end)

l.Close.MouseButton1Click:Connect(function()
if i.Closed then return end
i:Close()
end)

l.Minimize.MouseButton1Click:Connect(function()
if i.Closed then return end
if i.Aligned then
i:SetAligned(false)
else
i:SetMinimized()
end
end)

l.Minimize.MouseButton2Click:Connect(function()
if i.Closed then return end
if not i.Aligned then
i:SetMinimized(nil,2)
l.Minimize.BackgroundTransparency=1
end
end)

k.InputBegan:Connect(function(o)
if(o.UserInputType==Enum.UserInputType.MouseButton1 or o.UserInputType==Enum.UserInputType.Touch)and not i.Aligned and not i.Closed then
moveToTop(i)
end
end)

k:GetPropertyChangedSignal"AbsolutePosition":Connect(function()
local o=k.AbsolutePosition
i.PosX=o.X
i.PosY=o.Y
end)

resizeHook(i,m.North,"N")
resizeHook(i,m.NorthEast,"NE")
resizeHook(i,m.East,"E")
resizeHook(i,m.SouthEast,"SE")
resizeHook(i,m.South,"S")
resizeHook(i,m.SouthWest,"SW")
resizeHook(i,m.West,"W")
resizeHook(i,m.NorthWest,"NW")

k.Size=UDim2.new(0,i.SizeX,0,i.SizeY)

j.DescendantAdded:Connect(function(o)focusInput(i,o)end)
local o=j:GetDescendants()
for p=1,#o do
focusInput(i,o[p])
end

i.MinimizeAnim=ap.ButtonAnim(l.Minimize)
i.CloseAnim=ap.ButtonAnim(l.Close)

return j
end

local function updateSideFrames(j)
stopTweens()
aB.Frame.Size=UDim2.new(0,aB.Width,1,0)
aC.Frame.Size=UDim2.new(0,aC.Width,1,0)
aB.Frame.Resizer.Position=UDim2.new(0,aB.Width,0,0)
aC.Frame.Resizer.Position=UDim2.new(0,-5,0,0)











local k=#aB.Windows==0 or aB.Hidden
local l=#aC.Windows==0 or aC.Hidden
local m=(k and UDim2.new(0,-aB.Width-10,0,0)or UDim2.new(0,0,0,0))
local n=(l and UDim2.new(1,10,0,0)or UDim2.new(1,-aC.Width,0,0))

ax.LeftToggle.Text=k and">"or"<"
ax.RightToggle.Text=l and"<"or">"

if not j then
local function insertTween(...)
local o=al.TweenService:Create(...)
aG[#aG+1]=o
o:Play()
end
insertTween(aB.Frame,aF,{Position=m})
insertTween(aC.Frame,aF,{Position=n})
insertTween(ax.LeftToggle,aF,{Position=UDim2.new(0,#aB.Windows==0 and-16 or 0,0,-36)})
insertTween(ax.RightToggle,aF,{Position=UDim2.new(1,#aC.Windows==0 and 0 or-16,0,-36)})
else
aB.Frame.Position=m
aC.Frame.Position=n
ax.LeftToggle.Position=UDim2.new(0,#aB.Windows==0 and-16 or 0,0,-36)
ax.RightToggle.Position=UDim2.new(1,#aC.Windows==0 and 0 or-16,0,-36)
end
end

local function getSideFramePos(j)
local k=#aB.Windows==0 or aB.Hidden
local l=#aC.Windows==0 or aC.Hidden
if j==aB then
return(k and UDim2.new(0,-aB.Width-10,0,0)or UDim2.new(0,0,0,0))
else
return(l and UDim2.new(1,10,0,0)or UDim2.new(1,-aC.Width,0,0))
end
end

local function sideResized(j)
local k=0
local l=getSideFramePos(j)
for m,n in pairs(j.Windows)do
n.SizeX=j.Width
n.GuiElems.Main.Size=UDim2.new(0,j.Width,0,n.SizeY)
n.GuiElems.Main.Position=UDim2.new(l.X.Scale,l.X.Offset,0,k)
k=k+n.SizeY+4
end
end

local function sideResizerHook(j,k,l,m)local n=
aa.Mouse
local o=l.Windows

j.InputBegan:Connect(function(p)
if not l.Resizing then
if p.UserInputType==Enum.UserInputType.MouseMovement then
j.BackgroundColor3=g.MainColor2
elseif p.UserInputType==Enum.UserInputType.MouseButton1 or p.UserInputType==Enum.UserInputType.Touch then
local q,r

local s=p.Position.X-j.AbsolutePosition.X
local t=p.Position.Y-j.AbsolutePosition.Y

l.Resizing=j
j.BackgroundColor3=g.MainColor2

q=al.UserInputService.InputEnded:Connect(function(u)
if u.UserInputType==Enum.UserInputType.MouseButton1 or u.UserInputType==Enum.UserInputType.Touch then
q:Disconnect()
if r then r:Disconnect()end
l.Resizing=false
j.BackgroundColor3=g.Button
end
end)

r=al.UserInputService.InputChanged:Connect(function(u)
if not j.Parent then
q:Disconnect()
if r then r:Disconnect()end
l.Resizing=false
return
end

if u.UserInputType==Enum.UserInputType.MouseMovement or u.UserInputType==Enum.UserInputType.Touch then
if k=="V"then
local v=u.Position.Y-j.AbsolutePosition.Y-t

if v>0 then
local w=v
for x=m+1,#o do
local y=o[x]
local z=math.max(y.SizeY-w,(y.MinY or 100))
w=w-(y.SizeY-z)
y.SizeY=z
end
o[m].SizeY=o[m].SizeY+math.max(0,v-w)
else
local w=-v
for x=m,1,-1 do
local y=o[x]
local z=math.max(y.SizeY-w,(y.MinY or 100))
w=w-(y.SizeY-z)
y.SizeY=z
end
o[m+1].SizeY=o[m+1].SizeY+math.max(0,-v-w)
end

updateSideFrames()
sideResized(l)
elseif k=="H"then
local v=math.max(300,ax.AbsoluteSize.X-aw.FreeWidth)
local w=(l==aB and aC or aB)
local x=u.Position.X-j.AbsolutePosition.X-s
x=(l==aB and x or-x)

local y=math.max(aw.MinWidth,l.Width+x)
if y+w.Width<=v then
l.Width=y
else
local z=v-y
if z>=aw.MinWidth then
l.Width=y
w.Width=z
else
l.Width=v-aw.MinWidth
w.Width=aw.MinWidth
end
end

updateSideFrames(true)
sideResized(l)
sideResized(w)
end
end
end)
end
end
end)

j.InputEnded:Connect(function(p)
if p.UserInputType==Enum.UserInputType.MouseMovement or p.UserInputType==Enum.UserInputType.Touch then
if l.Resizing~=j then
j.BackgroundColor3=g.Button
end
end
end)

end

local function renderSide(j,k)
local l=0
local m=getSideFramePos(j)
local n=j.WindowResizer:Clone()
for o,p in pairs(j.ResizeCons)do p:Disconnect()end
for o,p in pairs(j.Frame:GetChildren())do if p.Name=="WindowResizer"then p:Destroy()end end
j.ResizeCons={}
j.Resizing=nil

for o,p in pairs(j.Windows)do
p.SidePos=o
local q=o==#j.Windows
local r=UDim2.new(0,j.Width,0,p.SizeY)
local s=UDim2.new(m.X.Scale,m.X.Offset,0,l)
ap.ShowGui(p.Gui)

if k then
p.GuiElems.Main.Size=r
p.GuiElems.Main.Position=s
else
local t=al.TweenService:Create(p.GuiElems.Main,aF,{Size=r,Position=s})
aG[#aG+1]=t
t:Play()
end
l=l+p.SizeY+4

if not q then
local t=n:Clone()
t.Position=UDim2.new(1,-j.Width,0,l-4)
j.ResizeCons[#j.ResizeCons+1]=p.Gui.Main:GetPropertyChangedSignal"Size":Connect(function()
t.Position=UDim2.new(1,-j.Width,0,p.GuiElems.Main.Position.Y.Offset+p.GuiElems.Main.Size.Y.Offset)
end)
j.ResizeCons[#j.ResizeCons+1]=p.Gui.Main:GetPropertyChangedSignal"Position":Connect(function()
t.Position=UDim2.new(1,-j.Width,0,p.GuiElems.Main.Position.Y.Offset+p.GuiElems.Main.Size.Y.Offset)
end)
sideResizerHook(t,"V",j,o)
t.Parent=j.Frame
end
end



end

local function updateSide(j,k)
local l=0
local m=0
local n=0
local o=j.Windows
local p=ax.AbsoluteSize.Y-(math.max(0,#o-1)*4)

for q,r in pairs(o)do l=l+r.SizeY end
for q,r in pairs(o)do
if q==#o then
r.SizeY=p-m
n=math.max(0,(r.MinY or 100)-r.SizeY)
else
r.SizeY=math.max(math.floor(r.SizeY/l*p),r.MinY or 100)
end
m=m+r.SizeY
end

if n>0 then
for q=#o-1,1,-1 do
local r=o[q]
local s=math.max(r.SizeY-n,(r.MinY or 100))
n=n-(r.SizeY-s)
r.SizeY=s
end
local q=o[#o]
q.SizeY=(q.MinY or 100)-n
end
renderSide(j,k)
end

h=function(j)
updateSideFrames(j)
updateSide(aB,j)
updateSide(aC,j)
local k=0
for l=#aA,1,-1 do
aA[l].Gui.DisplayOrder=aD+k
ap.ShowGui(aA[l].Gui)
k=k+1
end





end

au.SetMinimized=function(j,k,l)
local m=j.Minimized
local n
if k==nil then n=not j.Minimized else n=k end
j.Minimized=n
if not l then l=1 end

local o=j.GuiElems.ResizeControls
local p={"North","NorthEast","NorthWest","South","SouthEast","SouthWest"}
for q=1,#p do
local r=o:FindFirstChild(p[q])
if r then r.Visible=not n end
end

if l==1 or l==2 then
j:StopTweens()
if l==1 then
j.GuiElems.Main:TweenSize(UDim2.new(0,j.SizeX,0,n and 20 or j.SizeY),Enum.EasingDirection.Out,Enum.EasingStyle.Quart,0.25,true)
else
local q=ax.AbsoluteSize.Y
local r=UDim2.new(0,j.PosX,0,n and math.min(q-20,j.PosY+j.SizeY-20)or math.max(0,j.PosY-j.SizeY+20))

j.GuiElems.Main:TweenPosition(r,Enum.EasingDirection.Out,Enum.EasingStyle.Quart,0.25,true)
j.GuiElems.Main:TweenSize(UDim2.new(0,j.SizeX,0,n and 20 or j.SizeY),Enum.EasingDirection.Out,Enum.EasingStyle.Quart,0.25,true)
end
j.GuiElems.Minimize.ImageLabel.Image=n and"rbxassetid://5060023708"or"rbxassetid://5034768003"
end

if m~=n then
if n then
j.OnMinimize:Fire()
else
j.OnRestore:Fire()
end
end
end

au.Resize=function(j,k,l)
j.SizeX=k or j.SizeX
j.SizeY=l or j.SizeY
j.GuiElems.Main.Size=UDim2.new(0,j.SizeX,0,j.SizeY)
end

au.SetSize=au.Resize

au.SetTitle=function(j,k)
j.GuiElems.Title.Text=k
end

au.SetResizable=function(j,k)
j.Resizable=k
j.GuiElems.ResizeControls.Visible=j.Resizable and j.ResizableInternal
end

au.SetResizableInternal=function(j,k)
j.ResizableInternal=k
j.GuiElems.ResizeControls.Visible=j.Resizable and j.ResizableInternal
end

au.SetAligned=function(j,k)
j.Aligned=k
j:SetResizableInternal(not k)
j.GuiElems.Main.Active=not k
j.GuiElems.Main.Outlines.Visible=not k
if not k then
for l,m in pairs(aB.Windows)do if m==j then table.remove(aB.Windows,l)break end end
for l,m in pairs(aC.Windows)do if m==j then table.remove(aC.Windows,l)break end end
if not table.find(aA,j)then table.insert(aA,1,j)end
j.GuiElems.Minimize.ImageLabel.Image="rbxassetid://5034768003"
j.Side=nil
h()
else
j:SetMinimized(false,3)
for l,m in pairs(aA)do if m==j then table.remove(aA,l)break end end
j.GuiElems.Minimize.ImageLabel.Image="rbxassetid://5448127505"
end
end

au.Add=function(j,k,l)
if type(k)=="table"and k.Gui and k.Gui:IsA"GuiObject"then
k.Gui.Parent=j.ContentPane
else
k.Parent=j.ContentPane
end
if l then j.Elements[l]=k end
end

au.GetElement=function(j,k,l)
return j.Elements[l]
end

au.AlignTo=function(j,k,l,m,n)
if table.find(k.Windows,j)or j.Closed then return end

m=m or j.SizeY
if m>0 and m<=1 then
local o=0
for p,q in pairs(k.Windows)do o=o+q.SizeY end
j.SizeY=(o>0 and o*m*2)or m
else
j.SizeY=(m>0 and m or 100)
end

j:SetAligned(true)
j.Side=k
j.SizeX=k.Width
j.Gui.DisplayOrder=aE+1
for o,p in pairs(k.Windows)do p.Gui.DisplayOrder=aE end
l=math.min(#k.Windows+1,l or 1)
j.SidePos=l
table.insert(k.Windows,l,j)

if not n then
k.Hidden=false
end

end

au.Close=function(j)
j.Closed=true
j:SetResizableInternal(false)

ap.FindAndRemove(aB.Windows,j)
ap.FindAndRemove(aC.Windows,j)
ap.FindAndRemove(aA,j)

j.MinimizeAnim.Disable()
j.CloseAnim.Disable()
j.ClosedSide=j.Side
j.Side=nil
j.OnDeactivate:Fire()

if not j.Aligned then
j:StopTweens()
local k=TweenInfo.new(0.2,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)

local l=tick()
j.LastClose=l

j:DoTween(j.GuiElems.Main,k,{Size=UDim2.new(0,j.SizeX,0,20)})
j:DoTween(j.GuiElems.Title,k,{TextTransparency=1})
j:DoTween(j.GuiElems.Minimize.ImageLabel,k,{ImageTransparency=1})
j:DoTween(j.GuiElems.Close.ImageLabel,k,{ImageTransparency=1})
ap.FastWait(0.2)
if l~=j.LastClose then return end

j:DoTween(j.GuiElems.TopBar,k,{BackgroundTransparency=1})
j:DoTween(j.GuiElems.Outlines,k,{ImageTransparency=1})
ap.FastWait(0.2)
if l~=j.LastClose then return end
end

j.Aligned=false
j.Gui.Parent=nil
h(true)
end

au.Hide=au.Close

au.IsVisible=function(j)
return not j.Closed and((j.Side and not j.Side.Hidden)or not j.Side)
end

au.IsContentVisible=function(j)
return j:IsVisible()and not j.Minimized
end

au.Focus=function(j)
moveToTop(j)
end

au.MoveInBoundary=function(j)
local k,l=j.PosX,j.PosY
local m,n=ax.AbsoluteSize.X,ax.AbsoluteSize.Y
k=math.min(k,m-j.SizeX)
l=math.min(l,n-20)
j.GuiElems.Main.Position=UDim2.new(0,k,0,l)
end

au.DoTween=function(j,...)
local k=al.TweenService:Create(...)
j.Tweens[#j.Tweens+1]=k
k:Play()
end

au.StopTweens=function(j)
for k,l in pairs(j.Tweens)do
l:Cancel()
end
j.Tweens={}
end

au.Show=function(j,k)
return aw.ShowWindow(j,k)
end

au.ShowAndFocus=function(j,k)
aw.ShowWindow(j,k)
al.RunService.RenderStepped:wait()
j:Focus()
end

aw.ShowWindow=function(j,k)
k=k or{}
local l=k.Align
local m=k.Pos
local n=k.Size
local o=(l=="left"and aB)or(l=="right"and aC)

if not j.Closed then
if not j.Aligned then
j:SetMinimized(false)
elseif j.Side and not k.Silent then
aw.SetSideVisible(j.Side,true)
end
return
end

j.Closed=false
j.LastClose=tick()
j.GuiElems.Title.TextTransparency=0
j.GuiElems.Minimize.ImageLabel.ImageTransparency=0
j.GuiElems.Close.ImageLabel.ImageTransparency=0
j.GuiElems.TopBar.BackgroundTransparency=0
j.GuiElems.Outlines.ImageTransparency=0
j.GuiElems.Minimize.ImageLabel.Image="rbxassetid://5034768003"
j.GuiElems.Main.Active=true
j.GuiElems.Main.Outlines.Visible=true
j:SetMinimized(false,3)
j:SetResizableInternal(true)
j.MinimizeAnim.Enable()
j.CloseAnim.Enable()

if l then
j:AlignTo(o,m,n,k.Silent)
else
if l==nil and j.ClosedSide then
j:AlignTo(j.ClosedSide,j.SidePos,n,true)
aw.SetSideVisible(j.ClosedSide,true)
else
if table.find(aA,j)then return end


j.GuiElems.Main.Size=UDim2.new(0,j.SizeX,0,20)
local p=TweenInfo.new(0.2,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)
j:StopTweens()
j:DoTween(j.GuiElems.Main,p,{Size=UDim2.new(0,j.SizeX,0,j.SizeY)})

j.SizeY=n or j.SizeY
table.insert(aA,1,j)
h()
end
end

j.ClosedSide=nil
j.OnActivate:Fire()
end

aw.ToggleSide=function(j)
local k=(j=="left"and aB or aC)
k.Hidden=not k.Hidden
for l,m in pairs(k.Windows)do
if k.Hidden then
m.OnDeactivate:Fire()
else
m.OnActivate:Fire()
end
end
h()
end

aw.SetSideVisible=function(j,k)
local l=(type(j)=="table"and j)or(j=="left"and aB or aC)
l.Hidden=not k
for m,n in pairs(l.Windows)do
if l.Hidden then
n.OnDeactivate:Fire()
else
n.OnActivate:Fire()
end
end
h()
end

aw.Init=function()
aD=aa.DisplayOrders.Window
aE=aa.DisplayOrders.SideWindow

ax=Instance.new"ScreenGui"
local j=an{
{1,"Frame",{Active=true,Name="LeftSide",BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,}},
{2,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2549019753933,0.2549019753933,0.2549019753933),BorderSizePixel=0,Font=3,Name="Resizer",Parent={1},Size=UDim2.new(0,5,1,0),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{3,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="Line",Parent={2},Position=UDim2.new(0,0,0,0),Size=UDim2.new(0,1,1,0),}},
{4,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2549019753933,0.2549019753933,0.2549019753933),BorderSizePixel=0,Font=3,Name="WindowResizer",Parent={1},Position=UDim2.new(1,-300,0,0),Size=UDim2.new(1,0,0,4),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{5,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="Line",Parent={4},Size=UDim2.new(1,0,0,1),}},
}
aB.Frame=j
j.Position=UDim2.new(0,-aB.Width-10,0,0)
aB.WindowResizer=j.WindowResizer
j.WindowResizer.Parent=nil
j.Parent=ax

local k=an{
{1,"Frame",{Active=true,Name="RightSide",BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,}},
{2,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2549019753933,0.2549019753933,0.2549019753933),BorderSizePixel=0,Font=3,Name="Resizer",Parent={1},Size=UDim2.new(0,5,1,0),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{3,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="Line",Parent={2},Position=UDim2.new(0,4,0,0),Size=UDim2.new(0,1,1,0),}},
{4,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2549019753933,0.2549019753933,0.2549019753933),BorderSizePixel=0,Font=3,Name="WindowResizer",Parent={1},Position=UDim2.new(1,-300,0,0),Size=UDim2.new(1,0,0,4),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{5,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="Line",Parent={4},Size=UDim2.new(1,0,0,1),}},
}
aC.Frame=k
k.Position=UDim2.new(1,10,0,0)
aC.WindowResizer=k.WindowResizer
k.WindowResizer.Parent=nil
k.Parent=ax

sideResizerHook(j.Resizer,"H",aB)
sideResizerHook(k.Resizer,"H",aC)

az=Instance.new"ScreenGui"
az.DisplayOrder=aa.DisplayOrders.Core
local l=Instance.new("Frame",az)
l.BackgroundColor3=Color3.fromRGB(0,170,255)
l.BorderSizePixel=0
l.BackgroundTransparency=0.8
l.Name="Indicator"
local m=Instance.new("UICorner",l)
m.CornerRadius=UDim.new(0,10)

local n=an{{1,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderMode=2,Font=10,Name="LeftToggle",Position=UDim2.new(0,0,0,-36),Size=UDim2.new(0,16,0,36),Text="<",TextColor3=Color3.new(1,1,1),TextSize=14,}}}
local o=n:Clone()
o.Name="RightToggle"
o.Position=UDim2.new(1,-16,0,-36)
ap.ButtonAnim(n,{Mode=2,PressColor=Color3.fromRGB(32,32,32)})
ap.ButtonAnim(o,{Mode=2,PressColor=Color3.fromRGB(32,32,32)})

n.MouseButton1Click:Connect(function()
aw.ToggleSide"left"
end)

o.MouseButton1Click:Connect(function()
aw.ToggleSide"right"
end)

n.Parent=ax
o.Parent=ax

ax:GetPropertyChangedSignal"AbsoluteSize":Connect(function()
local p=math.max(300,ax.AbsoluteSize.X-aw.FreeWidth)
aB.Width=math.max(aw.MinWidth,math.min(aB.Width,p-aC.Width))
aC.Width=math.max(aw.MinWidth,math.min(aC.Width,p-aB.Width))
for q=1,#aA do
aA[q]:MoveInBoundary()
end
h(true)
end)

ax.DisplayOrder=aE-1
ap.ShowGui(ax)
updateSideFrames()
end

local j={__index=au}
aw.new=function()
local k=setmetatable({
Minimized=false,
Dragging=false,
Resizing=false,
Aligned=false,
Draggable=true,
Resizable=true,
ResizableInternal=true,
Alignable=true,
Closed=true,
SizeX=300,
SizeY=300,
MinX=200,
MinY=200,
PosX=0,
PosY=0,
GuiElems={},
Tweens={},
Elements={},
OnActivate=ap.Signal.new(),
OnDeactivate=ap.Signal.new(),
OnMinimize=ap.Signal.new(),
OnRestore=ap.Signal.new()
},j)
k.Gui=i(k)
return k
end

return aw
end)()

ap.ContextMenu=(function()
local au={}
local aw

local function createGui(ax)
local az=an{
{1,"ScreenGui",{DisplayOrder=1000000,Name="Context",ZIndexBehavior=1,}},
{2,"Frame",{Active=true,BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),Name="Main",Parent={1},Position=UDim2.new(0.5,-100,0.5,-150),Size=UDim2.new(0,200,0,100),}},
{3,"UICorner",{CornerRadius=UDim.new(0,4),Parent={2},}},
{4,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),Name="Container",Parent={2},Position=UDim2.new(0,1,0,1),Size=UDim2.new(1,-2,1,-2),}},
{5,"UICorner",{CornerRadius=UDim.new(0,4),Parent={4},}},
{6,"ScrollingFrame",{Active=true,BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BackgroundTransparency=1,BorderSizePixel=0,CanvasSize=UDim2.new(0,0,0,0),Name="List",Parent={4},Position=UDim2.new(0,2,0,2),ScrollBarImageColor3=Color3.new(0,0,0),ScrollBarThickness=4,Size=UDim2.new(1,-4,1,-4),VerticalScrollBarInset=1,}},
{7,"UIListLayout",{Parent={6},SortOrder=2,}},
{8,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="SearchFrame",Parent={4},Size=UDim2.new(1,0,0,24),Visible=false,}},
{9,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.1176470592618,0.1176470592618,0.1176470592618),BorderSizePixel=0,Name="SearchContainer",Parent={8},Position=UDim2.new(0,3,0,3),Size=UDim2.new(1,-6,0,18),}},
{10,"TextBox",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="SearchBox",Parent={9},PlaceholderColor3=Color3.new(0.39215689897537,0.39215689897537,0.39215689897537),PlaceholderText="Search",Position=UDim2.new(0,4,0,0),Size=UDim2.new(1,-8,0,18),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=0,}},
{11,"UICorner",{CornerRadius=UDim.new(0,2),Parent={9},}},
{12,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="Line",Parent={8},Position=UDim2.new(0,0,1,0),Size=UDim2.new(1,0,0,1),}},
{13,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BackgroundTransparency=1,BorderColor3=Color3.new(0.33725491166115,0.49019610881805,0.73725491762161),BorderSizePixel=0,Font=3,Name="Entry",Parent={1},Size=UDim2.new(1,0,0,22),Text="",TextSize=14,Visible=false,}},
{14,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="EntryName",Parent={13},Position=UDim2.new(0,24,0,0),Size=UDim2.new(1,-24,1,0),Text="Duplicate",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{15,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Shortcut",Parent={13},Position=UDim2.new(0,24,0,0),Size=UDim2.new(1,-30,1,0),Text="Ctrl+D",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{16,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,ImageRectOffset=Vector2.new(304,0),ImageRectSize=Vector2.new(16,16),Name="Icon",Parent={13},Position=UDim2.new(0,2,0,3),ScaleType=4,Size=UDim2.new(0,16,0,16),}},
{17,"UICorner",{CornerRadius=UDim.new(0,4),Parent={13},}},
{18,"Frame",{BackgroundColor3=Color3.new(0.21568629145622,0.21568629145622,0.21568629145622),BackgroundTransparency=1,BorderSizePixel=0,Name="Divider",Parent={1},Position=UDim2.new(0,0,0,20),Size=UDim2.new(1,0,0,7),Visible=false,}},
{19,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="Line",Parent={18},Position=UDim2.new(0,0,0.5,0),Size=UDim2.new(1,0,0,1),}},
{20,"TextLabel",{AnchorPoint=Vector2.new(0,0.5),BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="DividerName",Parent={18},Position=UDim2.new(0,2,0.5,0),Size=UDim2.new(1,-4,1,0),Text="Objects",TextColor3=Color3.new(1,1,1),TextSize=14,TextTransparency=0.60000002384186,TextXAlignment=0,Visible=false,}}
}

ax.GuiElems.Main=az.Main
ax.GuiElems.List=az.Main.Container.List
ax.GuiElems.Entry=az.Entry
ax.GuiElems.Divider=az.Divider
ax.GuiElems.SearchFrame=az.Main.Container.SearchFrame
ax.GuiElems.SearchBar=ax.GuiElems.SearchFrame.SearchContainer.SearchBox
ap.ViewportTextBox.convert(ax.GuiElems.SearchBar)

ax.GuiElems.SearchBar:GetPropertyChangedSignal"Text":Connect(function()
local aA,aB=string.lower,string.find
local aC=aA(ax.GuiElems.SearchBar.Text)
local aD=ax.Items
local aE=ax.ItemToEntryMap

if aC~=""then
local aF={}
local aG=1
for aH=1,#aD do
local g=aD[aH]
local h=aE[g]
if h then
if not g.Divider and aB(aA(g.Name),aC,1,true)then
aF[aG]=g
aG=aG+1
else
h.Visible=false
end
end
end
table.sort(aF,function(aH,g)return aH.Name<g.Name end)
for aH=1,#aF do
local g=aE[aF[aH] ]
g.LayoutOrder=aH
g.Visible=true
end
else
for aF=1,#aD do
local aG=aE[aD[aF] ]
if aG then aG.LayoutOrder=aF aG.Visible=true end
end
end

local aF=ax.GuiElems.List.UIListLayout.AbsoluteContentSize.Y+6
ax.GuiElems.List.CanvasSize=UDim2.new(0,0,0,aF-6)
end)

return az
end

au.Add=function(ax,az)
local aA={
Name=az.Name or"Item",
Icon=az.Icon or"",
Shortcut=az.Shortcut or"",
OnClick=az.OnClick,
OnHover=az.OnHover,
Disabled=az.Disabled or false,
DisabledIcon=az.DisabledIcon or"",
IconMap=az.IconMap,
OnRightClick=az.OnRightClick
}

if ax.QueuedDivider then
local aB=ax.QueuedDividerText and#ax.QueuedDividerText>0 and ax.QueuedDividerText
ax:AddDivider(aB)
end
ax.Items[#ax.Items+1]=aA
ax.Updated=nil
end

au.AddRegistered=function(ax,az,aA)
if not ax.Registered[az]then error(az.." is not registered")end

if ax.QueuedDivider then
local aB=ax.QueuedDividerText and#ax.QueuedDividerText>0 and ax.QueuedDividerText
ax:AddDivider(aB)
end
ax.Registered[az].Disabled=aA
ax.Items[#ax.Items+1]=ax.Registered[az]
ax.Updated=nil
end

au.Register=function(ax,az,aA)
ax.Registered[az]={
Name=aA.Name or"Item",
Icon=aA.Icon or"",
Shortcut=aA.Shortcut or"",
OnClick=aA.OnClick,
OnHover=aA.OnHover,
DisabledIcon=aA.DisabledIcon or"",
IconMap=aA.IconMap,
OnRightClick=aA.OnRightClick
}
end

au.UnRegister=function(ax,az)
ax.Registered[az]=nil
end

au.AddDivider=function(ax,az)
ax.QueuedDivider=false
local aA=az and al.TextService:GetTextSize(az,14,Enum.Font.SourceSans,Vector2.new(999999999,20)).X or nil
table.insert(ax.Items,{Divider=true,Text=az,TextSize=aA and aA+4})
ax.Updated=nil
end

au.QueueDivider=function(ax,az)
ax.QueuedDivider=true
ax.QueuedDividerText=az or""
end

au.Clear=function(ax)
ax.Items={}
ax.Updated=nil
end

au.Refresh=function(ax)
for az,aA in pairs(ax.GuiElems.List:GetChildren())do
if not aA:IsA"UIListLayout"then
aA:Destroy()
end
end
local az={}
ax.ItemToEntryMap=az

local aA=ax.GuiElems.Divider
local aB=ax.GuiElems.List
local aC=ax.GuiElems.Entry
local aD=ax.Items

for aE=1,#aD do
local aF=aD[aE]
if aF.Divider then
local aG=aA:Clone()
aG.Line.BackgroundColor3=ax.Theme.DividerColor
if aF.Text then
aG.Size=UDim2.new(1,0,0,20)
aG.Line.Position=UDim2.new(0,aF.TextSize,0.5,0)
aG.Line.Size=UDim2.new(1,-aF.TextSize,0,1)
aG.DividerName.TextColor3=ax.Theme.TextColor
aG.DividerName.Text=aF.Text
aG.DividerName.Visible=true
end
aG.Visible=true
az[aF]=aG
aG.Parent=aB
else
local aG=aC:Clone()
aG.BackgroundColor3=ax.Theme.HighlightColor
aG.EntryName.TextColor3=ax.Theme.TextColor
aG.EntryName.Text=aF.Name
aG.Shortcut.Text=aF.Shortcut
if aF.Disabled then
aG.EntryName.TextColor3=Color3.new(0.5882352941176471,0.5882352941176471,0.5882352941176471)
aG.Shortcut.TextColor3=Color3.new(0.5882352941176471,0.5882352941176471,0.5882352941176471)
end

if ax.Iconless then
aG.EntryName.Position=UDim2.new(0,2,0,0)
aG.EntryName.Size=UDim2.new(1,-4,0,20)
aG.Icon.Visible=false
else
local aH=aF.Disabled and aF.DisabledIcon or aF.Icon

if aF.IconMap then
if type(aH)=="number"then
aF.IconMap:Display(aG.Icon,aH)
elseif type(aH)=="string"then
aF.IconMap:DisplayByKey(aG.Icon,aH)
end
elseif type(aH)=="string"then
aG.Icon.Image=aH
end
end

if not aF.Disabled then
if aF.OnClick then
aG.MouseButton1Click:Connect(function()
aF.OnClick(aF.Name)
if not aF.NoHide then
ax:Hide()
end
end)
end

if aF.OnRightClick then
aG.MouseButton2Click:Connect(function()
aF.OnRightClick(aF.Name)
if not aF.NoHide then
ax:Hide()
end
end)
end
end

aG.InputBegan:Connect(function(aH)
if aH.UserInputType==Enum.UserInputType.MouseMovement or aH.UserInputType==Enum.UserInputType.Touch then
aG.BackgroundTransparency=0
end
end)

aG.InputEnded:Connect(function(aH)
if aH.UserInputType==Enum.UserInputType.MouseMovement or aH.UserInputType==Enum.UserInputType.Touch then
aG.BackgroundTransparency=1
end
end)

aG.Visible=true
az[aF]=aG
aG.Parent=aB
end
end
ax.Updated=true
end

au.Show=function(ax,az,aA)
local aB=ax.GuiElems
aB.SearchFrame.Visible=ax.SearchEnabled
aB.List.Position=UDim2.new(0,2,0,2+(ax.SearchEnabled and 24 or 0))
aB.List.Size=UDim2.new(1,-4,1,-4-(ax.SearchEnabled and 24 or 0))
if ax.SearchEnabled and ax.ClearSearchOnShow then aB.SearchBar.Text=""end
ax.GuiElems.List.CanvasPosition=Vector2.new(0,0)

if not ax.Updated then
ax:Refresh()
end


local aC=false
local aD,aE=az or aw.X,aA or aw.Y
local aF,aG=aw.ViewSizeX,aw.ViewSizeY


if aD+ax.Width>aF then
aD=ax.ReverseX and aD-ax.Width or aF-ax.Width
end
aB.Main.Position=UDim2.new(0,aD,0,aE)
aB.Main.Size=UDim2.new(0,ax.Width,0,0)
ax.Gui.DisplayOrder=aa.DisplayOrders.Menu
ap.ShowGui(ax.Gui)


local aH=aB.List.UIListLayout.AbsoluteContentSize.Y+6
if ax.MaxHeight and aH>ax.MaxHeight then
aB.List.CanvasSize=UDim2.new(0,0,0,aH-6)
aH=ax.MaxHeight
else
aB.List.CanvasSize=UDim2.new(0,0,0,0)
end
if aE+aH>aG then aC=true end


local g
if ax.CloseEvent then ax.CloseEvent:Disconnect()end
ax.CloseEvent=al.UserInputService.InputBegan:Connect(function(h)
if not g then return end

if h.UserInputType==Enum.UserInputType.MouseButton1 or h.UserInputType==Enum.UserInputType.Touch then
if not ap.CheckMouseInGui(aB.Main)then
ax.CloseEvent:Disconnect()
ax:Hide()
end
end
end)


if aC then
aB.Main.Position=UDim2.new(0,aD,0,aE-(ax.ReverseYOffset or 0))
local h=aE-aH-(ax.ReverseYOffset or 0)
aE=h>=0 and h or 0
aB.Main:TweenSizeAndPosition(UDim2.new(0,ax.Width,0,aH),UDim2.new(0,aD,0,aE),Enum.EasingDirection.Out,Enum.EasingStyle.Quart,0.2,true)
else
aB.Main:TweenSize(UDim2.new(0,ax.Width,0,aH),Enum.EasingDirection.Out,Enum.EasingStyle.Quart,0.2,true)
end


ap.FastWait()
if ax.SearchEnabled and ax.FocusSearchOnShow then aB.SearchBar:CaptureFocus()end
g=true
end

au.Hide=function(ax)
ax.Gui.Parent=nil
end

au.ApplyTheme=function(ax,az)
local aA=ax.Theme
aA.ContentColor=az.ContentColor or ad.Theme.Menu
aA.OutlineColor=az.OutlineColor or ad.Theme.Menu
aA.DividerColor=az.DividerColor or ad.Theme.Outline2
aA.TextColor=az.TextColor or ad.Theme.Text
aA.HighlightColor=az.HighlightColor or ad.Theme.Main1

ax.GuiElems.Main.BackgroundColor3=aA.OutlineColor
ax.GuiElems.Main.Container.BackgroundColor3=aA.ContentColor
end

local ax={__index=au}
local function new()
if not aw then aw=aa.Mouse or al.Players.LocalPlayer:GetMouse()end

local az=setmetatable({
Width=200,
MaxHeight=nil,
Iconless=false,
SearchEnabled=false,
ClearSearchOnShow=true,
FocusSearchOnShow=true,
Updated=false,
QueuedDivider=false,
QueuedDividerText="",
Items={},
Registered={},
GuiElems={},
Theme={}
},ax)
az.Gui=createGui(az)
az:ApplyTheme{}
return az
end

return{new=new}
end)()

ap.CodeFrame=(function()
local au={}

local aw={
[1]="String",
[2]="String",
[3]="String",
[4]="Comment",
[5]="Operator",
[6]="Number",
[7]="Keyword",
[8]="BuiltIn",
[9]="LocalMethod",
[10]="LocalProperty",
[11]="Nil",
[12]="Bool",
[13]="Function",
[14]="Local",
[15]="Self",
[16]="FunctionName",
[17]="Bracket"
}

local ax={
["nil"]=11,
["true"]=12,
["false"]=12,
["function"]=13,
["local"]=14,
self=15
}

local az={
["and"]=true,
["break"]=true,
["do"]=true,
["else"]=true,
["elseif"]=true,
["end"]=true,
["false"]=true,
["for"]=true,
["function"]=true,
["if"]=true,
["in"]=true,
["local"]=true,
["nil"]=true,
["not"]=true,
["or"]=true,
["repeat"]=true,
["return"]=true,
["then"]=true,
["true"]=true,
["until"]=true,
["while"]=true,
plugin=true
}

local aA={
delay=true,
elapsedTime=true,
require=true,
spawn=true,
tick=true,
time=true,
typeof=true,
UserSettings=true,
wait=true,
warn=true,
game=true,
shared=true,
script=true,
workspace=true,
assert=true,
collectgarbage=true,
error=true,
getfenv=true,
getmetatable=true,
ipairs=true,
loadstring=true,
newproxy=true,
next=true,
pairs=true,
pcall=true,
print=true,
rawequal=true,
rawget=true,
rawset=true,
select=true,
setfenv=true,
setmetatable=true,
tonumber=true,
tostring=true,
type=true,
unpack=true,
xpcall=true,
_G=true,
_VERSION=true,
coroutine=true,
debug=true,
math=true,
os=true,
string=true,
table=true,
bit32=true,
utf8=true,
Axes=true,
BrickColor=true,
CFrame=true,
Color3=true,
ColorSequence=true,
ColorSequenceKeypoint=true,
DockWidgetPluginGuiInfo=true,
Enum=true,
Faces=true,
Instance=true,
NumberRange=true,
NumberSequence=true,
NumberSequenceKeypoint=true,
PathWaypoint=true,
PhysicalProperties=true,
Random=true,
Ray=true,
Rect=true,
Region3=true,
Region3int16=true,
TweenInfo=true,
UDim=true,
UDim2=true,
Vector2=true,
Vector2int16=true,
Vector3=true,
Vector3int16=true
}

local aB=false

local aC={
["'"]="&apos;",
["\""]="&quot;",
["<"]="&lt;",
[">"]="&gt;",
["&"]="&amp;"
}

local aD="\t"
local aE=(" %s "):format(aD)

local aF={
[("[^%s] "):format(aD)]=0,
[(" %s"):format(aD)]=-1,
[("%s "):format(aD)]=2,
[(" [^%s]"):format(aD)]=1,
}

local aG=al.TweenService
local aH={}

local function initBuiltIn()
local g=getfenv()
local h=type
local i=tostring
for j,k in next,aA do
local l=g[j]
if h(l)=="table"then
local m={}
for n,o in next,l do
m[n]=true
end
aA[j]=m
end
end

local j={}
local k=Enum:GetEnums()
for l=1,#k do
j[i(k[l])]=true
end
aA.Enum=j

aB=true
end

local function setupEditBox(g)
local h=g.GuiElems.EditBox

h.Focused:Connect(function()
g:ConnectEditBoxEvent()
g.Editing=true
end)

h.FocusLost:Connect(function()
g:DisconnectEditBoxEvent()
g.Editing=false
end)

h:GetPropertyChangedSignal"Text":Connect(function()
local i=h.Text
if#i==0 or g.EditBoxCopying then return end
h.Text=""
g:AppendText(i)
end)
end

local function setupMouseSelection(g)
am:GetMouse()
local h=g.GuiElems.LinesFrame
local i=g.Lines

h.InputBegan:Connect(function(j)
if j.UserInputType==Enum.UserInputType.MouseButton1 or j.UserInputType==Enum.UserInputType.Touch then
local k,l=math.ceil(g.FontSize/2),g.FontSize
local m=j.Position.X-h.AbsolutePosition.X
local n=j.Position.Y-h.AbsolutePosition.Y
local o=math.round(m/k)+g.ViewX
local p=math.floor(n/l)+g.ViewY
local q,r,s
local t,u=0,0
p=math.min(#i-1,p)
local v=i[p+1]or""
o=math.min(#v,o+g:TabAdjust(o,p))

g.SelectionRange={{-1,-1},{-1,-1}}
g:MoveCursor(o,p)
g.FloatCursorX=o

local function updateSelection()
local w=j.Position.X-h.AbsolutePosition.X
local x=j.Position.Y-h.AbsolutePosition.Y
local y=math.max(0,math.round(w/k)+g.ViewX)
local z=math.max(0,math.floor(x/l)+g.ViewY)

z=math.min(#i-1,z)
local A=i[z+1]or""
y=math.min(#A,y+g:TabAdjust(y,z))

if z<p or(z==p and y<o)then
g.SelectionRange={{y,z},{o,p}}
else
g.SelectionRange={{o,p},{y,z}}
end

g:MoveCursor(y,z)
g.FloatCursorX=y
g:Refresh()
end

q=al.UserInputService.InputEnded:Connect(function(w)
if w.UserInputType==Enum.UserInputType.MouseButton1 or w.UserInputType==Enum.UserInputType.Touch then
q:Disconnect()
r:Disconnect()
s:Disconnect()
g:SetCopyableSelection()
end
end)

r=al.UserInputService.InputChanged:Connect(function(w)
if w.UserInputType==Enum.UserInputType.MouseMovement or w.UserInputType==Enum.UserInputType.Touch then
local x=w.Position.Y-h.AbsolutePosition.Y
local y=w.Position.Y-h.AbsolutePosition.Y-h.AbsoluteSize.Y
local z=w.Position.X-h.AbsolutePosition.X
local A=w.Position.X-h.AbsolutePosition.X-h.AbsoluteSize.X

t=0
u=0
if y>0 then
t=math.floor(y*0.05)+1
elseif x<0 then
t=math.ceil(x*0.05)-1
end
if A>0 then
u=math.floor(A*0.05)+1
elseif z<0 then
u=math.ceil(z*0.05)-1
end
updateSelection()
end
end)

s=al.RunService.RenderStepped:Connect(function()
if t~=0 or u~=0 then
g:ScrollDelta(u,t)
updateSelection()
end
end)

g:Refresh()
end
end)

end

local function makeFrame(g)
local h=an{
{1,"Frame",{BackgroundColor3=Color3.new(0.15686275064945,0.15686275064945,0.15686275064945),BorderSizePixel=0,Position=UDim2.new(0.5,-300,0.5,-200),Size=UDim2.new(0,600,0,400),}},
}
local i={}

local j=Instance.new"Frame"
j.Name="Lines"
j.BackgroundTransparency=1
j.Size=UDim2.new(1,0,1,0)
j.ClipsDescendants=true
j.Parent=h

local k=Instance.new"TextLabel"
k.Name="LineNumbers"
k.BackgroundTransparency=1
k.Font=Enum.Font.Code
k.TextXAlignment=Enum.TextXAlignment.Right
k.TextYAlignment=Enum.TextYAlignment.Top
k.ClipsDescendants=true
k.RichText=true
k.Parent=h

local l=Instance.new"Frame"
l.Name="Cursor"
l.BackgroundColor3=Color3.fromRGB(220,220,220)
l.BorderSizePixel=0
l.Parent=h

local m=Instance.new"TextBox"
m.Name="EditBox"
m.MultiLine=true
m.Visible=false
m.Parent=h

aH.Invis=aG:Create(l,TweenInfo.new(0.4,Enum.EasingStyle.Quart,Enum.EasingDirection.Out),{BackgroundTransparency=1})
aH.Vis=aG:Create(l,TweenInfo.new(0.2,Enum.EasingStyle.Quart,Enum.EasingDirection.Out),{BackgroundTransparency=0})

i.LinesFrame=j
i.LineNumbersLabel=k
i.Cursor=l
i.EditBox=m
i.ScrollCorner=an{{1,"Frame",{BackgroundColor3=Color3.new(0.15686275064945,0.15686275064945,0.15686275064945),BorderSizePixel=0,Name="ScrollCorner",Position=UDim2.new(1,-16,1,-16),Size=UDim2.new(0,16,0,16),Visible=false,}}}

i.ScrollCorner.Parent=h
j.InputBegan:Connect(function(n)
if n.UserInputType==Enum.UserInputType.MouseButton1 or n.UserInputType==Enum.UserInputType.Touch then
g:SetEditing(true,n)
end
end)


g.Frame=h
g.Gui=h
g.GuiElems=i
setupEditBox(g)
setupMouseSelection(g)

return h
end

au.GetSelectionText=function(g)
if not g:IsValidRange()then return""end

local h=g.SelectionRange
local i,j=h[1][1],h[1][2]
local k,l=h[2][1],h[2][2]
local m=l-j
local n=g.Lines

if not n[j+1]or not n[l+1]then return""end

if m==0 then
return g:ConvertText(n[j+1]:sub(i+1,k),false)
end

local o=n[j+1]:sub(i+1)
local p=n[l+1]:sub(1,k)

local q=o.."\n"
for r=j+1,l-1 do
q=q..n[r+1].."\n"
end
q=q..p

return g:ConvertText(q,false)
end

au.SetCopyableSelection=function(g)
local h=g:GetSelectionText()
local i=g.GuiElems.EditBox

g.EditBoxCopying=true
i.Text=h
i.SelectionStart=1
i.CursorPosition=#i.Text+1
g.EditBoxCopying=false
end

au.ConnectEditBoxEvent=function(g)
if g.EditBoxEvent then
g.EditBoxEvent:Disconnect()
end

g.EditBoxEvent=al.UserInputService.InputBegan:Connect(function(h)
if h.UserInputType~=Enum.UserInputType.Keyboard then return end

local i=Enum.KeyCode
local j=h.KeyCode

local function setupMove(k,l)
local m,n
m=al.UserInputService.InputEnded:Connect(function(o)
if o.KeyCode~=k then return end
m:Disconnect()
n=true
end)
l()
ap.FastWait(0.5)
while not n do l()ap.FastWait(0.03)end
end

if j==i.Down then
setupMove(i.Down,function()
g.CursorX=g.FloatCursorX
g.CursorY=g.CursorY+1
g:UpdateCursor()
g:JumpToCursor()
end)
elseif j==i.Up then
setupMove(i.Up,function()
g.CursorX=g.FloatCursorX
g.CursorY=g.CursorY-1
g:UpdateCursor()
g:JumpToCursor()
end)
elseif j==i.Left then
setupMove(i.Left,function()
local k=g.Lines[g.CursorY+1]or""
g.CursorX=g.CursorX-1-(k:sub(g.CursorX-3,g.CursorX)==aE and 3 or 0)
if g.CursorX<0 then
g.CursorY=g.CursorY-1
local l=g.Lines[g.CursorY+1]or""
g.CursorX=#l
end
g.FloatCursorX=g.CursorX
g:UpdateCursor()
g:JumpToCursor()
end)
elseif j==i.Right then
setupMove(i.Right,function()
local k=g.Lines[g.CursorY+1]or""
g.CursorX=g.CursorX+1+(k:sub(g.CursorX+1,g.CursorX+4)==aE and 3 or 0)
if g.CursorX>#k then
g.CursorY=g.CursorY+1
g.CursorX=0
end
g.FloatCursorX=g.CursorX
g:UpdateCursor()
g:JumpToCursor()
end)
elseif j==i.Backspace then
setupMove(i.Backspace,function()
local k,l
if g:IsValidRange()then
k=g.SelectionRange[1]
l=g.SelectionRange[2]
else
l={g.CursorX,g.CursorY}
end

if not k then
local m=g.Lines[g.CursorY+1]or""
g.CursorX=g.CursorX-1-(m:sub(g.CursorX-3,g.CursorX)==aE and 3 or 0)
if g.CursorX<0 then
g.CursorY=g.CursorY-1
local n=g.Lines[g.CursorY+1]or""
g.CursorX=#n
end
g.FloatCursorX=g.CursorX
g:UpdateCursor()

k=k or{g.CursorX,g.CursorY}
end

g:DeleteRange({k,l},false,true)
g:ResetSelection(true)
g:JumpToCursor()
end)
elseif j==i.Delete then
setupMove(i.Delete,function()
local k,l
if g:IsValidRange()then
k=g.SelectionRange[1]
l=g.SelectionRange[2]
else
k={g.CursorX,g.CursorY}
end

if not l then
local m=g.Lines[g.CursorY+1]or""
local n=g.CursorX+1+(m:sub(g.CursorX+1,g.CursorX+4)==aE and 3 or 0)
local o=g.CursorY
if n>#m then
o=o+1
n=0
end
g:UpdateCursor()

l=l or{n,o}
end

g:DeleteRange({k,l},false,true)
g:ResetSelection(true)
g:JumpToCursor()
end)
elseif al.UserInputService:IsKeyDown(Enum.KeyCode.LeftControl)then
if j==i.A then
g.SelectionRange={{0,0},{#g.Lines[#g.Lines],#g.Lines-1}}
g:SetCopyableSelection()
g:Refresh()
end
end
end)
end

au.DisconnectEditBoxEvent=function(g)
if g.EditBoxEvent then
g.EditBoxEvent:Disconnect()
end
end

au.ResetSelection=function(g,h)
g.SelectionRange={{-1,-1},{-1,-1}}
if not h then g:Refresh()end
end

au.IsValidRange=function(g,h)
local i=h or g.SelectionRange
local j,k=i[1][1],i[1][2]
local l,m=i[2][1],i[2][2]

if j==-1 or(j==l and k==m)then return false end

return true
end

au.DeleteRange=function(g,h,i,j)
h=h or g.SelectionRange
if not g:IsValidRange(h)then return end

local k=g.Lines
local l,m=h[1][1],h[1][2]
local n,o=h[2][1],h[2][2]
local p=o-m

if not k[m+1]or not k[o+1]then return end

local q=k[m+1]:sub(1,l)
local r=k[o+1]:sub(n+1)
k[m+1]=q..r

local s=table.remove
for t=1,p do
s(k,m+2)
end

if h==g.SelectionRange then g.SelectionRange={{-1,-1},{-1,-1}}end
if j then
g.CursorX=l
g.CursorY=m
g:UpdateCursor()
end

if not i then
g:ProcessTextChange()
end
end

au.AppendText=function(g,h)
g:DeleteRange(nil,true,true)
local i,j,k=g.Lines,g.CursorX,g.CursorY
local l=i[k+1]
local m=l:sub(1,j)
local n=l:sub(j+1)

h=h:gsub("\r\n","\n")
h=g:ConvertText(h,true)

local o=h:split"\n"
local p=table.insert

for q=1,#o do
local r=k+q
if q>1 then p(i,r,"")end

local s=o[q]
local t=(q==1 and m or"")
local u=(q==#o and n or"")

i[r]=t..s..u
end

if#o>1 then j=0 end

g:ProcessTextChange()
g.CursorX=j+#o[#o]
g.CursorY=k+#o-1
g:UpdateCursor()
end

au.ScrollDelta=function(g,h,i)
g.ScrollV:ScrollTo(g.ScrollV.Index+i)
g.ScrollH:ScrollTo(g.ScrollH.Index+h)
end


au.TabAdjust=function(g,h,i)
local j=g.Lines
local k=j[i+1]
h=h+1

if k then
local l=k:sub(h-1,h-1)
local m=k:sub(h,h)
local n=k:sub(h+1,h+1)
local o=(#l>0 and l or" ")..(#m>0 and m or" ")..(#n>0 and n or" ")

for p,q in pairs(aF)do
if o:find(p)then
return q
end
end
end
return 0
end

au.SetEditing=function(g,h,i)
g:UpdateCursor(i)

if h then
if g.Editable then
g.GuiElems.EditBox.Text=""
g.GuiElems.EditBox:CaptureFocus()
end
else
g.GuiElems.EditBox:ReleaseFocus()
end
end

au.CursorAnim=function(g,h)
local i=g.GuiElems.Cursor
local j=tick()
g.LastAnimTime=j

if not h then return end

aH.Invis:Cancel()
aH.Vis:Cancel()
i.BackgroundTransparency=0

coroutine.wrap(function()
while g.Editable do
ap.FastWait(0.5)
if g.LastAnimTime~=j then return end
aH.Invis:Play()
ap.FastWait(0.4)
if g.LastAnimTime~=j then return end
aH.Vis:Play()
ap.FastWait(0.2)
end
end)()
end

au.MoveCursor=function(g,h,i)
g.CursorX=h
g.CursorY=i
g:UpdateCursor()
g:JumpToCursor()
end

au.JumpToCursor=function(g)
g:Refresh()
end

au.UpdateCursor=function(g,h)
local i=g.GuiElems.LinesFrame
local j=g.GuiElems.Cursor
local k=math.max(0,i.AbsoluteSize.X)
local l=math.max(0,i.AbsoluteSize.Y)
local m=math.ceil(l/g.FontSize)
local n=math.ceil(k/math.ceil(g.FontSize/2))
local o,p=g.ViewX,g.ViewY
local q=tostring(#g.Lines)
local r=math.ceil(g.FontSize/2)
local s=#q*r+4*r

if h then
local t=g.GuiElems.LinesFrame
local u,v=t.AbsolutePosition.X,t.AbsolutePosition.Y
local w,x=h.Position.X,h.Position.Y
local y,z=math.ceil(g.FontSize/2),g.FontSize

g.CursorX=g.ViewX+math.round((w-u)/y)
g.CursorY=g.ViewY+math.floor((x-v)/z)
end

local t,u=g.CursorX,g.CursorY

local v=g.Lines[u+1]or""
if t>#v then t=#v
elseif t<0 then t=0 end

if u>=#g.Lines then
u=math.max(0,#g.Lines-1)
elseif u<0 then
u=0
end

t=t+g:TabAdjust(t,u)


g.CursorX=t
g.CursorY=u

local w=(t>=o)and(u>=p)and(t<=o+n)and(u<=p+m)
if w then
local x=(t-o)
local y=(u-p)
j.Position=UDim2.new(0,s+x*math.ceil(g.FontSize/2)-1,0,y*g.FontSize)
j.Size=UDim2.new(0,1,0,g.FontSize+2)
j.Visible=true
g:CursorAnim(true)
else
j.Visible=false
end
end

au.MapNewLines=function(g)
local h={}
local i=1
local j=g.Text
local k=string.find
local l=1

local m=k(j,"\n",l,true)
while m do
h[i]=m
i=i+1
l=m+1
m=k(j,"\n",l,true)
end

g.NewLines=h
end

au.PreHighlight=function(g)
tick()
local h=g.Text:gsub("\\\\","	")

local i=#h
local j={}
local k={}
local l={}
local m=string.find
local n=string.sub
g.ColoredLines={}

local function findAll(o,p,q,r)
local s=#j+1
local t=1
local u,v,w=m(o,p,t,r)
while u do
j[s]=u
k[u]=q
if w then
l[u]=w
end

s=s+1
t=v+1
u,v,w=m(o,p,t,r)
end
end
tick()
findAll(h,'"',1,true)
findAll(h,"'",2,true)
findAll(h,"%[(=*)%[",3)
findAll(h,"--",4,true)
table.sort(j)

local o=g.NewLines
local p=0


local q=0
local r=0
local s={}

for t=1,#j do
local u=j[t]
if u<=r then continue end

local v=u
local w=k[u]
if w==1 then
v=m(h,'"',u+1,true)
while v and n(h,v-1,v-1)=="\\"do
v=m(h,'"',v+1,true)
end
if not v then v=i end
elseif w==2 then
v=m(h,"'",u+1,true)
while v and n(h,v-1,v-1)=="\\"do
v=m(h,"'",v+1,true)
end
if not v then v=i end
elseif w==3 then
_,v=m(h,"]"..l[u].."]",u+1,true)
if not v then v=i end
elseif w==4 then
local x=k[u+2]

if x==3 then
_,v=m(h,"]"..l[u+2].."]",u+1,true)
if not v then v=i end
else
v=m(h,"\n",u+1,true)or i
end
end

while u>q do
p=p+1

q=o[p]or i+1
end
while true do
local x=s[p]
if not x then x={}s[p]=x end
x[u]={w,v}


if v>q then
p=p+1
q=o[p]or i+1
else
break
end
end

r=v

end
g.PreHighlights=s


end

au.HighlightLine=function(g,h)
local i=g.ColoredLines[h]
if i then return i end

local j=string.sub
local k=string.find
local l=string.match
local m={}
local n=g.PreHighlights[h]or{}
local o=g.Lines[h]or""local p=
#o
local q=0
local r=0
local s
local t=false
local u=0
local v=g.NewLines[h-1]or 0

local w={}
for x,y in next,n do
local z=x-v
if z<1 then
r=y[1]
q=y[2]-v

else
w[z]={y[1],y[2]-v}
end
end

for x=1,#o do
if x<=q then m[x]=r continue end

local y=w[x]
if y then
r=y[1]
q=y[2]
m[x]=r
t=false
s=nil
u=0
else
local z=j(o,x,x)
if k(z,"[%a_]")then
local A=l(o,"[%a%d_]+",x)
local B=(az[A]and 7)or(aA[A]and 8)

q=x+#A-1

if B~=7 then
if t then
local C=s and aA[s]
B=(C and type(C)=="table"and C[A]and 8)or 10
end

if B~=8 then local
C, D, E=k(o,"^%s*([%({\"'])",q+1)
if C then
B=(u>0 and E=="("and 16)or 9
u=0
end
end
else
B=ax[A]or B
u=(A=="function"and 1 or 0)
end

s=A
t=false
if u>0 then u=1 end

if B then
r=B
m[x]=r
else
r=nil
end
elseif k(z,"%p")then
local A=(z==".")
local B=A and k(j(o,x+1,x+1),"%d")
m[x]=(B and 6 or 5)

if not B then
local C=A and l(o,"%.%.?%.?",x)
if C and#C>1 then
r=5
q=x+#C-1
t=false
s=nil
u=0
else
if A then
if t then
s=nil
else
t=true
end
else
t=false
s=nil
end

u=((A or z==":")and u==1 and 2)or 0
end
end
elseif k(z,"%d")then local
A, B=k(o,"%x+",x)
local C=j(o,B,B+1)
if(C=="e+"or C=="e-")and k(j(o,B+2,B+2),"%d")then
B=B+1
end
r=6
q=B
m[x]=6
t=false
s=nil
u=0
else
m[x]=r local
A, B=k(o,"%s+",x)
if B then
q=B
end
end
end
end

g.ColoredLines[h]=m
return m
end

au.Refresh=function(g)
tick()

local h=g.Frame.Lines
local i=math.max(0,h.AbsoluteSize.X)
local j=math.max(0,h.AbsoluteSize.Y)
local k=math.ceil(j/g.FontSize)
local l=math.ceil(i/math.ceil(g.FontSize/2))
local m=string.gsub
local n=string.sub

local o,p=g.ViewX,g.ViewY

local q=""

for r=1,k do
local s=g.LineFrames[r]
if not s then
s=Instance.new"Frame"
s.Name="Line"
s.Position=UDim2.new(0,0,0,(r-1)*g.FontSize)
s.Size=UDim2.new(1,0,0,g.FontSize)
s.BorderSizePixel=0
s.BackgroundTransparency=1

local t=Instance.new"Frame"
t.Name="SelectionHighlight"
t.BorderSizePixel=0
t.BackgroundColor3=ad.Theme.Syntax.SelectionBack
t.Parent=s

local u=Instance.new"TextLabel"
u.Name="Label"
u.BackgroundTransparency=1
u.Font=Enum.Font.Code
u.TextSize=g.FontSize
u.Size=UDim2.new(1,0,0,g.FontSize)
u.RichText=true
u.TextXAlignment=Enum.TextXAlignment.Left
u.TextColor3=g.Colors.Text
u.ZIndex=2
u.Parent=s

s.Parent=h
g.LineFrames[r]=s
end

local t=p+r
local u=g.Lines[t]or""
local v=""
local w=g:HighlightLine(t)
local x=o+1

local y=g.RichTemplates
local z=y.Text
local A=y.Selection
local B=w[x]
local C=y[aw[B] ]or z


local D=g.SelectionRange
local E=D[1]
local F=D[2]
local G,H=E[2],E[1]
local I,J=F[2],F[1]
local K=t-1

if K>=E[2]and K<=F[2]then
local L=math.ceil(g.FontSize/2)
local M=(K==E[2]and E[1]or 0)-o
local N=(K==F[2]and F[1]-M-o or l+o)

s.SelectionHighlight.Position=UDim2.new(0,M*L,0,0)
s.SelectionHighlight.Size=UDim2.new(0,N*L,1,0)
s.SelectionHighlight.Visible=true
else
s.SelectionHighlight.Visible=false
end


local L=K>=G and K<=I and(K==G and o>=H or K~=G)and(K==I and o<J or K~=I)
if L then
B=-999
C=A
end

for M=2,l do
local N=o+M
local O=N-1
local P=w[N]


local Q=K>=G and K<=I and(K==G and O>=H or K~=G)and(K==I and O<J or K~=I)
if Q then
P=-999
end

if P~=B then
local R=(Q and A)or y[aw[P] ]or z

if R~=C then
local S=m(n(u,x,N-1),"['\"<>&]",aC)
v=v..(C~=z and(C..S.."</font>")or S)
x=N
C=R
end
B=P
end
end

local M=m(n(u,x,o+l),"['\"<>&]",aC)

if#M>0 then
v=v..(C~=z and(C..M.."</font>")or M)
end

if g.Lines[t]then
q=q..(t==g.CursorY and("<b>"..t.."</b>\n")or t.."\n")
end

s.Label.Text=v
end

for r=k+1,#g.LineFrames do
g.LineFrames[r]:Destroy()
g.LineFrames[r]=nil
end

g.Frame.LineNumbers.Text=q
g:UpdateCursor()


end

au.UpdateView=function(g)
local h=tostring(#g.Lines)
local i=math.ceil(g.FontSize/2)
local j=#h*i+4*i

local k=g.Frame.Lines
local l=k.AbsoluteSize.X
local m=k.AbsoluteSize.Y
local n=math.ceil(m/g.FontSize)
local o=g.MaxTextCols*i
local p=g.ScrollV
local q=g.ScrollH

p.VisibleSpace=n
p.TotalSpace=#g.Lines+1
q.VisibleSpace=math.ceil(l/i)
q.TotalSpace=g.MaxTextCols+1

p.Gui.Visible=#g.Lines+1>n
q.Gui.Visible=o>l

local r=g.FrameOffsets
g.FrameOffsets=Vector2.new(p.Gui.Visible and-16 or 0,q.Gui.Visible and-16 or 0)
if r~=g.FrameOffsets then
g:UpdateView()
else
p:ScrollTo(g.ViewY,true)
q:ScrollTo(g.ViewX,true)

if p.Gui.Visible and q.Gui.Visible then
p.Gui.Size=UDim2.new(0,16,1,-16)
q.Gui.Size=UDim2.new(1,-16,0,16)
g.GuiElems.ScrollCorner.Visible=true
else
p.Gui.Size=UDim2.new(0,16,1,0)
q.Gui.Size=UDim2.new(1,0,0,16)
g.GuiElems.ScrollCorner.Visible=false
end

g.ViewY=p.Index
g.ViewX=q.Index
g.Frame.Lines.Position=UDim2.new(0,j,0,0)
g.Frame.Lines.Size=UDim2.new(1,-j+r.X,1,r.Y)
g.Frame.LineNumbers.Position=UDim2.new(0,i,0,0)
g.Frame.LineNumbers.Size=UDim2.new(0,#h*i,1,r.Y)
g.Frame.LineNumbers.TextSize=g.FontSize
end
end

au.ProcessTextChange=function(g)
local h=0
local i=g.Lines

for j=1,#i do
local k=#i[j]
if k>h then
h=k
end
end

g.MaxTextCols=h
g:UpdateView()
g.Text=table.concat(g.Lines,"\n")
g:MapNewLines()
g:PreHighlight()
g:Refresh()

end

au.ConvertText=function(g,h,i)
if i then
return h:gsub("\t",(" %s "):format(aD))
else
return h:gsub((" %s "):format(aD),"\t")
end
end

au.GetText=function(g)
local h=table.concat(g.Lines,"\n")
return g:ConvertText(h,false)
end

au.SetText=function(g,h)
h=g:ConvertText(h,true)
local i=g.Lines
table.clear(i)
local j=1

for k in h:gmatch"([^\n\r]*)[\n\r]?"do local l=
#k
i[j]=k
j=j+1
end

g:ProcessTextChange()
end

au.MakeRichTemplates=function(g)
local h=math.floor
local i={}

for j,k in pairs(g.Colors)do
i[j]=('<font color="rgb(%s,%s,%s)">'):format(h(k.r*255),h(k.g*255),h(k.b*255))
end

g.RichTemplates=i
end

au.ApplyTheme=function(g)
local h=ad.Theme.Syntax
g.Colors=h
g.Frame.LineNumbers.TextColor3=h.Text
g.Frame.BackgroundColor3=h.Background
end

local g={__index=au}

local function new()
if not aB then initBuiltIn()end

local h=ap.ScrollBar.new()
local i=ap.ScrollBar.new(true)
i.Gui.Position=UDim2.new(0,0,1,-16)
local j=setmetatable({
FontSize=15,
ViewX=0,
ViewY=0,
Colors=ad.Theme.Syntax,
ColoredLines={},
Lines={""},
LineFrames={},
Editable=true,
Editing=false,
CursorX=0,
CursorY=0,
FloatCursorX=0,
Text="",
PreHighlights={},
SelectionRange={{-1,-1},{-1,-1}},
NewLines={},
FrameOffsets=Vector2.new(0,0),
MaxTextCols=0,
ScrollV=h,
ScrollH=i
},g)

h.WheelIncrement=3
i.Increment=2
i.WheelIncrement=7

h.Scrolled:Connect(function()
j.ViewY=h.Index
j:Refresh()
end)

i.Scrolled:Connect(function()
j.ViewX=i.Index
j:Refresh()
end)

makeFrame(j)
j:MakeRichTemplates()
j:ApplyTheme()
h:SetScrollFrame(j.Frame.Lines)
h.Gui.Parent=j.Frame
i.Gui.Parent=j.Frame

j:UpdateView()
j.Frame:GetPropertyChangedSignal"AbsoluteSize":Connect(function()
j:UpdateView()
j:Refresh()
end)

return j
end

return{new=new}
end)()

ap.Checkbox=(function()
local au={}
local aw=Color3.fromRGB
local ax=Vector2.new
local az=UDim2.fromScale
local aA=UDim2.fromOffset
local aB=UDim.new
local aC=math.max
local aD=Instance.new
local aE=aD"Frame".TweenSize
local aF=TweenInfo.new
local aG=delay

local function ripple(aH,g)
local h=aD'Frame'
h.BackgroundColor3=g
h.BackgroundTransparency=0.75
h.BorderSizePixel=0
h.AnchorPoint=ax(0.5,0.5)
h.Size=aA()
h.Position=az(0.5,0.5)
h.Parent=aH
local i=aD'UICorner'
i.CornerRadius=aB(1)
i.Parent=h

local j=aH.AbsoluteSize
local k=aC(j.X,j.Y)*5/3

aE(h,aA(k,k),"Out","Quart",0.4)
al.TweenService:Create(h,aF(0.4,Enum.EasingStyle.Quart,Enum.EasingDirection.In),{BackgroundTransparency=1}):Play()

al.Debris:AddItem(h,0.4)
end

local function initGui(aH,g)
local h=g or an{
{1,"ImageButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="Checkbox",Position=UDim2.new(0,3,0,3),Size=UDim2.new(0,16,0,16),}},
{2,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ripples",Parent={1},Size=UDim2.new(1,0,1,0),}},
{3,"Frame",{BackgroundColor3=Color3.new(0.10196078568697,0.10196078568697,0.10196078568697),BorderSizePixel=0,Name="outline",Parent={1},Size=UDim2.new(0,16,0,16),}},
{4,"Frame",{BackgroundColor3=Color3.new(0.14117647707462,0.14117647707462,0.14117647707462),BorderSizePixel=0,Name="filler",Parent={3},Position=UDim2.new(0,1,0,1),Size=UDim2.new(0,14,0,14),}},
{5,"Frame",{BackgroundColor3=Color3.new(0.90196084976196,0.90196084976196,0.90196084976196),BorderSizePixel=0,Name="top",Parent={4},Size=UDim2.new(0,16,0,0),}},
{6,"Frame",{AnchorPoint=Vector2.new(0,1),BackgroundColor3=Color3.new(0.90196084976196,0.90196084976196,0.90196084976196),BorderSizePixel=0,Name="bottom",Parent={4},Position=UDim2.new(0,0,0,14),Size=UDim2.new(0,16,0,0),}},
{7,"Frame",{BackgroundColor3=Color3.new(0.90196084976196,0.90196084976196,0.90196084976196),BorderSizePixel=0,Name="left",Parent={4},Size=UDim2.new(0,0,0,16),}},
{8,"Frame",{AnchorPoint=Vector2.new(1,0),BackgroundColor3=Color3.new(0.90196084976196,0.90196084976196,0.90196084976196),BorderSizePixel=0,Name="right",Parent={4},Position=UDim2.new(0,14,0,0),Size=UDim2.new(0,0,0,16),}},
{9,"Frame",{AnchorPoint=Vector2.new(0.5,0.5),BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,ClipsDescendants=true,Name="checkmark",Parent={4},Position=UDim2.new(0.5,0,0.5,0),Size=UDim2.new(0,0,0,20),}},
{10,"ImageLabel",{AnchorPoint=Vector2.new(0.5,0.5),BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Image="rbxassetid://6234266378",Parent={9},Position=UDim2.new(0.5,0,0.5,0),ScaleType=3,Size=UDim2.new(0,15,0,11),}},
{11,"ImageLabel",{AnchorPoint=Vector2.new(0.5,0.5),BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://6401617475",ImageColor3=Color3.new(0.20784313976765,0.69803923368454,0.98431372642517),Name="checkmark2",Parent={4},Position=UDim2.new(0.5,0,0.5,0),Size=UDim2.new(0,12,0,12),Visible=false,}},
{12,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://6425281788",ImageTransparency=0.20000000298023,Name="middle",Parent={4},ScaleType=2,Size=UDim2.new(1,0,1,0),TileSize=UDim2.new(0,2,0,2),Visible=false,}},
{13,"UICorner",{CornerRadius=UDim.new(0,2),Parent={3},}},
}
local i=h.outline
local j=i.filler
local k=j.checkmark
local l=h.ripples


local m,n,o,p=j.top,j.bottom,j.left,j.right

aH.Gui=h
aH.GuiElems={
Top=m,
Bottom=n,
Left=o,
Right=p,
Outline=i,
Filler=j,
Checkmark=k,
Checkmark2=j.checkmark2,
Middle=j.middle
}

h.Activated:Connect(function()
if ap.CheckMouseInGui(h)then
if aH.Style==0 then
ripple(l,aH.Disabled and aH.Colors.Disabled or aH.Colors.Primary)
end

if not aH.Disabled then
aH:SetState(not aH.Toggled,true)
else
aH:Paint()
end

aH.OnInput:Fire()
end
end)



























aH:Paint()
end

au.Collapse=function(aH,g)
local h=aH.GuiElems
if g then
aE(h.Top,aA(14,14),"In","Quart",0.26666666666666666,true)
aE(h.Bottom,aA(14,14),"In","Quart",0.26666666666666666,true)
aE(h.Left,aA(14,14),"In","Quart",0.26666666666666666,true)
aE(h.Right,aA(14,14),"In","Quart",0.26666666666666666,true)
else
h.Top.Size=aA(14,14)
h.Bottom.Size=aA(14,14)
h.Left.Size=aA(14,14)
h.Right.Size=aA(14,14)
end
end

au.Expand=function(aH,g)
local h=aH.GuiElems
if g then
aE(h.Top,aA(14,0),"InOut","Quart",0.26666666666666666,true)
aE(h.Bottom,aA(14,0),"InOut","Quart",0.26666666666666666,true)
aE(h.Left,aA(0,14),"InOut","Quart",0.26666666666666666,true)
aE(h.Right,aA(0,14),"InOut","Quart",0.26666666666666666,true)
else
h.Top.Size=aA(14,0)
h.Bottom.Size=aA(14,0)
h.Left.Size=aA(0,14)
h.Right.Size=aA(0,14)
end
end

au.Paint=function(aH)
local g=aH.GuiElems

if aH.Style==0 then
local h=aH.Disabled and aH.Colors.Disabled
g.Outline.BackgroundColor3=h or(aH.Toggled and aH.Colors.Primary)or aH.Colors.Secondary
local i=h or aH.Colors.Primary
g.Top.BackgroundColor3=i
g.Bottom.BackgroundColor3=i
g.Left.BackgroundColor3=i
g.Right.BackgroundColor3=i
else
g.Outline.BackgroundColor3=aH.Disabled and aH.Colors.Disabled or aH.Colors.Secondary
g.Filler.BackgroundColor3=aH.Disabled and aH.Colors.DisabledBackground or aH.Colors.Background
g.Checkmark2.ImageColor3=aH.Disabled and aH.Colors.DisabledCheck or aH.Colors.Primary
end
end

au.SetState=function(aH,g,h)
aH.Toggled=g

if aH.OutlineColorTween then aH.OutlineColorTween:Cancel()end
local i=tick()
aH.LastSetStateTime=i

if aH.Toggled then
if aH.Style==0 then
if h then
aH.OutlineColorTween=al.TweenService:Create(aH.GuiElems.Outline,aF(0.26666666666666666,Enum.EasingStyle.Circular,Enum.EasingDirection.Out),{BackgroundColor3=aH.Colors.Primary})
aH.OutlineColorTween:Play()
aG(0.15,function()
if i~=aH.LastSetStateTime then return end
aH:Paint()
aE(aH.GuiElems.Checkmark,aA(14,20),"Out","Bounce",0.13333333333333333,true)
end)
else
aH.GuiElems.Outline.BackgroundColor3=aH.Colors.Primary
aH:Paint()
aH.GuiElems.Checkmark.Size=aA(14,20)
end
aH:Collapse(h)
else
aH:Paint()
aH.GuiElems.Checkmark2.Visible=true
aH.GuiElems.Middle.Visible=false
end
else
if aH.Style==0 then
if h then
aH.OutlineColorTween=al.TweenService:Create(aH.GuiElems.Outline,aF(0.26666666666666666,Enum.EasingStyle.Circular,Enum.EasingDirection.In),{BackgroundColor3=aH.Colors.Secondary})
aH.OutlineColorTween:Play()
aG(0.15,function()
if i~=aH.LastSetStateTime then return end
aH:Paint()
aE(aH.GuiElems.Checkmark,aA(0,20),"Out","Quad",6.666666666666666E-2,true)
end)
else
aH.GuiElems.Outline.BackgroundColor3=aH.Colors.Secondary
aH:Paint()
aH.GuiElems.Checkmark.Size=aA(0,20)
end
aH:Expand(h)
else
aH:Paint()
aH.GuiElems.Checkmark2.Visible=false
aH.GuiElems.Middle.Visible=aH.Toggled==nil
end
end
end

local aH={__index=au}

local function new(g)
local h=setmetatable({
Toggled=false,
Disabled=false,
OnInput=ap.Signal.new(),
Style=g or 0,
Colors={
Background=aw(36,36,36),
Primary=aw(49,176,230),
Secondary=aw(25,25,25),
Disabled=aw(64,64,64),
DisabledBackground=aw(52,52,52),
DisabledCheck=aw(80,80,80)
}
},aH)
initGui(h)
return h
end

local function fromFrame(g)
local h=setmetatable({
Toggled=false,
Disabled=false,
Colors={
Background=aw(36,36,36),
Primary=aw(49,176,230),
Secondary=aw(25,25,25),
Disabled=aw(64,64,64),
DisabledBackground=aw(52,52,52)
}
},aH)
initGui(h,g)
return h
end

return{new=new,fromFrame}
end)()

ap.BrickColorPicker=(function()
local au={}
local aw=0
local ax=al.Players.LocalPlayer:GetMouse()
local az=4
local aA=27
local aB=1
local aC=8

local aD={
Color3.fromRGB(17,17,17),
Color3.fromRGB(99,95,98),
Color3.fromRGB(163,162,165),
Color3.fromRGB(205,205,205),
Color3.fromRGB(223,223,222),
Color3.fromRGB(237,234,234),
Color3.fromRGB(27,42,53),
Color3.fromRGB(91,93,105),
Color3.fromRGB(159,161,172),
Color3.fromRGB(202,203,209),
Color3.fromRGB(231,231,236),
Color3.fromRGB(248,248,248)
}

local function isMouseInHexagon(aE,aF)
local aG=aF.X-aE.AbsolutePosition.X
local aH=aF.Y-aE.AbsolutePosition.Y
if aG>=az and aG<az+aA then
aG=aG-4
local g=(13-math.min(aG,26-aG))/13
if aH>=aB+aC*g and aH<aE.AbsoluteSize.Y-aB-aC*g then
return true
end
end
return false
end

local function hexInput(aE,aF,aG)
aF.InputBegan:Connect(function(aH)
if aH.UserInputType==Enum.UserInputType.MouseButton1 or aH.UserInputType==Enum.UserInputType.Touch then
if isMouseInHexagon(aF,aH.Position)then
aE.OnSelect:Fire(aG)
aE:Close()
end
end
end)

aF.InputChanged:Connect(function(aH)
if aH.UserInputType==Enum.UserInputType.MouseMovement or aH.UserInputType==Enum.UserInputType.Touch then
if isMouseInHexagon(aF,aH.Position)then
aE.OnPreview:Fire(aG)
end
end
end)
end

local function createGui(aE)
local aF=an{
{1,"ScreenGui",{Name="BrickColor",}},
{2,"Frame",{Active=true,BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderColor3=Color3.new(0.1294117718935,0.1294117718935,0.1294117718935),Parent={1},Position=UDim2.new(0.40000000596046,0,0.40000000596046,0),Size=UDim2.new(0,337,0,380),}},
{3,"TextButton",{BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),BorderSizePixel=0,Font=3,Name="MoreColors",Parent={2},Position=UDim2.new(0,5,1,-30),Size=UDim2.new(1,-10,0,25),Text="More Colors",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{4,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Image="rbxassetid://1281023007",ImageColor3=Color3.new(0.33333334326744,0.33333334326744,0.49803924560547),Name="Hex",Parent={2},Size=UDim2.new(0,35,0,35),Visible=false,}},
}
local aG=aF.Frame
local aH=aG.Hex

for g=1,13 do
local h=math.min(g,14-g)+6
for i=1,h do
local j=BrickColor.palette(aw).Color
local k=aH:Clone()
k.Position=UDim2.new(0,(i-1)*25-(h-7)*13+78+1,0,(g-1)*23+4)
k.ImageColor3=j
k.Visible=true
hexInput(aE,k,j)
k.Parent=aG
aw=aw+1
end
end

for g=1,12 do
local h=aD[g]
local i=aH:Clone()
i.Position=UDim2.new(0,(g-1)*25-65+78+3,0,308)
i.ImageColor3=h
i.Visible=true
hexInput(aE,i,h)
i.Parent=aG
aw=aw+1
end

aG.MoreColors.MouseButton1Click:Connect(function()
aE.OnMoreColors:Fire()
aE:Close()
end)

aE.Gui=aF
end

au.SetMoreColorsVisible=function(aE,aF)
local aG=aE.Gui.Frame
aG.Size=UDim2.new(0,337,0,380-(not aF and 33 or 0))
aG.MoreColors.Visible=aF
end

au.Show=function(aE,aF,aG,aH)
aE.PrevColor=aH or aE.PrevColor

local g=false

local h,i=aF or ax.X,aG or ax.Y
local j,k=ax.ViewSizeX,ax.ViewSizeY
ap.ShowGui(aE.Gui)
local l,m=aE.Gui.Frame.AbsoluteSize.X,aE.Gui.Frame.AbsoluteSize.Y

if h+l>j then h=aE.ReverseX and h-l or j-l end
if i+m>k then g=true end

local n=false
if aE.CloseEvent then aE.CloseEvent:Disconnect()end

aE.CloseEvent=al.UserInputService.InputBegan:Connect(function(o)
if not n or(o.UserInputType~=Enum.UserInputType.MouseButton1 and o.UserInputType~=Enum.UserInputType.Touch)then
return
end

if not ap.CheckMouseInGui(aE.Gui.Frame)then
aE.CloseEvent:Disconnect()
aE:Close()
end
end)


if g then
local o=i-m-(aE.ReverseYOffset or 0)
i=o>=0 and o or 0
end

aE.Gui.Frame.Position=UDim2.new(0,h,0,i)

ap.FastWait()
n=true
end

au.Close=function(aE)
aE.Gui.Parent=nil
aE.OnCancel:Fire()
end

local aE={__index=au}

local function new()
local aF=setmetatable({
OnPreview=ap.Signal.new(),
OnSelect=ap.Signal.new(),
OnCancel=ap.Signal.new(),
OnMoreColors=ap.Signal.new(),
PrevColor=Color3.new(0,0,0)
},aE)
createGui(aF)
return aF
end

return{new=new}
end)()

ap.ColorPicker=(function()


local function new()
local au=setmetatable({},{})

au.OnSelect=ap.Signal.new()
au.OnCancel=ap.Signal.new()
au.OnPreview=ap.Signal.new()

local aw=an{
{1,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,ClipsDescendants=true,Name="Content",Position=UDim2.new(0,0,0,20),Size=UDim2.new(1,0,1,-20),}},
{2,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="BasicColors",Parent={1},Position=UDim2.new(0,5,0,5),Size=UDim2.new(0,180,0,200),}},
{3,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={2},Position=UDim2.new(0,0,0,-5),Size=UDim2.new(1,0,0,26),Text="Basic Colors",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{4,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Blue",Parent={1},Position=UDim2.new(1,-63,0,255),Size=UDim2.new(0,52,0,16),}},
{5,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={4},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{6,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={5},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
{7,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={6},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{8,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={7},Size=UDim2.new(0,16,0,8),}},
{9,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={8},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
{10,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={8},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{11,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={8},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
{12,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={6},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{13,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={12},Size=UDim2.new(0,16,0,8),}},
{14,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={13},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
{15,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={13},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{16,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={13},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
{17,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={4},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Blue:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{18,"Frame",{BackgroundColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),BorderSizePixel=0,ClipsDescendants=true,Name="ColorSpaceFrame",Parent={1},Position=UDim2.new(1,-261,0,4),Size=UDim2.new(0,222,0,202),}},
{19,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),BorderSizePixel=0,Image="rbxassetid://1072518406",Name="ColorSpace",Parent={18},Position=UDim2.new(0,1,0,1),Size=UDim2.new(0,220,0,200),}},
{20,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="Scope",Parent={19},Position=UDim2.new(0,210,0,190),Size=UDim2.new(0,20,0,20),}},
{21,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Name="Line",Parent={20},Position=UDim2.new(0,9,0,0),Size=UDim2.new(0,2,0,20),}},
{22,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Name="Line",Parent={20},Position=UDim2.new(0,0,0,9),Size=UDim2.new(0,20,0,2),}},
{23,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="CustomColors",Parent={1},Position=UDim2.new(0,5,0,210),Size=UDim2.new(0,180,0,90),}},
{24,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={23},Size=UDim2.new(1,0,0,20),Text="Custom Colors (RC = Set)",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{25,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Green",Parent={1},Position=UDim2.new(1,-63,0,233),Size=UDim2.new(0,52,0,16),}},
{26,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={25},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{27,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={26},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
{28,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={27},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{29,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={28},Size=UDim2.new(0,16,0,8),}},
{30,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={29},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
{31,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={29},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{32,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={29},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
{33,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={27},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{34,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={33},Size=UDim2.new(0,16,0,8),}},
{35,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={34},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
{36,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={34},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{37,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={34},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
{38,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={25},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Green:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{39,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Hue",Parent={1},Position=UDim2.new(1,-180,0,211),Size=UDim2.new(0,52,0,16),}},
{40,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={39},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{41,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={40},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
{42,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={41},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{43,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={42},Size=UDim2.new(0,16,0,8),}},
{44,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={43},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
{45,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={43},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{46,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={43},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
{47,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={41},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{48,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={47},Size=UDim2.new(0,16,0,8),}},
{49,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={48},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
{50,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={48},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{51,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={48},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
{52,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={39},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Hue:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{53,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Name="Preview",Parent={1},Position=UDim2.new(1,-260,0,211),Size=UDim2.new(0,35,1,-245),}},
{54,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Red",Parent={1},Position=UDim2.new(1,-63,0,211),Size=UDim2.new(0,52,0,16),}},
{55,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={54},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{56,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={55},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
{57,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={56},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{58,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={57},Size=UDim2.new(0,16,0,8),}},
{59,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={58},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
{60,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={58},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{61,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={58},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
{62,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={56},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{63,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={62},Size=UDim2.new(0,16,0,8),}},
{64,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={63},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
{65,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={63},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{66,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={63},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
{67,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={54},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Red:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{68,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Sat",Parent={1},Position=UDim2.new(1,-180,0,233),Size=UDim2.new(0,52,0,16),}},
{69,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={68},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{70,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={69},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
{71,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={70},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{72,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={71},Size=UDim2.new(0,16,0,8),}},
{73,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={72},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
{74,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={72},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{75,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={72},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
{76,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={70},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{77,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={76},Size=UDim2.new(0,16,0,8),}},
{78,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={77},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
{79,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={77},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{80,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={77},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
{81,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={68},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Sat:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{82,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Val",Parent={1},Position=UDim2.new(1,-180,0,255),Size=UDim2.new(0,52,0,16),}},
{83,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Font=3,Name="Input",Parent={82},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,50,0,16),Text="255",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{84,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={83},Position=UDim2.new(1,-16,0,0),Size=UDim2.new(0,16,1,0),}},
{85,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Up",Parent={84},Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{86,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={85},Size=UDim2.new(0,16,0,8),}},
{87,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={86},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,1),}},
{88,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={86},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{89,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={86},Position=UDim2.new(0,6,0,5),Size=UDim2.new(0,5,0,1),}},
{90,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="Down",Parent={84},Position=UDim2.new(0,0,0,8),Size=UDim2.new(1,0,0,8),Text="",TextSize=14,}},
{91,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={90},Size=UDim2.new(0,16,0,8),}},
{92,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={91},Position=UDim2.new(0,8,0,5),Size=UDim2.new(0,1,0,1),}},
{93,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={91},Position=UDim2.new(0,7,0,4),Size=UDim2.new(0,3,0,1),}},
{94,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={91},Position=UDim2.new(0,6,0,3),Size=UDim2.new(0,5,0,1),}},
{95,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={82},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Val:",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{96,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Font=3,Name="Cancel",Parent={1},Position=UDim2.new(1,-105,1,-28),Size=UDim2.new(0,100,0,25),Text="Cancel",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
{97,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Font=3,Name="Ok",Parent={1},Position=UDim2.new(1,-210,1,-28),Size=UDim2.new(0,100,0,25),Text="OK",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
{98,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Image="rbxassetid://1072518502",Name="ColorStrip",Parent={1},Position=UDim2.new(1,-30,0,5),Size=UDim2.new(0,13,0,200),}},
{99,"Frame",{BackgroundColor3=Color3.new(0.3137255012989,0.3137255012989,0.3137255012989),BackgroundTransparency=1,BorderSizePixel=0,Name="ArrowFrame",Parent={1},Position=UDim2.new(1,-16,0,1),Size=UDim2.new(0,5,0,208),}},
{100,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={99},Position=UDim2.new(0,-2,0,-4),Size=UDim2.new(0,8,0,16),}},
{101,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Parent={100},Position=UDim2.new(0,2,0,8),Size=UDim2.new(0,1,0,1),}},
{102,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Parent={100},Position=UDim2.new(0,3,0,7),Size=UDim2.new(0,1,0,3),}},
{103,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Parent={100},Position=UDim2.new(0,4,0,6),Size=UDim2.new(0,1,0,5),}},
{104,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Parent={100},Position=UDim2.new(0,5,0,5),Size=UDim2.new(0,1,0,7),}},
{105,"Frame",{BackgroundColor3=Color3.new(0,0,0),BorderSizePixel=0,Parent={100},Position=UDim2.new(0,6,0,4),Size=UDim2.new(0,1,0,9),}},
}
local ax=ap.Window.new()
ax.Resizable=false
ax.Alignable=false
ax:SetTitle"Color Picker"
ax:Resize(450,330)
for az,aA in pairs(aw:GetChildren())do
aA.Parent=ax.GuiElems.Content
end
au.Window=ax
au.Gui=ax.Gui
local az=ax.Gui.Main
local aA=az.TopBar
local aB=az.Content
local aC=aB.ColorSpaceFrame.ColorSpace
local aD=aB.ColorStrip
local aE=aB.Preview
local aF=aB.BasicColors
local aG=aB.CustomColors
local aH=aB.Ok
local g=aB.Cancel local h=
aA.Close

local i=aC.Scope
local j=aB.ArrowFrame.Arrow

local k=aB.Hue.Input
local l=aB.Sat.Input
local m=aB.Val.Input

local n=aB.Red.Input
local o=aB.Green.Input
local p=aB.Blue.Input

local q=al.UserInputService
local r=al.Players.LocalPlayer:GetMouse()

local s,t,u=0,0,1
local v,w,x=1,1,1
local y=Color3.new(0,0,0)

local z={Color3.new(0,0,0),Color3.new(0.66666668653488,0,0),Color3.new(0,0.33333334326744,0),Color3.new(0.66666668653488,0.33333334326744,0),Color3.new(0,0.66666668653488,0),Color3.new(0.66666668653488,0.66666668653488,0),Color3.new(0,1,0),Color3.new(0.66666668653488,1,0),Color3.new(0,0,0.49803924560547),Color3.new(0.66666668653488,0,0.49803924560547),Color3.new(0,0.33333334326744,0.49803924560547),Color3.new(0.66666668653488,0.33333334326744,0.49803924560547),Color3.new(0,0.66666668653488,0.49803924560547),Color3.new(0.66666668653488,0.66666668653488,0.49803924560547),Color3.new(0,1,0.49803924560547),Color3.new(0.66666668653488,1,0.49803924560547),Color3.new(0,0,1),Color3.new(0.66666668653488,0,1),Color3.new(0,0.33333334326744,1),Color3.new(0.66666668653488,0.33333334326744,1),Color3.new(0,0.66666668653488,1),Color3.new(0.66666668653488,0.66666668653488,1),Color3.new(0,1,1),Color3.new(0.66666668653488,1,1),Color3.new(0.33333334326744,0,0),Color3.new(1,0,0),Color3.new(0.33333334326744,0.33333334326744,0),Color3.new(1,0.33333334326744,0),Color3.new(0.33333334326744,0.66666668653488,0),Color3.new(1,0.66666668653488,0),Color3.new(0.33333334326744,1,0),Color3.new(1,1,0),Color3.new(0.33333334326744,0,0.49803924560547),Color3.new(1,0,0.49803924560547),Color3.new(0.33333334326744,0.33333334326744,0.49803924560547),Color3.new(1,0.33333334326744,0.49803924560547),Color3.new(0.33333334326744,0.66666668653488,0.49803924560547),Color3.new(1,0.66666668653488,0.49803924560547),Color3.new(0.33333334326744,1,0.49803924560547),Color3.new(1,1,0.49803924560547),Color3.new(0.33333334326744,0,1),Color3.new(1,0,1),Color3.new(0.33333334326744,0.33333334326744,1),Color3.new(1,0.33333334326744,1),Color3.new(0.33333334326744,0.66666668653488,1),Color3.new(1,0.66666668653488,1),Color3.new(0.33333334326744,1,1),Color3.new(1,1,1)}
local A={}

local function updateColor(B)
local C,D,E=219-s*219,199-t*199,199-u*199
Color3.fromHSV(s,t,u)

if B==2 or not B then
k.Text=tostring(math.ceil(359*s))
l.Text=tostring(math.ceil(255*t))
m.Text=tostring(math.floor(255*u))
end
if B==1 or not B then
n.Text=tostring(math.floor(255*v))
o.Text=tostring(math.floor(255*w))
p.Text=tostring(math.floor(255*x))
end

y=Color3.new(v,w,x)
i.Position=UDim2.new(0,(C-9),0,(D-9))
aD.ImageColor3=Color3.fromHSV(s,t,1)
j.Position=UDim2.new(0,-2,0,(E-4))
aE.BackgroundColor3=y

au.Color=y
au.OnPreview:Fire(y)
end

local function handleInputBegan(B,C)
if B.UserInputType==Enum.UserInputType.MouseButton1 or B.UserInputType==Enum.UserInputType.Touch then
while q:IsMouseButtonPressed(Enum.UserInputType.MouseButton1)do
C()task.wait()
end
end
end

local function colorSpaceInput()
local B=r.X-aC.AbsolutePosition.X
local C=r.Y-aC.AbsolutePosition.Y

if B<0 then B=0 elseif B>219 then B=219 end
if C<0 then C=0 elseif C>199 then C=199 end

s=(219-B)/219
t=(199-C)/199

local D=Color3.fromHSV(s,t,u)
v,w,x=D.R,D.G,D.B
updateColor()
end

local function colorStripInput()
local B=r.Y-aD.AbsolutePosition.Y

if B<0 then B=0 elseif B>199 then B=199 end

u=(199-B)/199

local C=Color3.fromHSV(s,t,u)
v,w,x=C.R,C.G,C.B
updateColor()
end

aC.InputBegan:Connect(function(B)handleInputBegan(B,colorSpaceInput)end)
aD.InputBegan:Connect(function(B)handleInputBegan(B,colorStripInput)end)

local function hookButtons(B,C)
B.ArrowFrame.Up.InputBegan:Connect(function(D)
if D.UserInputType==Enum.UserInputType.MouseButton1 or D.UserInputType==Enum.UserInputType.Touch then

local E=tick()
local F=true
local G=tonumber(B.Text)

if not G then return end

releaseEvent=q.InputEnded:Connect(function(H)
if H.UserInputType==Enum.UserInputType.MouseButton1 or H.UserInputType==Enum.UserInputType.Touch then
releaseEvent:Disconnect()
F=false
end
end)

G=G+1
C(G)
while F do
if tick()-E>0.3 then
G=G+1
C(G)
E=tick()
end
task.wait(0.1)
end
end
end)

B.ArrowFrame.Down.InputBegan:Connect(function(D)
if D.UserInputType==Enum.UserInputType.MouseButton1 or D.UserInputType==Enum.UserInputType.Touch then

local E=tick()
local F=true
local G=tonumber(B.Text)

if not G then return end

releaseEvent=q.InputEnded:Connect(function(H)
if H.UserInputType==Enum.UserInputType.MouseButton1 or H.UserInputType==Enum.UserInputType.Touch then
releaseEvent:Disconnect()
F=false
end
end)

G=G-1
C(G)
while F do
if tick()-E>0.3 then
G=G-1
C(G)
E=tick()
end
task.wait(0.1)
end
end
end)
end













local function updateHue(B)
local C=tonumber(B)
if C then
s=math.clamp(math.floor(C),0,359)/359
local D=Color3.fromHSV(s,t,u)
v,w,x=D.r,D.g,D.b

k.Text=tostring(s*359)
updateColor(1)
end
end
k.FocusLost:Connect(function()updateHue(k.Text)end)hookButtons(k,k)

local function updateSat(B)
local C=tonumber(B)
if C then
t=math.clamp(math.floor(C),0,255)/255
local D=Color3.fromHSV(s,t,u)
v,w,x=D.r,D.g,D.b
l.Text=tostring(t*255)
updateColor(1)
end
end
l.FocusLost:Connect(function()updateSat(l.Text)end)hookButtons(l,updateSat)

local function updateVal(B)
local C=tonumber(B)
if C then
u=math.clamp(math.floor(C),0,255)/255
local D=Color3.fromHSV(s,t,u)
v,w,x=D.r,D.g,D.b
m.Text=tostring(u*255)
updateColor(1)
end
end
m.FocusLost:Connect(function()updateVal(m.Text)end)hookButtons(m,updateVal)

local function updateRed(B)
local C=tonumber(B)
if C then
v=math.clamp(math.floor(C),0,255)/255
local D=Color3.new(v,w,x)
s,t,u=Color3.toHSV(D)
n.Text=tostring(v*255)
updateColor(2)
end
end
n.FocusLost:Connect(function()updateRed(n.Text)end)hookButtons(n,updateRed)

local function updateGreen(B)
local C=tonumber(B)
if C then
w=math.clamp(math.floor(C),0,255)/255
local D=Color3.new(v,w,x)
s,t,u=Color3.toHSV(D)
o.Text=tostring(w*255)
updateColor(2)
end
end
o.FocusLost:Connect(function()updateGreen(o.Text)end)hookButtons(o,updateGreen)

local function updateBlue(B)
local C=tonumber(B)
if C then
x=math.clamp(math.floor(C),0,255)/255
local D=Color3.new(v,w,x)
s,t,u=Color3.toHSV(D)
p.Text=tostring(x*255)
updateColor(2)
end
end
p.FocusLost:Connect(function()updateBlue(p.Text)end)hookButtons(p,updateBlue)

local B=Instance.new"TextButton"
B.Name="Choice"
B.Size=UDim2.new(0,25,0,18)
B.BorderColor3=Color3.fromRGB(55,55,55)
B.Text=""
B.AutoButtonColor=false

local C=0
local D=0
for E,F in pairs(z)do
local G=B:Clone()
G.BackgroundColor3=F
G.Position=UDim2.new(0,1+30*D,0,21+23*C)

G.MouseButton1Click:Connect(function()
v,w,x=F.r,F.g,F.b
local H=Color3.new(v,w,x)
s,t,u=Color3.toHSV(H)
updateColor()
end)

G.Parent=aF
D=D+1
if D==6 then C=C+1 D=0 end
end

C=0
D=0
for E=1,12 do
local F=A[E]or Color3.new(0,0,0)
local G=B:Clone()
G.BackgroundColor3=F
G.Position=UDim2.new(0,1+30*D,0,20+23*C)

G.MouseButton1Click:Connect(function()
local H=A[E]or Color3.new(0,0,0)
v,w,x=H.r,H.g,H.b
s,t,u=Color3.toHSV(H)
updateColor()
end)

G.MouseButton2Click:Connect(function()
A[E]=y
G.BackgroundColor3=y
end)

G.Parent=aG
D=D+1
if D==6 then C=C+1 D=0 end
end

aH.MouseButton1Click:Connect(function()au.OnSelect:Fire(y)ax:Close()end)
aH.InputBegan:Connect(function(E)if E.UserInputType==Enum.UserInputType.MouseMovement or E.UserInputType==Enum.UserInputType.Touch then aH.BackgroundTransparency=0.4 end end)
aH.InputEnded:Connect(function(E)if E.UserInputType==Enum.UserInputType.MouseMovement or E.UserInputType==Enum.UserInputType.Touch then aH.BackgroundTransparency=0 end end)


g.MouseButton1Click:Connect(function()au.OnCancel:Fire()ax:Close()end)
g.InputBegan:Connect(function(E)if E.UserInputType==Enum.UserInputType.MouseMovement or E.UserInputType==Enum.UserInputType.Touch then g.BackgroundTransparency=0.4 end end)
g.InputEnded:Connect(function(E)if E.UserInputType==Enum.UserInputType.MouseMovement or E.UserInputType==Enum.UserInputType.Touch then g.BackgroundTransparency=0 end end)

updateColor()

au.SetColor=function(E,F)
v,w,x=F.r,F.g,F.b
s,t,u=Color3.toHSV(F)
updateColor()
end

au.Show=function(E)
E.Window:Show()
end

return au
end

return{new=new}
end)()

ap.NumberSequenceEditor=(function()
local function new()
local au=setmetatable({},{})
au.OnSelect=ap.Signal.new()
au.OnCancel=ap.Signal.new()
au.OnPreview=ap.Signal.new()

local aw=an{
{1,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,ClipsDescendants=true,Name="Content",Position=UDim2.new(0,0,0,20),Size=UDim2.new(1,0,1,-20),}},
{2,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Time",Parent={1},Position=UDim2.new(0,40,0,210),Size=UDim2.new(0,60,0,20),}},
{3,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),ClipsDescendants=true,Font=3,Name="Input",Parent={2},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,58,0,20),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{4,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={2},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Time",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{5,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Font=3,Name="Close",Parent={1},Position=UDim2.new(1,-90,0,210),Size=UDim2.new(0,80,0,20),Text="Close",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
{6,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Font=3,Name="Reset",Parent={1},Position=UDim2.new(1,-180,0,210),Size=UDim2.new(0,80,0,20),Text="Reset",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
{7,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Font=3,Name="Delete",Parent={1},Position=UDim2.new(0,380,0,210),Size=UDim2.new(0,80,0,20),Text="Delete",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
{8,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Name="NumberLineOutlines",Parent={1},Position=UDim2.new(0,10,0,20),Size=UDim2.new(1,-20,0,170),}},
{9,"Frame",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),Name="NumberLine",Parent={1},Position=UDim2.new(0,10,0,20),Size=UDim2.new(1,-20,0,170),}},
{10,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Value",Parent={1},Position=UDim2.new(0,170,0,210),Size=UDim2.new(0,60,0,20),}},
{11,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={10},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Value",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{12,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),ClipsDescendants=true,Font=3,Name="Input",Parent={10},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,58,0,20),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{13,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Envelope",Parent={1},Position=UDim2.new(0,300,0,210),Size=UDim2.new(0,60,0,20),}},
{14,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),ClipsDescendants=true,Font=3,Name="Input",Parent={13},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,58,0,20),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{15,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={13},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Envelope",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
}
local ax=ap.Window.new()
ax.Resizable=false
ax:Resize(680,265)
ax:SetTitle"NumberSequence Editor"
au.Window=ax
au.Gui=ax.Gui
for az,aA in pairs(aw:GetChildren())do
aA.Parent=ax.GuiElems.Content
end
local az=ax.Gui
local aA=az.Main
local aB=aA.TopBar
local aC=aA.Content
local aD=aC.NumberLine
local aE=aC.NumberLineOutlines
local aF=aC.Time.Input
local aG=aC.Value.Input
local aH=aC.Envelope.Input
local g=aC.Delete
local h=aC.Reset
local i=aC.Close local j=
aB.Close

local k={{1,0,3},{8,0.05,1},{5,0.6,2},{4,0.7,4},{6,1,4}}
local l={}
local m={}
local n=k[1]
local o=k[#k]
local p
local q
local r

local s=al.UserInputService
local t=al.Players.LocalPlayer:GetMouse()

for u=2,10 do
local v=Instance.new"Frame"
v.BackgroundTransparency=0.5
v.BackgroundColor3=Color3.new(0.3764705882352941,0.3764705882352941,0.3764705882352941)
v.BorderSizePixel=0
v.Size=UDim2.new(0,1,1,0)
v.Position=UDim2.new((u-1)/(10),0,0,0)
v.Parent=aE
end

for u=2,4 do
local v=Instance.new"Frame"
v.BackgroundTransparency=0.5
v.BackgroundColor3=Color3.new(0.3764705882352941,0.3764705882352941,0.3764705882352941)
v.BorderSizePixel=0
v.Size=UDim2.new(1,0,0,1)
v.Position=UDim2.new(0,0,(u-1)/(4),0)
v.Parent=aE
end

local u=Instance.new"Frame"
u.BackgroundColor3=Color3.new(0,0,0)
u.BorderSizePixel=0
u.Size=UDim2.new(0,1,0,1)

local v=Instance.new"Frame"
v.BackgroundColor3=Color3.new(0,0,0)
v.BorderSizePixel=0
v.Size=UDim2.new(0,1,0,0)

for w=1,aD.AbsoluteSize.X do
local x=v:Clone()
m[w]=x
x.Name="E"..tostring(w)
x.BackgroundTransparency=0.5
x.BackgroundColor3=Color3.new(0.7803921568627451,0.17254901960784313,0.10980392156862745)
x.Position=UDim2.new(0,w-1,0,0)
x.Parent=aD
end

for w=1,aD.AbsoluteSize.X do
local x=v:Clone()
l[w]=x
x.Name=tostring(w)
x.Position=UDim2.new(0,w-1,0,0)
x.Parent=aD
end

local w=Instance.new"Frame"
w.BackgroundTransparency=1
w.BackgroundColor3=Color3.new(0,0,0)
w.BorderSizePixel=0
w.Size=UDim2.new(0,7,0,20)
w.Visible=false
w.ZIndex=2
local x=Instance.new("Frame",w)
x.Name="Line"
x.BackgroundColor3=Color3.new(0,0,0)
x.BorderSizePixel=0
x.Position=UDim2.new(0,3,0,0)
x.Size=UDim2.new(0,1,0,20)
x.ZIndex=2

local y,z=w:Clone(),w:Clone()
y.Parent=aD
z.Parent=aD

local function buildSequence()
local A={}
for B,C in pairs(k)do
table.insert(A,NumberSequenceKeypoint.new(C[2],C[1],C[3]))
end
au.Sequence=NumberSequence.new(A)
au.OnSelect:Fire(au.Sequence)
end

local function round(A,B)
local C=10^B
return math.floor(A*C+0.5)/C
end

local function updateInputs(A)
if A then
q=A
local B,C,D=A[2],A[1],A[3]
aF.Text=round(B,(B<0.01 and 5)or(B<0.1 and 4)or 3)
aG.Text=round(C,(C<0.01 and 5)or(C<0.1 and 4)or(C<1 and 3)or 2)
aH.Text=round(D,(D<0.01 and 5)or(D<0.1 and 4)or(C<1 and 3)or 2)

local E=aD.AbsoluteSize.Y*(A[3]/10)
y.Position=UDim2.new(0,A[4].Position.X.Offset-1,0,A[4].Position.Y.Offset-E-17)
y.Visible=true
z.Position=UDim2.new(0,A[4].Position.X.Offset-1,0,A[4].Position.Y.Offset+E+2)
z.Visible=true
end
end

y.InputBegan:Connect(function(A)
if(A.UserInputType~=Enum.UserInputType.MouseButton1 and A.UserInputType~=Enum.UserInputType.Touch)or not q or ap.CheckMouseInGui(q[4].Select)then return end

local B,C
local D=aD.AbsoluteSize.Y
local E=math.abs(y.AbsolutePosition.Y-t.Y)

y.Line.Position=UDim2.new(0,2,0,0)
y.Line.Size=UDim2.new(0,3,0,20)

C=s.InputEnded:Connect(function(F)
if F.UserInputType~=Enum.UserInputType.MouseButton1 and F.UserInputType~=Enum.UserInputType.Touch then return end
B:Disconnect()
C:Disconnect()
y.Line.Position=UDim2.new(0,3,0,0)
y.Line.Size=UDim2.new(0,1,0,20)
end)

B=s.InputChanged:Connect(function(F)
if F.UserInputType==Enum.UserInputType.MouseMovement or F.UserInputType==Enum.UserInputType.Touch then
local G=(q[4].AbsolutePosition.Y+2)-(t.Y-E)-19
local H=10*(math.max(G,0)/D)
local I=math.min(q[1],10-q[1])
q[3]=math.min(H,I)
au:Redraw()
buildSequence()
updateInputs(q)
end
end)
end)

z.InputBegan:Connect(function(A)
if(A.UserInputType~=Enum.UserInputType.MouseButton1 and A.UserInputType~=Enum.UserInputType.Touch)or not q or ap.CheckMouseInGui(q[4].Select)then return end

local B,C
local D=aD.AbsoluteSize.Y
local E=math.abs(z.AbsolutePosition.Y-t.Y)

z.Line.Position=UDim2.new(0,2,0,0)
z.Line.Size=UDim2.new(0,3,0,20)

C=s.InputEnded:Connect(function(F)
if F.UserInputType~=Enum.UserInputType.MouseButton1 and F.UserInputType~=Enum.UserInputType.Touch then return end
B:Disconnect()
C:Disconnect()
z.Line.Position=UDim2.new(0,3,0,0)
z.Line.Size=UDim2.new(0,1,0,20)
end)

B=s.InputChanged:Connect(function(F)
if F.UserInputType==Enum.UserInputType.MouseMovement or F.UserInputType==Enum.UserInputType.Touch then
local G=(t.Y+(20-E))-(q[4].AbsolutePosition.Y+2)-19
local H=10*(math.max(G,0)/D)
local I=math.min(q[1],10-q[1])
q[3]=math.min(H,I)
au:Redraw()
buildSequence()
updateInputs(q)
end
end)
end)

local function placePoint(A)
local B=Instance.new"Frame"
B.Name="Point"
B.BorderSizePixel=0
B.Size=UDim2.new(0,5,0,5)
B.Position=UDim2.new(0,math.floor((aD.AbsoluteSize.X-1)*A[2])-2,0,aD.AbsoluteSize.Y*(10-A[1])/10-2)
B.BackgroundColor3=Color3.new(0,0,0)

local C=Instance.new"Frame"
C.Name="Select"
C.BackgroundTransparency=1
C.BackgroundColor3=Color3.new(0.7803921568627451,0.17254901960784313,0.10980392156862745)
C.Position=UDim2.new(0,-2,0,-2)
C.Size=UDim2.new(0,9,0,9)
C.Parent=B

B.Parent=aD


C.InputBegan:Connect(function(D)
if D.UserInputType==Enum.UserInputType.MouseMovement or D.UserInputType==Enum.UserInputType.Touch then
for E,F in pairs(k)do
F[4].Select.BackgroundTransparency=1
end

C.BackgroundTransparency=0
updateInputs(A)
end

if(D.UserInputType==Enum.UserInputType.MouseButton1 or D.UserInputType==Enum.UserInputType.Touch)and not p then
q=A
local E,F
p=true
C.BackgroundColor3=Color3.new(0.9764705882352941,0.7490196078431373,0.23137254901960785)

local G=A[3]

F=s.InputEnded:Connect(function(H)
if H.UserInputType~=Enum.UserInputType.MouseButton1 and H.UserInputType~=Enum.UserInputType.Touch then return end

E:Disconnect()
F:Disconnect()
p=nil
C.BackgroundColor3=Color3.new(0.7803921568627451,0.17254901960784313,0.10980392156862745)
end)

E=s.InputChanged:Connect(function(H)
if H.UserInputType==Enum.UserInputType.MouseMovement or H.UserInputType==Enum.UserInputType.Touch then
local I=aD.AbsoluteSize.X-1
local J=(H.Position.X-aD.AbsolutePosition.X)
if J<0 then J=0 end
if J>I then J=I end

local K=aD.AbsoluteSize.Y-1
local L=(H.Position.Y-aD.AbsolutePosition.Y)
if L<0 then L=0 end
if L>K then L=K end

if A~=n and A~=o then
A[2]=J/I
end

A[1]=10-(L/K)*10
local M=math.min(A[1],10-A[1])
A[3]=math.min(G,M)
au:Redraw()
updateInputs(A)

for N,O in pairs(k)do
O[4].Select.BackgroundTransparency=1
end

C.BackgroundTransparency=0
buildSequence()
end
end)
end
end)

return B
end

local function placePoints()
for A,B in pairs(k)do
B[4]=placePoint(B)
end
end

local function redraw(A)
local B=aD.AbsoluteSize
table.sort(k,function(C,D)return C[2]<D[2]end)
for C,D in pairs(k)do
D[4].Position=UDim2.new(0,math.floor((B.X-1)*D[2])-2,0,(B.Y-1)*(10-D[1])/10-2)
end
l[1].Size=UDim2.new(0,1,0,0)
for C=1,#k-1 do
local D=k[C]
local E=k[C+1]
local F=E[4].Position.Y.Offset-D[4].Position.Y.Offset
local G=E[4].Position.X.Offset-D[4].Position.X.Offset
local H=F/G

local I=D[3]
local J=E[3]

local K=math.abs(H)
local L=0
local M=math.abs(E[4].Position.Y.Offset-D[4].Position.Y.Offset)

for N=math.min(D[4].Position.X.Offset+1,E[4].Position.X.Offset),E[4].Position.X.Offset do
if G==0 and F==0 then return end
local O=math.floor(K)
local P=l[N+3]
if P then
if L+O>M then O=M-L end
if math.sign(H)==-1 then
P.Position=UDim2.new(0,N+2,0,D[4].Position.Y.Offset+-(L+O)+2)
else
P.Position=UDim2.new(0,N+2,0,D[4].Position.Y.Offset+L+2)
end
P.Size=UDim2.new(0,1,0,math.max(O,1))
end
L=L+O
K=K-O+math.abs(H)

local Q=(N-D[4].Position.X.Offset)/(E[4].Position.X.Offset-D[4].Position.X.Offset)
local R=I+(J-I)*Q
local S=(R/10)*B.Y

local T=m[N+3]
if T then
T.Position=UDim2.new(0,N+2,0,l[N+3].Position.Y.Offset-math.floor(S))
T.Size=UDim2.new(0,1,0,math.floor(S*2))
end
end
end
end
au.Redraw=redraw



local function loadSequence(A,B)
r=B
for C,D in pairs(k)do if D[4]then D[4]:Destroy()end end
k={}
for C,D in pairs(B.Keypoints)do
local E=math.min(D.Value,10-D.Value)
local F={D.Value,D.Time,math.min(D.Envelope,E)}
F[4]=placePoint(F)
table.insert(k,F)
end
n=k[1]
o=k[#k]
p=nil
redraw()
y.Visible=false
z.Visible=false
end
au.SetSequence=loadSequence

aF.FocusLost:Connect(function()
local A=q
local B=tonumber(aF.Text)
if A and B and A~=n and A~=o then
B=math.clamp(B,0,1)
A[2]=B
redraw()
buildSequence()
updateInputs(A)
end
end)

aG.FocusLost:Connect(function()
local A=q
local B=tonumber(aG.Text)
if A and B then
local C=A[3]
B=math.clamp(B,0,10)
A[1]=B
local D=math.min(A[1],10-A[1])
A[3]=math.min(C,D)
redraw()
buildSequence()
updateInputs(A)
end
end)

aH.FocusLost:Connect(function()
local A=q
local B=tonumber(aH.Text)
if A and B then
B=math.clamp(B,0,5)
local C=math.min(A[1],10-A[1])
A[3]=math.min(B,C)
redraw()
buildSequence()
updateInputs(A)
end
end)

local function buttonAnimations(A,B)
A.InputBegan:Connect(function(C)if C.UserInputType==Enum.UserInputType.MouseMovement or C.UserInputType==Enum.UserInputType.Touch then A.BackgroundTransparency=(B and 0.5 or 0.4)end end)
A.InputEnded:Connect(function(C)if C.UserInputType==Enum.UserInputType.MouseMovement or C.UserInputType==Enum.UserInputType.Touch then A.BackgroundTransparency=(B and 1 or 0)end end)
end

aD.InputBegan:Connect(function(A)
if(A.UserInputType==Enum.UserInputType.MouseButton1 or A.UserInputType==Enum.UserInputType.Touch)and#k<20 then

if ap.CheckMouseInGui(y)or ap.CheckMouseInGui(z)then return end

for B,C in pairs(k)do
if ap.CheckMouseInGui(C[4].Select)then
return
end
end

local B=aD.AbsoluteSize.X-1
local C=(A.Position.X-aD.AbsolutePosition.X)
if C<0 then C=0 end
if C>B then C=B end

local D=aD.AbsoluteSize.Y-1
local E=(A.Position.Y-aD.AbsolutePosition.Y)
if E<0 then E=0 end
if E>D then E=D end

local F=C/B
local G={10-(E/D)*10,F,0}
G[4]=placePoint(G)
table.insert(k,G)
redraw()
buildSequence()
end
end)

g.MouseButton1Click:Connect(function()
if q and q~=n and q~=o then
for A,B in pairs(k)do
if B==q then
B[4]:Destroy()
table.remove(k,A)
break
end
end
p=nil
redraw()
buildSequence()
updateInputs(k[1])
end
end)

h.MouseButton1Click:Connect(function()
if r then
au:SetSequence(r)
buildSequence()
end
end)

i.MouseButton1Click:Connect(function()
ax:Close()
end)

buttonAnimations(g)
buttonAnimations(h)
buttonAnimations(i)

placePoints()
redraw()

au.Show=function(A)
ax:Show()
end

return au
end

return{new=new}
end)()

ap.ColorSequenceEditor=(function()
local function new()
local au=setmetatable({},{})
au.OnSelect=ap.Signal.new()
au.OnCancel=ap.Signal.new()
au.OnPreview=ap.Signal.new()
au.OnPickColor=ap.Signal.new()

local aw=an{
{1,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,ClipsDescendants=true,Name="Content",Position=UDim2.new(0,0,0,20),Size=UDim2.new(1,0,1,-20),}},
{2,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Name="ColorLine",Parent={1},Position=UDim2.new(0,10,0,5),Size=UDim2.new(1,-20,0,70),}},
{3,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderSizePixel=0,Name="Gradient",Parent={2},Size=UDim2.new(1,0,1,0),}},
{4,"UIGradient",{Parent={3},}},
{5,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Name="Arrows",Parent={1},Position=UDim2.new(0,1,0,73),Size=UDim2.new(1,-2,0,16),}},
{6,"Frame",{BackgroundColor3=Color3.new(0,0,0),BackgroundTransparency=0.5,BorderSizePixel=0,Name="Cursor",Parent={1},Position=UDim2.new(0,10,0,0),Size=UDim2.new(0,1,0,80),}},
{7,"Frame",{BackgroundColor3=Color3.new(0.14901961386204,0.14901961386204,0.14901961386204),BorderColor3=Color3.new(0.12549020349979,0.12549020349979,0.12549020349979),Name="Time",Parent={1},Position=UDim2.new(0,40,0,95),Size=UDim2.new(0,100,0,20),}},
{8,"TextBox",{BackgroundColor3=Color3.new(0.25098040699959,0.25098040699959,0.25098040699959),BackgroundTransparency=1,BorderColor3=Color3.new(0.37647062540054,0.37647062540054,0.37647062540054),ClipsDescendants=true,Font=3,Name="Input",Parent={7},Position=UDim2.new(0,2,0,0),Size=UDim2.new(0,98,0,20),Text="0",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=0,}},
{9,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={7},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Time",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{10,"Frame",{BackgroundColor3=Color3.new(1,1,1),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),Name="ColorBox",Parent={1},Position=UDim2.new(0,220,0,95),Size=UDim2.new(0,20,0,20),}},
{11,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Title",Parent={10},Position=UDim2.new(0,-40,0,0),Size=UDim2.new(0,34,1,0),Text="Color",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,TextXAlignment=1,}},
{12,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),BorderSizePixel=0,Font=3,Name="Close",Parent={1},Position=UDim2.new(1,-90,0,95),Size=UDim2.new(0,80,0,20),Text="Close",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
{13,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),BorderSizePixel=0,Font=3,Name="Reset",Parent={1},Position=UDim2.new(1,-180,0,95),Size=UDim2.new(0,80,0,20),Text="Reset",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
{14,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderColor3=Color3.new(0.21568627655506,0.21568627655506,0.21568627655506),BorderSizePixel=0,Font=3,Name="Delete",Parent={1},Position=UDim2.new(0,280,0,95),Size=UDim2.new(0,80,0,20),Text="Delete",TextColor3=Color3.new(0.86274516582489,0.86274516582489,0.86274516582489),TextSize=14,}},
{15,"Frame",{BackgroundTransparency=1,Name="Arrow",Parent={1},Size=UDim2.new(0,16,0,16),Visible=false,}},
{16,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={15},Position=UDim2.new(0,8,0,3),Size=UDim2.new(0,1,0,2),}},
{17,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={15},Position=UDim2.new(0,7,0,5),Size=UDim2.new(0,3,0,2),}},
{18,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={15},Position=UDim2.new(0,6,0,7),Size=UDim2.new(0,5,0,2),}},
{19,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={15},Position=UDim2.new(0,5,0,9),Size=UDim2.new(0,7,0,2),}},
{20,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={15},Position=UDim2.new(0,4,0,11),Size=UDim2.new(0,9,0,2),}},
}
local ax=ap.Window.new()
ax.Resizable=false
ax:Resize(650,150)
ax:SetTitle"ColorSequence Editor"
au.Window=ax
au.Gui=ax.Gui
for az,aA in pairs(aw:GetChildren())do
aA.Parent=ax.GuiElems.Content
end
local az=ax.Gui
local aA=az.Main
local aB=aA.TopBar
local aC=aA.Content
local aD=aC.ColorLine
local aE=aD.Gradient.UIGradient
local aF=aC.Arrows
local aG=aC.Arrow
local aH=aC.Cursor
local g=aC.Time.Input
local h=aC.ColorBox
local i=aC.Delete
local j=aC.Reset
local k=aC.Close
local l=aB.Close

local m=al.UserInputService
al.Players.LocalPlayer:GetMouse()

local n={{Color3.new(1,0,1),0},{Color3.new(0.2,0.9,0.2),0.2},{Color3.new(0.4,0.5,0.9),0.7},{Color3.new(0.6,1,1),1}}
local o

local p=n[1]
local q=n[#n]

local r
local s

local t=Instance.new"Frame"
t.BorderSizePixel=0
t.Size=UDim2.new(0,1,1,0)

au.Sequence=ColorSequence.new(Color3.new(1,1,1))
local function buildSequence(u)
local v={}
table.sort(n,function(w,x)return w[2]<x[2]end)
for w,x in pairs(n)do
table.insert(v,ColorSequenceKeypoint.new(x[2],x[1]))
end
au.Sequence=ColorSequence.new(v)
if not u then au.OnSelect:Fire(au.Sequence)end
end

local function round(u,v)
local w=10^v
return math.floor(u*w+0.5)/w
end

local function updateInputs(u)
if u then
s=u
local v=u[2]
g.Text=round(v,(v<0.01 and 5)or(v<0.1 and 4)or 3)
h.BackgroundColor3=u[1]
end
end

local function placeArrow(u,v)
local w=aG:Clone()
w.Position=UDim2.new(0,u-1,0,0)
w.Visible=true
w.Parent=aF

w.InputBegan:Connect(function(x)
if x.UserInputType==Enum.UserInputType.MouseMovement or x.UserInputType==Enum.UserInputType.Touch then
aH.Visible=true
aH.Position=UDim2.new(0,9+w.Position.X.Offset,0,0)
end

if x.UserInputType==Enum.UserInputType.MouseButton1 or x.UserInputType==Enum.UserInputType.Touch then
updateInputs(v)
if v==p or v==q or r then return end

local y,z
r=true

z=m.InputEnded:Connect(function(A)
if A.UserInputType~=Enum.UserInputType.MouseButton1 and A.UserInputType~=Enum.UserInputType.Touch then return end
y:Disconnect()
z:Disconnect()
r=nil
aH.Visible=false
end)

y=m.InputChanged:Connect(function(A)
if A.UserInputType==Enum.UserInputType.MouseMovement or A.UserInputType==Enum.UserInputType.Touch then
local B=aD.AbsoluteSize.X-1
local C=(A.Position.X-aD.AbsolutePosition.X)
if C<0 then C=0 end
if C>B then C=B end local D=
C/B
v[2]=C/B
updateInputs(v)
aH.Visible=true
aH.Position=UDim2.new(0,9+w.Position.X.Offset,0,0)
buildSequence()
au:Redraw()
end
end)
end
end)

w.InputEnded:Connect(function(x)
if x.UserInputType==Enum.UserInputType.MouseMovement or x.UserInputType==Enum.UserInputType.Touch then
aH.Visible=false
end
end)



return w
end

local function placeArrows()
for u,v in pairs(n)do
v[3]=placeArrow(math.floor((aD.AbsoluteSize.X-1)*v[2])+1,v)
end
end

local function redraw(u)
aE.Color=au.Sequence or ColorSequence.new(Color3.new(1,1,1))

for v=2,#n do
local w=n[v]
local x=math.floor((aD.AbsoluteSize.X-1)*w[2])+1
w[3].Position=UDim2.new(0,x,0,0)
end
end
au.Redraw=redraw

local function loadSequence(u,v)
o=v
for w,x in pairs(n)do if x[3]then x[3]:Destroy()end end
n={}
r=nil
for w,x in pairs(v.Keypoints)do
local y={x.Value,x.Time}
y[3]=placeArrow(x.Time,y)
table.insert(n,y)
end
p=n[1]
q=n[#n]
r=nil
updateInputs(n[1])
buildSequence(true)
redraw()
end
au.SetSequence=loadSequence

local function buttonAnimations(u,v)
u.InputBegan:Connect(function(w)if w.UserInputType==Enum.UserInputType.MouseMovement or w.UserInputType==Enum.UserInputType.Touch then u.BackgroundTransparency=(v and 0.5 or 0.4)end end)
u.InputEnded:Connect(function(w)if w.UserInputType==Enum.UserInputType.MouseMovement or w.UserInputType==Enum.UserInputType.Touch then u.BackgroundTransparency=(v and 1 or 0)end end)
end

aD.InputBegan:Connect(function(u)
if(u.UserInputType==Enum.UserInputType.MouseButton1 or u.UserInputType==Enum.UserInputType.Touch)and#n<20 then
local v=aD.AbsoluteSize.X-1
local w=(u.Position.X-aD.AbsolutePosition.X)
if w<0 then w=0 end
if w>v then w=v end

local x=w/v
local y
local z
for A,B in pairs(n)do
if B[2]>=x then
y=n[math.max(A-1,1)]
z=n[A]
break
end
end
local A=y[1]:lerp(z[1],(x-y[2])/(z[2]-y[2]))
local B={A,x}
B[3]=placeArrow(B[2],B)
table.insert(n,B)
updateInputs(B)
buildSequence()
redraw()
end
end)

aD.InputChanged:Connect(function(u)
if(u.UserInputType==Enum.UserInputType.MouseMovement or u.UserInputType==Enum.UserInputType.Touch)then
local v=aD.AbsoluteSize.X-1
local w=(u.Position.X-aD.AbsolutePosition.X)
if w<0 then w=0 end
if w>v then w=v end
aH.Visible=true
aH.Position=UDim2.new(0,10+w,0,0)
end
end)

aD.InputEnded:Connect(function(u)
if(u.UserInputType==Enum.UserInputType.MouseMovement or u.UserInputType==Enum.UserInputType.Touch)then
local v=false
for w,x in pairs(n)do
if ap.CheckMouseInGui(x[3])then
v=x[3]
end
end
aH.Visible=v and true or false
if v then aH.Position=UDim2.new(0,9+v.Position.X.Offset,0,0)end
end
end)

g:GetPropertyChangedSignal"Text":Connect(function()
local u=s
local v=tonumber(g.Text)
if u and v and u~=p and u~=q then
v=math.clamp(v,0,1)
u[2]=v
buildSequence()
redraw()
end
end)

h.InputBegan:Connect(function(u)
if(u.UserInputType==Enum.UserInputType.MouseButton1 or u.UserInputType==Enum.UserInputType.Touch)then
local v=au.ColorPicker
if not v then
v=ap.ColorPicker.new()
v.Window:SetTitle"ColorSequence Color Picker"

v.OnSelect:Connect(function(w)
if s then
s[1]=w
end
buildSequence()
redraw()
end)

au.ColorPicker=v
end

v.Window:ShowAndFocus()
end
end)

i.MouseButton1Click:Connect(function()
if s and s~=p and s~=q then
for u,v in pairs(n)do
if v==s then
v[3]:Destroy()
table.remove(n,u)
break
end
end
r=nil
updateInputs(n[1])
buildSequence()
redraw()
end
end)

j.MouseButton1Click:Connect(function()
if o then
au:SetSequence(o)
end
end)

k.MouseButton1Click:Connect(function()
ax:Close()
end)

l.MouseButton1Click:Connect(function()
ax:Close()
end)

buttonAnimations(i)
buttonAnimations(j)
buttonAnimations(k)

placeArrows()
redraw()

au.Show=function(u)
ax:Show()
end

return au
end

return{new=new}
end)()

ap.ViewportTextBox=(function()
local au=al.TextService

local aw={
OffsetX=0,
TextBox=as,
CursorPos=-1,
Gui=as,
View=as
}
local ax={}
ax.Update=function(az)
local aA=az.CursorPos or-1
local aB=az.TextBox.Text
if aB==""then az.TextBox.Position=UDim2.new(0,0,0,0)return end
if aA==-1 then return end

local aC=aB:sub(1,aA-1)
local aD
local aE=-az.TextBox.Position.X.Offset
local aF=aE+az.View.AbsoluteSize.X

local aG=au:GetTextSize(aB,az.TextBox.TextSize,az.TextBox.Font,Vector2.new(999999999,100)).X
local aH=au:GetTextSize(aC,az.TextBox.TextSize,az.TextBox.Font,Vector2.new(999999999,100)).X

if aH>aF then
aD=math.max(-1,aH-az.View.AbsoluteSize.X+2)
elseif aH<aE then
aD=math.max(-1,aH-2)
elseif aG<aF then
aD=math.max(-1,aG-az.View.AbsoluteSize.X+2)
end

if aD then
az.TextBox.Position=UDim2.new(0,-aD,0,0)
az.TextBox.Size=UDim2.new(1,aD,1,0)
end
end

ax.GetText=function(az)
return az.TextBox.Text
end

ax.SetText=function(az,aA)
az.TextBox.Text=aA
end

local az=getGuiMT(aw,ax)

local function convert(aA)
local aB=initObj(aw,az)

local aC=Instance.new"Frame"
aC.BackgroundTransparency=aA.BackgroundTransparency
aC.BackgroundColor3=aA.BackgroundColor3
aC.BorderSizePixel=aA.BorderSizePixel
aC.BorderColor3=aA.BorderColor3
aC.Position=aA.Position
aC.Size=aA.Size
aC.ClipsDescendants=true
aC.Name=aA.Name
aA.BackgroundTransparency=1
aA.Position=UDim2.new(0,0,0,0)
aA.Size=UDim2.new(1,0,1,0)
aA.TextXAlignment=Enum.TextXAlignment.Left
aA.Name="Input"

aB.TextBox=aA
aB.View=aC
aB.Gui=aC

aA.Changed:Connect(function(aD)
if aD=="Text"or aD=="CursorPosition"or aD=="AbsoluteSize"then
local aE=aB.TextBox.CursorPosition
if aE~=-1 then aB.CursorPos=aE end
aB:Update()
end
end)

aB:Update()

aC.Parent=aA.Parent
aA.Parent=aC

return aB
end

local function new()
local aA=Instance.new"TextBox"
aA.Size=UDim2.new(0,100,0,20)
aA.BackgroundColor3=ad.Theme.TextBox
aA.BorderColor3=ad.Theme.Outline3
aA.ClearTextOnFocus=false
aA.TextColor3=ad.Theme.Text
aA.Font=Enum.Font.SourceSans
aA.TextSize=14
aA.Text=""
return convert(aA)
end

return{new=new,convert=convert}
end)()

ap.Label=(function()
local au,aw={},{}

local ax=getGuiMT(au,aw)

local function new()
local az=Instance.new"TextLabel"
az.BackgroundTransparency=1
az.TextXAlignment=Enum.TextXAlignment.Left
az.TextColor3=ad.Theme.Text
az.TextTransparency=0.1
az.Size=UDim2.new(0,100,0,20)
az.Font=Enum.Font.SourceSans
az.TextSize=14

local aA=setmetatable({
Gui=az
},ax)
return aA
end

return{new=new}
end)()

ap.Frame=(function()
local au,aw={},{}

local ax=getGuiMT(au,aw)

local function new()
local az=Instance.new"Frame"
az.BackgroundColor3=ad.Theme.Main1
az.BorderColor3=ad.Theme.Outline1
az.Size=UDim2.new(0,50,0,50)

local aA=setmetatable({
Gui=az
},ax)
return aA
end

return{new=new}
end)()

ap.Button=(function()
local au={
Gui=as,
Anim=as,
Disabled=false,
OnClick=at,
OnDown=at,
OnUp=at,
AllowedButtons={1}
}
local aw={}
local ax=table.find

aw.Trigger=function(az,aA,aB)
if not az.Disabled and ax(az.AllowedButtons,aB)then
az["On"..aA]:Fire(aB)
end
end

aw.SetDisabled=function(az,aA)
az.Disabled=aA

if aA then
az.Anim:Disable()
az.Gui.TextTransparency=0.5
else
az.Anim.Enable()
az.Gui.TextTransparency=0
end
end

local az=getGuiMT(au,aw)

local function new()
local aA=Instance.new"TextButton"
aA.AutoButtonColor=false
aA.TextColor3=ad.Theme.Text
aA.TextTransparency=0.1
aA.Size=UDim2.new(0,100,0,20)
aA.Font=Enum.Font.SourceSans
aA.TextSize=14
aA.BackgroundColor3=ad.Theme.Button
aA.BorderColor3=ad.Theme.Outline2

local aB=initObj(au,az)
aB.Gui=aA
aB.Anim=ap.ButtonAnim(aA,{Mode=2,StartColor=ad.Theme.Button,HoverColor=ad.Theme.ButtonHover,PressColor=ad.Theme.ButtonPress,OutlineColor=ad.Theme.Outline2})

aA.MouseButton1Click:Connect(function()aB:Trigger("Click",1)end)
aA.MouseButton1Down:Connect(function()aB:Trigger("Down",1)end)
aA.MouseButton1Up:Connect(function()aB:Trigger("Up",1)end)

aA.MouseButton2Click:Connect(function()aB:Trigger("Click",2)end)
aA.MouseButton2Down:Connect(function()aB:Trigger("Down",2)end)
aA.MouseButton2Up:Connect(function()aB:Trigger("Up",2)end)

return aB
end

return{new=new}
end)()

ap.DropDown=(function()
local au={
Gui=as,
Anim=as,
Context=as,
Selected=as,
Disabled=false,
CanBeEmpty=true,
Options={},
GuiElems={},
OnSelect=at
}
local aw={}

aw.Update=function(ax)
local az=ax.Options

if#az>0 then
if not ax.Selected then
if not ax.CanBeEmpty then
ax.Selected=az[1]
ax.GuiElems.Label.Text=az[1]
else
ax.GuiElems.Label.Text="- Select -"
end
else
ax.GuiElems.Label.Text=ax.Selected
end
else
ax.GuiElems.Label.Text="- Select -"
end
end

aw.ShowOptions=function(ax)
local az=ax.Context

az.Width=ax.Gui.AbsoluteSize.X
az.ReverseYOffset=ax.Gui.AbsoluteSize.Y
az:Show(ax.Gui.AbsolutePosition.X,ax.Gui.AbsolutePosition.Y+az.ReverseYOffset)
end

aw.SetOptions=function(ax,az)
ax.Options=az

local aA=ax.Context
local aB=ax.Options
aA:Clear()

local aC=function(aC)ax.Selected=aC ax.OnSelect:Fire(aC)ax:Update()end

if ax.CanBeEmpty then
aA:Add{Name="- Select -",function()ax.Selected=nil ax.OnSelect:Fire(nil)ax:Update()end}
end

for aD=1,#aB do
aA:Add{Name=aB[aD],OnClick=aC}
end

ax:Update()
end

aw.SetSelected=function(ax,az)
ax.Selected=type(az)=="number"and ax.Options[az]or az
ax:Update()
end

local ax=getGuiMT(au,aw)

local function new()
local az=Instance.new"TextButton"
az.AutoButtonColor=false
az.Text=""
az.Size=UDim2.new(0,100,0,20)
az.BackgroundColor3=ad.Theme.TextBox
az.BorderColor3=ad.Theme.Outline3

local aA=ap.Label.new()
aA.Position=UDim2.new(0,2,0,0)
aA.Size=UDim2.new(1,-22,1,0)
aA.TextTruncate=Enum.TextTruncate.AtEnd
aA.Parent=az
local aB=an{
{1,"Frame",{BackgroundTransparency=1,Name="EnumArrow",Position=UDim2.new(1,-16,0,2),Size=UDim2.new(0,16,0,16),}},
{2,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={1},Position=UDim2.new(0,8,0,9),Size=UDim2.new(0,1,0,1),}},
{3,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={1},Position=UDim2.new(0,7,0,8),Size=UDim2.new(0,3,0,1),}},
{4,"Frame",{BackgroundColor3=Color3.new(0.86274510622025,0.86274510622025,0.86274510622025),BorderSizePixel=0,Parent={1},Position=UDim2.new(0,6,0,7),Size=UDim2.new(0,5,0,1),}},
}
aB.Parent=az

local aC=initObj(au,ax)
aC.Gui=az
aC.Anim=ap.ButtonAnim(az,{Mode=2,StartColor=ad.Theme.TextBox,LerpTo=ad.Theme.Button,LerpDelta=0.15})
aC.Context=ap.ContextMenu.new()
aC.Context.Iconless=true
aC.Context.MaxHeight=200
aC.Selected=nil
aC.GuiElems={Label=aA}
az.MouseButton1Down:Connect(function()aC:ShowOptions()end)
aC:Update()
return aC
end

return{new=new}
end)()

ap.ClickSystem=(function()
local au={
LastItem=as,
OnDown=at,
OnRelease=at,
AllowedButtons={1},
Combo=0,
MaxCombo=2,
ComboTime=0.5,
Items={},
ItemCons={},
ClickId=-1,
LastButton=""
}
local aw={}







aw.Trigger=function(ax,az,aA,aB,aC)
if table.find(ax.AllowedButtons,aA)then
if ax.LastButton~=aA or ax.LastItem~=az or ax.Combo==ax.MaxCombo or tick()-ax.ClickId>ax.ComboTime then
ax.Combo=0
ax.LastButton=aA
ax.LastItem=az
end

ax.Combo=ax.Combo+1
ax.ClickId=tick()

task.spawn(function()
if ax.InputDown then
ax.InputDown=false
else
ax.InputDown=tick()

az.MouseButton1Up:Once(function()
ax.InputDown=false
end)

while ax.InputDown and not ae.Dragging do
if(tick()-ax.InputDown)>=0.4 then
ax.InputDown=false
ax.OnRelease:Fire(az,ax.Combo,2,Vector2.new(aB,aC))
break
end;task.wait()
end
end
end)

local aD
aD=al.UserInputService.InputEnded:Connect(function(aE)
if aE.UserInputType==Enum.UserInputType["MouseButton"..aA]then
aD:Disconnect()
if ap.CheckMouseInGui(az)and ax.LastButton==aA and ax.LastItem==az then
ax.OnRelease:Fire(az,ax.Combo,aA)
end
end
end)

ax.OnDown:Fire(az,ax.Combo,aA)
end
end

aw.Add=function(ax,az)
if table.find(ax.Items,az)then return end

local aA={}
aA[1]=az.MouseButton1Down:Connect(function(aB,aC)ax:Trigger(az,1,aB,aC)end)
aA[2]=az.MouseButton2Down:Connect(function(aB,aC)ax:Trigger(az,2,aB,aC)end)

ax.ItemCons[az]=aA
ax.Items[#ax.Items+1]=az
end

aw.Remove=function(ax,az)
local aA=table.find(ax.Items,az)
if not aA then return end

for aB,aC in pairs(ax.ItemCons[az])do
aC:Disconnect()
end
ax.ItemCons[az]=nil
table.remove(ax.Items,aA)
end

local ax={__index=aw}

local function new()
local az=initObj(au,ax)

return az
end

return{new=new}
end)()

return ap
end

return{InitDeps=initDeps,InitAfterMain=initAfterMain,Main=main}
end,
Console=function()




local aa,ab,ac,ad
local ae,af,ag,ah
local ai,aj,ak,al,am,an,ao

local function initDeps(ap)
aa=ap.Main
ab=ap.Lib
ac=ap.Apps
ad=ap.Settings

ai=ap.API
aj=ap.RMD
ak=ap.env
al=ap.service
am=ap.plr
an=ap.create
ao=ap.createSimple
end

local function initAfterMain()
ae=ac.Explorer
af=ac.Properties
ag=ac.ScriptViewer
ah=ac.Notebook
end

local function main()
local ap={}

local aq,ar

local as=500



local at={};


aq=ab.Window.new()
aq:SetTitle"Console"
aq:Resize(500,400)
ap.Window=aq


ar=Instance.new("ImageButton",aq.GuiElems.Content);
ar.BorderSizePixel=0;
ar.AutoButtonColor=false;
ar.BackgroundTransparency=1;
ar.BackgroundColor3=Color3.fromRGB(47,47,47);
ar.Selectable=false;
ar.Size=UDim2.new(1,0,1,0);
ar.BorderColor3=Color3.fromRGB(0,0,0);
ar.Name=[[Console]];
ar.Position=UDim2.new(0,0,0,0);



at["3"]=ab.Frame.new().Gui
at["3"].Parent=ar
at["3"].BorderSizePixel=0;
at["3"].BackgroundColor3=Color3.fromRGB(37,37,37);
at["3"].AnchorPoint=Vector2.new(0.5,1);
at["3"].ClipsDescendants=true;
at["3"].Size=UDim2.new(1,-8,0,22);
at["3"].Position=UDim2.new(0.5,0,1,-5);
at["3"].BorderColor3=Color3.fromRGB(0,0,0);
at["3"].Name=[[CommandLine]];



at["4"]=Instance.new("UIStroke",at["3"]);
at["4"].Transparency=0.65;
at["4"].Thickness=1.25;



at["5"]=Instance.new("ScrollingFrame",at["3"]);
at["5"].Active=true;
at["5"].ScrollingDirection=Enum.ScrollingDirection.X;
at["5"].BorderSizePixel=0;
at["5"].CanvasSize=UDim2.new(0,0,0,0);
at["5"].ElasticBehavior=Enum.ElasticBehavior.Never;
at["5"].TopImage=[[rbxasset://textures/ui/Scroll/scroll-middle.png]];
at["5"].BackgroundColor3=Color3.fromRGB(255,255,255);
at["5"].HorizontalScrollBarInset=Enum.ScrollBarInset.Always;
at["5"].BottomImage=[[rbxasset://textures/ui/Scroll/scroll-middle.png]];
at["5"].AutomaticCanvasSize=Enum.AutomaticSize.X;
at["5"].Size=UDim2.new(1,0,1,0);
at["5"].ScrollBarImageColor3=Color3.fromRGB(57,57,57);
at["5"].BorderColor3=Color3.fromRGB(0,0,0);
at["5"].ScrollBarThickness=2;
at["5"].BackgroundTransparency=1;


at["6"]=Instance.new("TextBox",at["5"]);
at["6"].CursorPosition=-1;
at["6"].TextXAlignment=Enum.TextXAlignment.Left;
at["6"].PlaceholderColor3=Color3.fromRGB(211,211,211);
at["6"].BorderSizePixel=0;
at["6"].TextSize=13;
at["6"].TextColor3=Color3.fromRGB(211,211,211);
at["6"].BackgroundColor3=Color3.fromRGB(255,255,255);
at["6"].FontFace=Font.new([[rbxasset://fonts/families/Inconsolata.json]],Enum.FontWeight.Regular,Enum.FontStyle.Normal);
at["6"].AutomaticSize=Enum.AutomaticSize.X;
at["6"].ClearTextOnFocus=false;
at["6"].PlaceholderText=[[Run a command]];
at["6"].Size=UDim2.new(0,246,0,22);
at["6"].BorderColor3=Color3.fromRGB(0,0,0);
at["6"].Text=[[]];
at["6"].BackgroundTransparency=1;



at["7"]=Instance.new("UIPadding",at["6"]);
at["7"].PaddingLeft=UDim.new(0,7);



at["8"]=Instance.new("TextLabel",at["5"]);
at["8"].Interactable=false;
at["8"].ZIndex=2;
at["8"].BorderSizePixel=0;
at["8"].TextSize=13;
at["8"].TextXAlignment=Enum.TextXAlignment.Left;
at["8"].BackgroundColor3=Color3.fromRGB(255,255,255);
at["8"].FontFace=Font.new([[rbxasset://fonts/families/Inconsolata.json]],Enum.FontWeight.Regular,Enum.FontStyle.Normal);
at["8"].TextColor3=Color3.fromRGB(255,255,255);
at["8"].BackgroundTransparency=1;
at["8"].RichText=true;
at["8"].Size=UDim2.new(0,246,0,22);
at["8"].BorderColor3=Color3.fromRGB(0,0,0);
at["8"].Text=[[]];
at["8"].Selectable=true;
at["8"].AutomaticSize=Enum.AutomaticSize.X;
at["8"].Name=[[Highlight]];



at["9"]=Instance.new("UIPadding",at["8"]);
at["9"].PaddingLeft=UDim.new(0,7);

at.backgroundOutput=Instance.new("Frame",ar);
at.backgroundOutput.BorderSizePixel=0;
at.backgroundOutput.BackgroundColor3=Color3.fromRGB(36,36,36);
at.backgroundOutput.Name=[[BackgroundOutput]];
at.backgroundOutput.AnchorPoint=Vector2.new(0,0);
at.backgroundOutput.Size=UDim2.new(1,-8,1,-55);
at.backgroundOutput.Position=UDim2.new(0,4,0,23);
at.backgroundOutput.BorderColor3=Color3.fromRGB(0,0,0);
at.backgroundOutput.ZIndex=1;

local au=ab.ScrollBar.new()
au.Gui.Parent=ar
au.Gui.Size=UDim2.new(0,16,1,-55);
au.Gui.Position=UDim2.new(1,-20,0,23);
au.Gui.Up.ZIndex=3
au.Gui.Down.ZIndex=3


at.a=Instance.new("ScrollingFrame",ar);
at.a.Active=true;
at.a.BorderSizePixel=0;
at.a.CanvasSize=UDim2.new(0,0,0,0);
at.a.TopImage='';
at.a.BackgroundColor3=Color3.fromRGB(36,36,36);
at.a.BackgroundTransparency=1
at.a.Name=[[Output]];
at.a.ScrollBarImageTransparency=0;
at.a.BottomImage='';
at.a.AnchorPoint=Vector2.new(0,0);
at.a.AutomaticCanvasSize=Enum.AutomaticSize.Y;
at.a.Size=UDim2.new(1,-8,1,-55);
at.a.Position=UDim2.new(0,4,0,23);
at.a.BorderColor3=Color3.fromRGB(0,0,0);
at.a.ScrollBarImageColor3=Color3.fromRGB(70,70,70)
at.a.ScrollBarThickness=16;
at.a.ZIndex=1;

at.a:GetPropertyChangedSignal"AbsoluteWindowSize":Connect(function()
if at.a.AbsoluteCanvasSize~=at.a.AbsoluteWindowSize then
au.Gui.Visible=true
else
au.Gui.Visible=false
end
end)


at.b=Instance.new("UIListLayout",at.a);
at.b.SortOrder=Enum.SortOrder.LayoutOrder;



at.c=Instance.new("UIStroke",at.a);
at.c.Transparency=0.7;
at.c.Thickness=1.25;
at.c.Color=Color3.fromRGB(12,12,12);



at.d=Instance.new("NumberValue",at.a);
at.d.Name=[[OutputTextSize]];
at.d.Value=15;



at.e=Instance.new("NumberValue",at.a);
at.e.Name=[[OutputLimit]];
at.e.Value=as;



at.f=Instance.new("UIPadding",at.a);
at.f.PaddingTop=UDim.new(0,2);



at["10"]=Instance.new("Frame",ar);
at["10"].BorderSizePixel=0;
at["10"].BackgroundColor3=Color3.fromRGB(37,37,37);
at["10"].ClipsDescendants=true;
at["10"].Size=UDim2.new(0,37,0,15);
at["10"].Position=UDim2.new(0,4,0,4);
at["10"].BorderColor3=Color3.fromRGB(0,0,0);
at["10"].Name=[[TextSizeBox]];



at["11"]=Instance.new("TextBox",at["10"]);
at["11"].PlaceholderColor3=Color3.fromRGB(108,108,108);
at["11"].BorderSizePixel=0;
at["11"].TextWrapped=true;
at["11"].TextSize=15;
at["11"].TextColor3=Color3.fromRGB(211,211,211);
at["11"].TextScaled=true;
at["11"].BackgroundColor3=Color3.fromRGB(255,255,255);
at["11"].FontFace=Font.new([[rbxasset://fonts/families/Inconsolata.json]],Enum.FontWeight.Regular,Enum.FontStyle.Normal);
at["11"].PlaceholderText=[[Size]];
at["11"].Size=UDim2.new(1,0,1,0);
at["11"].BorderColor3=Color3.fromRGB(0,0,0);
at["11"].Text=[[]];
at["11"].BackgroundTransparency=1;



at["12"]=Instance.new("UIPadding",at["11"]);
at["12"].PaddingTop=UDim.new(0,2);
at["12"].PaddingRight=UDim.new(0,5);
at["12"].PaddingLeft=UDim.new(0,5);
at["12"].PaddingBottom=UDim.new(0,2);



at["13"]=Instance.new("UIStroke",at["10"]);
at["13"].Transparency=0.65;
at["13"].Thickness=1.25;



at["14"]=Instance.new("ImageButton",ar);
at["14"].BorderSizePixel=0;
at["14"].BackgroundColor3=Color3.fromRGB(57,57,57);
at["14"].Size=UDim2.new(0,37,0,15);
at["14"].BorderColor3=Color3.fromRGB(0,0,0);
at["14"].Name=[[Clear]];
at["14"].Position=UDim2.new(1,-42,0,4);



at["15"]=Instance.new("TextLabel",at["14"]);
at["15"].TextWrapped=true;
at["15"].Interactable=false;
at["15"].BorderSizePixel=0;
at["15"].TextSize=20;
at["15"].TextScaled=true;
at["15"].BackgroundColor3=Color3.fromRGB(255,255,255);
at["15"].FontFace=Font.new([[rbxasset://fonts/families/SourceSansPro.json]],Enum.FontWeight.Regular,Enum.FontStyle.Normal);
at["15"].TextColor3=Color3.fromRGB(255,255,255);
at["15"].BackgroundTransparency=1;
at["15"].Size=UDim2.new(1,0,1,0);
at["15"].BorderColor3=Color3.fromRGB(0,0,0);
at["15"].Text=[[Clear]];



at["16"]=Instance.new("UIPadding",at["14"]);
at["16"].PaddingTop=UDim.new(0,1);
at["16"].PaddingBottom=UDim.new(0,1);



at["17"]=Instance.new("TextBox",ar);
at["17"].Visible=false;
at["17"].Active=false;
at["17"].Name=[[OutputTemplate]];
at["17"].TextXAlignment=Enum.TextXAlignment.Left;
at["17"].BorderSizePixel=0;
at["17"].TextEditable=false;
at["17"].TextWrapped=true;
at["17"].TextSize=15;
at["17"].TextColor3=Color3.fromRGB(171,171,171);
at["17"].BackgroundColor3=Color3.fromRGB(255,255,255);
at["17"].RichText=true;
at["17"].FontFace=Font.new([[rbxasset://fonts/families/SourceSansPro.json]],Enum.FontWeight.Regular,Enum.FontStyle.Normal);
at["17"].AutomaticSize=Enum.AutomaticSize.Y;
at["17"].Selectable=false;
at["17"].ClearTextOnFocus=false;
at["17"].Size=UDim2.new(1,0,0,1);
at["17"].Position=UDim2.new(0,20,0,0);
at["17"].BorderColor3=Color3.fromRGB(0,0,0);
at["17"].Text=[[(timestamp) <font color="rgb(255, 255, 255)">Output</font>]];
at["17"].BackgroundTransparency=1;



at["18"]=Instance.new("UIPadding",at["17"]);
at["18"].PaddingRight=UDim.new(0,6);
at["18"].PaddingLeft=UDim.new(0,6);



at["19"]=Instance.new("ImageButton",ar);
at["19"].BorderSizePixel=0;
at["19"].BackgroundColor3=Color3.fromRGB(57,57,57);
at["19"].Size=UDim2.new(0,60,0,15);
at["19"].BorderColor3=Color3.fromRGB(0,0,0);
at["19"].Name=[[CtrlScroll]];
at["19"].Position=UDim2.new(0,46,0,4);



at["1a"]=Instance.new("TextLabel",at["19"]);
at["1a"].TextWrapped=true;
at["1a"].Interactable=false;
at["1a"].BorderSizePixel=0;
at["1a"].TextSize=20;
at["1a"].TextScaled=true;
at["1a"].BackgroundColor3=Color3.fromRGB(255,255,255);
at["1a"].FontFace=Font.new([[rbxasset://fonts/families/SourceSansPro.json]],Enum.FontWeight.Regular,Enum.FontStyle.Normal);
at["1a"].TextColor3=Color3.fromRGB(255,255,255);
at["1a"].BackgroundTransparency=1;
at["1a"].Size=UDim2.new(1,0,1,0);
at["1a"].BorderColor3=Color3.fromRGB(0,0,0);
at["1a"].Text=[[Ctrl Scroll]];



at["1b"]=Instance.new("UIPadding",at["19"]);
at["1b"].PaddingTop=UDim.new(0,1);
at["1b"].PaddingBottom=UDim.new(0,1);


at["20"]=Instance.new("ImageButton",ar);
at["20"].BorderSizePixel=0;
at["20"].BackgroundColor3=Color3.fromRGB(57,57,57);
at["20"].Size=UDim2.new(0,60,0,15);
at["20"].BorderColor3=Color3.fromRGB(0,0,0);
at["20"].Name=[[AutoScroll]];
at["20"].Position=UDim2.new(0,110,0,4);



at["1e"]=Instance.new("TextLabel",at["20"]);
at["1e"].TextWrapped=true;
at["1e"].Interactable=false;
at["1e"].BorderSizePixel=0;
at["1e"].TextSize=20;
at["1e"].TextScaled=true;
at["1e"].BackgroundColor3=Color3.fromRGB(255,255,255);
at["1e"].FontFace=Font.new([[rbxasset://fonts/families/SourceSansPro.json]],Enum.FontWeight.Regular,Enum.FontStyle.Normal);
at["1e"].TextColor3=Color3.fromRGB(255,255,255);
at["1e"].BackgroundTransparency=1;
at["1e"].Size=UDim2.new(1,0,1,0);
at["1e"].BorderColor3=Color3.fromRGB(0,0,0);
at["1e"].Text=[[Auto Scroll]];



at["1f"]=Instance.new("UIPadding",at["20"]);
at["1f"].PaddingTop=UDim.new(0,1);
at["1f"].PaddingBottom=UDim.new(0,1);



at["1c"]=Instance.new("LocalScript",at["1"]);
at["1c"].Name=[[ConsoleHandler]];



at["1d"]=Instance.new("ModuleScript",at["1c"]);
at["1d"].Name=[[SyntaxHighlighter]];



local aw=require;
local ax={};
local function require(az)
local aA=ax[az];
if aA then
if not aA.Required then
aA.Required=true;
aA.Value=aA.Closure();
end
return aA.Value
end;
return aw(az)
end

ax[at["1d"] ]={
Closure=function()local az=
at["1d"];local aA={}
local aB={
lua={
"and","break","or","else","elseif","if","then","until","repeat","while","do","for","in","end",
"local","return","function","export"
},
rbx={
"game","workspace","script","math","string","table","task","wait","select","next","Enum",
"error","warn","tick","assert","shared","loadstring","tonumber","tostring","type",
"typeof","unpack","print","Instance","CFrame","Vector3","Vector2","Color3","UDim","UDim2","Ray","BrickColor",
"OverlapParams","RaycastParams","Axes","Random","Region3","Rect","TweenInfo",
"collectgarbage","not","utf8","pcall","xpcall","_G","setmetatable","getmetatable","os","pairs","ipairs"
},
exploit={
"hookmetamethod","hookfunction","getgc","filtergc","Drawing","getgenv","getsenv","getrenv","getfenv","setfenv",
"decompile","saveinstance","getrawmetatable","setrawmetatable","checkcaller","cloneref","clonefunction",
"iscclosure","islclosure","isexecutorclosure","newcclosure","getfunctionhash","crypt","writefile","appendfile","loadfile","readfile","listfiles",
"makefolder","isfolder","isfile","delfile","delfolder","getcustomasset","fireclickdetector","firetouchinterest","fireproximityprompt"
},
operators={
"#","+","-","*","%","/","^","=","~","=","<",">",",",".","(",")","{","}","[","]",";",":"
}
}

local aC={
numbers=Color3.fromRGB(255,198,0),
boolean=Color3.fromRGB(255,198,0),
operator=Color3.fromRGB(204,204,204),
lua=Color3.fromRGB(132,214,247),
exploit=Color3.fromRGB(171,84,247),
rbx=Color3.fromRGB(248,109,124),
str=Color3.fromRGB(173,241,132),
comment=Color3.fromRGB(102,102,102),
null=Color3.fromRGB(255,198,0),
call=Color3.fromRGB(253,251,172),
self_call=Color3.fromRGB(253,251,172),
local_color=Color3.fromRGB(248,109,115),
function_color=Color3.fromRGB(248,109,115),
self_color=Color3.fromRGB(248,109,115),
local_property=Color3.fromRGB(97,161,241),
}

local function createKeywordSet(aD)
local aE={}
for aF,aG in ipairs(aD)do
aE[aG]=true
end
return aE
end

local aD=createKeywordSet(aB.lua)
local aE=createKeywordSet(aB.exploit)
local aF=createKeywordSet(aB.rbx)
local aG=createKeywordSet(aB.operators)

local function getHighlight(aH,g)
local h=aH[g]

if aC[h.."_color"]then
return aC[h.."_color"]
end

if tonumber(h)then
return aC.numbers
elseif h=="nil"then
return aC.null
elseif h:sub(1,2)=="--"then
return aC.comment
elseif aG[h]then
return aC.operator
elseif aD[h]then
return aC.rbx
elseif aF[h]then
return aC.lua
elseif aE[h]then
return aC.exploit
elseif h:sub(1,1)=="\""or h:sub(1,1)=="\'"then
return aC.str
elseif h=="true"or h=="false"then
return aC.boolean
end

if aH[g+1]=="("then
if aH[g-1]==":"then
return aC.self_call
end

return aC.call
end

if aH[g-1]=="."then
if aH[g-2]=="Enum"then
return aC.rbx
end

return aC.local_property
end
end

function aA.run(aH)
local g={}
local h=""

local i=false
local j=false
local k=false

for l=1,#aH do
local m=aH:sub(l,l)

if j then
if m=="\n"and not k then
table.insert(g,h)
table.insert(g,m)
h=""

j=false
elseif aH:sub(l-1,l)=="]]"and k then
h..="]"

table.insert(g,h)
h=""

j=false
k=false
else
h=h..m
end
elseif i then
if m==i and aH:sub(l-1,l-1)~="\\"or m=="\n"then
h=h..m
i=false
else
h=h..m
end
else
if aH:sub(l,l+1)=="--"then
table.insert(g,h)
h="-"
j=true
k=aH:sub(l+2,l+3)=="[["
elseif m=="\""or m=="\'"then
table.insert(g,h)
h=m
i=m
elseif aG[m]then
table.insert(g,h)
table.insert(g,m)
h=""
elseif m:match"[%w_]"then
h=h..m
else
table.insert(g,h)
table.insert(g,m)
h=""
end
end
end

table.insert(g,h)

local l={}

for m,n in ipairs(g)do
local o=getHighlight(g,m)

if o then
local p=string.format("<font color = \"#%s\">%s</font>",o:ToHex(),n:gsub("<","&lt;"):gsub(">","&gt;"))

table.insert(l,p)
else
table.insert(l,n)
end
end

return table.concat(l)
end

return aA
end;
};

ap.Init=function()


local az=false
local aA=false

local aB=f:GetService"LogService"
local aC=f:GetService"Players"
local aD=aC.LocalPlayer
aD:GetMouse()
local aE=f:GetService"UserInputService"
f:GetService"RunService"

local aF=ar
local aG=require(at["1c"].SyntaxHighlighter)
local aH=aF.Output.OutputTextSize











if az==true then
aF.CtrlScroll.BackgroundColor3=Color3.fromRGB(11,90,175)
elseif az==false then
aF.CtrlScroll.BackgroundColor3=Color3.fromRGB(56,56,56)
end
aF.CtrlScroll.MouseButton1Click:Connect(function()
az=not az
if az==true then
aF.CtrlScroll.BackgroundColor3=Color3.fromRGB(11,90,175)
elseif az==false then
aF.CtrlScroll.BackgroundColor3=Color3.fromRGB(56,56,56)
end
end)

local g=false
aE.InputBegan:Connect(function(h,i)
if not i then
if h.KeyCode==Enum.KeyCode.LeftControl or h.KeyCode==Enum.KeyCode.RightControl then
g=true
end
end
end)
aE.InputEnded:Connect(function(h,i)
if not i then
if h.KeyCode==Enum.KeyCode.LeftControl or h.KeyCode==Enum.KeyCode.RightControl then
g=false
end
end
end)

if aA==true then
aF.AutoScroll.BackgroundColor3=Color3.fromRGB(11,90,175)
elseif aA==false then
aF.AutoScroll.BackgroundColor3=Color3.fromRGB(56,56,56)
end
aF.AutoScroll.MouseButton1Click:Connect(function()
aA=not aA
if aA==true then
aF.AutoScroll.BackgroundColor3=Color3.fromRGB(11,90,175)
aF.Output.CanvasPosition=Vector2.new(0,9e9)
elseif aA==false then
aF.AutoScroll.BackgroundColor3=Color3.fromRGB(56,56,56)
end
end)


local h={}
local i=aF.Output.OutputLimit

aF.TextSizeBox.TextBox.Text=tostring(aH.Value)

aF.TextSizeBox.TextBox:GetPropertyChangedSignal"Text":Connect(function()
local j=tonumber(aF.TextSizeBox.TextBox.Text)
if j then
aH.Value=j
end
end)
aH:GetPropertyChangedSignal"Value":Connect(function()
aF.TextSizeBox.TextBox.Text=tostring(aH.Value)
end)

local j
aF.Output.MouseEnter:Connect(function()
j=aE.InputChanged:Connect(function(k)
if az and k.UserInputType==Enum.UserInputType.MouseWheel and g==true then
aF.Output.ScrollingEnabled=false
local l=aH.Value+k.Position.Z
if l>=1 then
aH.Value=l
end
else
aF.Output.ScrollingEnabled=true
end
end)
end)
aF.Output.MouseLeave:Connect(function()
if j then
j:Disconnect()
j=nil
end
end)


aF.Clear.MouseButton1Click:Connect(function()
for k,l in pairs(aF.Output:GetChildren())do
if l:IsA"TextBox"then
l:Destroy()
end
end
end)

local k

aB.MessageOut:Connect(function(l,m)
local n=""
local o=""
local p=aF.OutputTemplate:Clone()
table.insert(h,p)

if#h>i.Value then
local q=table.remove(h,1)
if q and typeof(q)=="Instance"then
q:Destroy()
end
end

o=os.date"%H:%M:%S"..'   '..l
if m==Enum.MessageType.MessageOutput then
n=os.date"%H:%M:%S"..'   <font color="rgb(204, 204, 204)">'..l..'</font>'
p.Text=n
elseif m==Enum.MessageType.MessageWarning then
n=os.date"%H:%M:%S"..'   <b><font color="rgb(255, 142, 60)">'..l..'</font></b>'
p.Text=n
elseif m==Enum.MessageType.MessageError then
n=os.date"%H:%M:%S"..'   <b><font color="rgb(255, 68, 68)">'..l..'</font></b>'
p.Text=n
elseif m==Enum.MessageType.MessageInfo then
n=os.date"%H:%M:%S"..'   <font color="rgb(128, 215, 255)">'..l..'</font>'
p.Text=n
end

p.TextSize=aH.Value
aH:GetPropertyChangedSignal"Value":Connect(function()
p.TextSize=aH.Value
end)

p.Focused:Connect(function()
k=p
p.Text=o
end)
p.FocusLost:Connect(function()
k=nil
p.Text=n
end)

p.Parent=aF.Output
p.Visible=true

if aA then
aF.Output.CanvasPosition=Vector2.new(0,9e9)
end
end)

aF.Output.MouseLeave:Connect(function()
if k then
k:ReleaseFocus()
end
end)

aF.CommandLine.ScrollingFrame.TextBox:GetPropertyChangedSignal"Text":Connect(function()

local l=string.gsub(aF.CommandLine.ScrollingFrame.TextBox.Text,"\n","    ")
aF.CommandLine.ScrollingFrame.TextBox.Text=l

aF.CommandLine.ScrollingFrame.Highlight.Text=aG.run(aF.CommandLine.ScrollingFrame.TextBox.Text)
end)



aF.CommandLine.ScrollingFrame.TextBox.FocusLost:Connect(function(l)
if l and aF.CommandLine.ScrollingFrame.TextBox.Text~=""then
print("> "..aF.CommandLine.ScrollingFrame.TextBox.Text)
loadstring(aF.CommandLine.ScrollingFrame.TextBox.Text)()
end
end)
end

return ap
end

return{InitDeps=initDeps,InitAfterMain=initAfterMain,Main=main}
end,
SaveInstance=function()




local aa,ab,ac,ad
local ae,af,ag,ah
local ai,aj,ak,al,am,an,ao

local function initDeps(ap)
aa=ap.Main
ab=ap.Lib
ac=ap.Apps
ad=ap.Settings

ai=ap.API
aj=ap.RMD
ak=ap.env
al=ap.service
am=ap.plr
an=ap.create
ao=ap.createSimple
end

local function initAfterMain()
ae=ac.Explorer
af=ac.Properties
ag=ac.ScriptViewer
ah=ac.Notebook
end

local function main()
local ap={}
local aq,ar
local as="Place_"..f.PlaceId.."_"..al.MarketplaceService:GetProductInfo(f.PlaceId).Name.."_{TIMESTAMP}"


local at={
Decompile=true,
DecompileTimeout=10,
DecompileIgnore={"Chat","CoreGui","CorePackages"},
NilInstances=false,
RemovePlayerCharacters=true,
SavePlayers=false,
MaxThreads=3,
ShowStatus=true,
IgnoreDefaultProps=true,
IsolateStarterPlayer=true
}

local function AddCheckbox(au,aw)
local ax=ab.Frame.new()
ax.Gui.Parent=ar
ax.Gui.Transparency=1
ax.Gui.Size=UDim2.new(1,0,0,20)

local az=Instance.new"UIListLayout"
az.Parent=ax.Gui
az.FillDirection=Enum.FillDirection.Horizontal
az.HorizontalAlignment=Enum.HorizontalAlignment.Left
az.VerticalAlignment=Enum.VerticalAlignment.Center
az.Padding=UDim.new(0,10)


local aA=ab.Checkbox.new()

aA.Gui.Parent=ax.Gui
aA.Gui.Size=UDim2.new(0,15,0,15)


local aB=ab.Label.new()

aB.Gui.Parent=ax.Gui
aB.Gui.Size=UDim2.new(1,0,1,-15)
aB.Gui.Text=au
aB.TextTruncate=Enum.TextTruncate.AtEnd

aA:SetState(aw)

return aA
end

local function AddTextbox(au,aw,ax)
aw=tostring(aw)
local az=ab.Frame.new()
az.Gui.Parent=ar
az.Gui.Transparency=1
az.Gui.Size=UDim2.new(1,0,0,20)

local aA=Instance.new"UIListLayout"
aA.Parent=az.Gui
aA.FillDirection=Enum.FillDirection.Horizontal
aA.HorizontalAlignment=Enum.HorizontalAlignment.Left
aA.VerticalAlignment=Enum.VerticalAlignment.Center
aA.Padding=UDim.new(0,10)


local aB=ab.ViewportTextBox.new()

aB.Gui.Parent=az.Gui
if ax and type(ax)=="number"then
aB.Gui.Size=UDim2.new(0,ax,0,15)
else
aB.Gui.Size=UDim2.new(0,45,0,15)
end

aB.Gui.AutomaticSize=Enum.AutomaticSize.X
aB.TextBox.AutomaticSize=Enum.AutomaticSize.X


local aC=ab.Label.new()

aC.Gui.Parent=az.Gui
aC.Gui.Size=UDim2.new(1,0,1,-15)
aC.Gui.Text=au
aC.TextTruncate=Enum.TextTruncate.AtEnd

aB:SetText(aw)

return aB
end






































ap.Init=function()
aq=ab.Window.new()
aq:SetTitle"Save Instance"
aq:Resize(350,350)
ap.Window=aq




ar=Instance.new"ScrollingFrame"
ar.Parent=aq.GuiElems.Content
ar.Size=UDim2.new(1,0,1,-40)
ar.Position=UDim2.new(0,0,0,0)
ar.Transparency=1
ar.CanvasSize=UDim2.new(0,0,0,0)
ar.AutomaticCanvasSize=Enum.AutomaticSize.Y
ar.ScrollBarThickness=16
ar.BottomImage=""
ar.TopImage=""
ar.ScrollBarImageColor3=Color3.fromRGB(70,70,70)
ar.ScrollBarImageTransparency=0
ar.ZIndex=2
ar.BorderSizePixel=0

local au=ab.ScrollBar.new()
au.Gui.Parent=aq.GuiElems.Content
au.Gui.Size=UDim2.new(1,0,1,-40)
au.Gui.Up.ZIndex=3
au.Gui.Down.ZIndex=3

ar:GetPropertyChangedSignal"AbsoluteWindowSize":Connect(function()
if ar.AbsoluteCanvasSize~=ar.AbsoluteWindowSize then
au.Gui.Visible=true
else
au.Gui.Visible=false
end
end)

local aw=Instance.new"UIListLayout"
aw.Parent=ar
aw.Padding=UDim.new(0,5)

local ax=Instance.new"UIPadding"
ax.Parent=ar
ax.PaddingBottom=UDim.new(0,5)
ax.PaddingLeft=UDim.new(0,10)
ax.PaddingRight=UDim.new(0,10)
ax.PaddingTop=UDim.new(0,5)



local az=AddCheckbox("Decompile Scripts (LocalScript and ModuleScript)",at.Decompile)
az.OnInput:Connect(function()
at.Decompile=az.Toggled
end)

local aA=AddTextbox("Decompile Timeout (s)",at.DecompileTimeout,15)
aA.TextBox.FocusLost:Connect(function()
at.DecompileTimeout=tonumber(aA.TextBox.Text)
end)

local aB=AddTextbox("Decompiler Max Threads","3",15)
aB.TextBox.FocusLost:Connect(function()
at.MaxThreads=tonumber(aB.TextBox.Text)
end)

local aC=AddTextbox("Decompile Ignore",table.concat(at.DecompileIgnore,","),50)
aC.TextBox.FocusLost:Connect(function()
local aD=aC.TextBox.Text
local aE=string.split(aD,", ")or string.split(aD,",")
local aF={}

for aG,aH in ipairs(aE)do
local g=string.split(aH,",")or string.split(aH,", ")
for h,i in ipairs(g)do
table.insert(aF,i)
end
end
at.DecompileIgnore=aF
end)


local aD=AddCheckbox("Save Nil Instances",at.NilInstances)
aD.OnInput:Connect(function()
at.NilInstances=aD.Toggled
end)

local aE=AddCheckbox("Remove Player Characters",at.RemovePlayerCharacters)
aE.OnInput:Connect(function()
at.RemovePlayerCharacters=aE.Toggled
end)

local aF=AddCheckbox("Save Player Instance",at.SavePlayers)
aF.OnInput:Connect(function()
at.SavePlayers=aF.Toggled
end)

local aG=AddCheckbox("Isolate StarterPlayer",at.IsolateStarterPlayer)
aG.OnInput:Connect(function()
at.IsolateStarterPlayer=aG.Toggled
end)

local aH=AddCheckbox("Ignore Default Properties",at.IgnoreDefaultProps)
aH.OnInput:Connect(function()
at.IgnoreDefaultProps=aH.Toggled
end)

local g=AddCheckbox("Show Status",at.ShowStatus)
g.OnInput:Connect(function()
at.ShowStatus=g.Toggled
end)



local h=ab.ViewportTextBox.new()
h.Gui.Parent=aq.GuiElems.Content
h.Size=UDim2.new(1,0,0,20)
h.Position=UDim2.new(0,0,1,-40)

local i=Instance.new"UIPadding"
i.Parent=h.Gui
i.PaddingLeft=UDim.new(0,5)
i.PaddingRight=UDim.new(0,5)

local j=ab.Frame.new()
j.Gui.Parent=aq.GuiElems.Content
j.Size=UDim2.new(1,0,0,20)
j.Position=UDim2.new(0,0,1,-20)

local k=ab.Label.new()
k.Gui.Parent=aq.GuiElems.Content
k.Size=UDim2.new(1,0,0,20)
k.Position=UDim2.new(0,0,1,-20)
k.Gui.Text="Save"
k.Gui.TextXAlignment=Enum.TextXAlignment.Center

local l=Instance.new"TextButton"
l.Parent=j.Gui
l.Size=UDim2.new(1,0,1,0)
l.Position=UDim2.new(0,0,0,0)
l.Transparency=1

h.TextBox.Text=as
l.MouseButton1Click:Connect(function()
local m=h.TextBox.Text:gsub("{TIMESTAMP}",os.date"%d-%m-%Y_%H-%M-%S")
aq:SetTitle"Save Instance - Saving"
local n,o=pcall(ak.saveinstance,f,ak.parsefile(m),at)
if n then
aq:SetTitle"Save Instance - Saved"
else
aq:SetTitle"Save Instance - Error"
task.spawn(error("Failed to save the game: "..o))
end
task.wait(5)
aq:SetTitle"Save Instance"
end)
end

return ap
end

return{InitDeps=initDeps,InitAfterMain=initAfterMain,Main=main}
end
}







DefaultSettings=(function()
local ab=Color3.fromRGB
return{
Explorer={
_Recurse=true,
Sorting=true,
TeleportToOffset=Vector3.new(0,0,0),
ClickToRename=true,
AutoUpdateSearch=true,
AutoUpdateMode=0,
PartSelectionBox=true,
GuiSelectionBox=true,
CopyPathUseGetChildren=true
},
Properties={
_Recurse=true,
MaxConflictCheck=50,
ShowDeprecated=false,
ShowHidden=false,
ClearOnFocus=false,
LoadstringInput=true,
NumberRounding=3,
ShowAttributes=false,
MaxAttributes=50,
ScaleType=1
},
Theme={
_Recurse=true,
Main1=ab(52,52,52),
Main2=ab(45,45,45),
Outline1=ab(33,33,33),
Outline2=ab(55,55,55),
Outline3=ab(30,30,30),
TextBox=ab(38,38,38),
Menu=ab(32,32,32),
ListSelection=ab(11,90,175),
Button=ab(60,60,60),
ButtonHover=ab(68,68,68),
ButtonPress=ab(40,40,40),
Highlight=ab(75,75,75),
Text=ab(255,255,255),
PlaceholderText=ab(100,100,100),
Important=ab(255,0,0),
ExplorerIconMap="",
MiscIconMap="",
Syntax={
Text=ab(204,204,204),
Background=ab(36,36,36),
Selection=ab(255,255,255),
SelectionBack=ab(11,90,175),
Operator=ab(204,204,204),
Number=ab(255,198,0),
String=ab(173,241,149),
Comment=ab(102,102,102),
Keyword=ab(248,109,124),
Error=ab(255,0,0),
FindBackground=ab(141,118,0),
MatchingWord=ab(85,85,85),
BuiltIn=ab(132,214,247),
CurrentLine=ab(45,50,65),
LocalMethod=ab(253,251,172),
LocalProperty=ab(97,161,241),
Nil=ab(255,198,0),
Bool=ab(255,198,0),
Function=ab(248,109,124),
Local=ab(248,109,124),
Self=ab(248,109,124),
FunctionName=ab(253,251,172),
Bracket=ab(204,204,204)
},
}
}
end)()


local ab={}
local ac={}
local ad={}

local ae=d.Players.LocalPlayer or d.Players.PlayerAdded:wait()

local af=function(af)
local ag={}
for ah,ai in pairs(af)do ag[ai[1] ]=Instance.new(ai[2])end

for ah,ai in pairs(af)do
for aj,ak in pairs(ai[3])do
if type(ak)=="table"then
ag[ai[1] ][aj]=ag[ak[1] ]
else
ag[ai[1] ][aj]=ak
end
end
end

return ag[1]
end

local ag=function(ag,ah)
local ai=Instance.new(ag)
for aj,ak in next,ah do
ai[aj]=ak
end
return ai
end

Main=(function()
local ah={}

ah.ModuleList={"Explorer","Properties","ScriptViewer","Console","SaveInstance"}
ah.Elevated=false
ah.MissingEnv={}
ah.Version=""
ah.Mouse=ae:GetMouse()
ah.AppControls={}
ah.Apps=ac
ah.MenuApps={}

ah.DisplayOrders={
SideWindow=8,
Window=10,
Menu=100000,
Core=101000
}

ah.GetInitDeps=function()
return{
Main=ah,
Lib=Lib,
Apps=ac,
Settings=ab,

API=API,
RMD=RMD,
env=ad,
service=d,
plr=ae,
create=af,
createSimple=ag
}
end

ah.Error=function(ai)
if rconsoleprint then
rconsoleprint("DEX ERROR: "..tostring(ai).."\n")
wait(9e9)
else
error(ai)
end
end

ah.LoadModule=function(ai)



























local aj

if aa then
aj=aa[ai]()

if not aj then ah.Error("Missing Embedded Module: "..ai)end
end

ah.AppControls[ai]=aj
aj.InitDeps(ah.GetInitDeps())

local ak=aj.Main()
ac[ai]=ak
return ak
end

ah.LoadModules=function()
for ai,aj in pairs(ah.ModuleList)do
local ak,al=pcall(ah.LoadModule,aj)
if not ak then
ah.Error(("FAILED LOADING %s CAUSE %s"):format(aj,al))
end
end


Explorer=ac.Explorer
Properties=ac.Properties
ScriptViewer=ac.ScriptViewer
Console=ac.Console
SaveInstance=ac.SaveInstance
Notebook=ac.Notebook
local ai={
Explorer=Explorer,
Properties=Properties,
ScriptViewer=ScriptViewer,
Console=Console,
SaveInstance=SaveInstance,
Notebook=Notebook
}

ah.AppControls.Lib.InitAfterMain(ai)
for aj,ak in pairs(ah.ModuleList)do
local al=ah.AppControls[ak]
if al then
al.InitAfterMain(ai)
end
end
end

ah.InitEnv=function()
setmetatable(ad,{__newindex=function(ai,aj,ak)
if not ak then ah.MissingEnv[#ah.MissingEnv+1]=aj return end
rawset(ai,aj,ak)
end})


ad.readfile=missing("function",readfile)
ad.writefile=missing("function",writefile)
ad.appendfile=missing("function",appendfile)
ad.makefolder=missing("function",makefolder)
ad.listfiles=missing("function",listfiles)
ad.loadfile=missing("function",loadfile)
ad.movefileas=missing("function",movefileas)
ad.saveinstance=missing("function",saveinstance)or(function()

local ai,aj=pcall(function()
return loadstring(e:HttpGet"https://raw.githubusercontent.com/luau/SynSaveInstance/main/saveinstance.luau")()
end)
return ai and aj or nil
end)()
ad.parsefile=function(ai)
return tostring(ai):gsub("[*\\?:<>|]+",""):sub(1,175)
end


ad.getupvalues=missing("function",(debug and debug.getupvalues)or getupvalues or getupvals)
ad.getconstants=missing("function",(debug and debug.getconstants)or getconstants or getconsts)
ad.getinfo=missing("function",(debug and(debug.getinfo or debug.info))or getinfo)
ad.islclosure=missing("function",islclosure or is_l_closure or is_lclosure)
ad.checkcaller=missing("function",checkcaller)

ad.getgc=missing("function",getgc or get_gc_objects)

ad.getscriptbytecode=missing("function",getscriptbytecode)



ad.request=missing("function",request or http_request or(syn and syn.request)or(http and http.request)or(fluxus and fluxus.request))
ad.decompile=missing("function",decompile)or(ad.getscriptbytecode and ad.request and(function()
local ai=pcall(function()
loadstring(e:HttpGet"https://raw.githubusercontent.com/infyiff/backup/refs/heads/main/konstant.lua")()
end)

return(ai and decompile)or nil
end)())
ad.isViableDecompileScript=function(ai)
if ai:IsA"ModuleScript"then
return true
elseif ai:IsA"LocalScript"and(ai.RunContext==Enum.RunContext.Client or ai.RunContext==Enum.RunContext.Legacy)then
return true
elseif ai:IsA"Script"and ai.RunContext==Enum.RunContext.Client then
return true
end
return false
end
ad.protectgui=missing("function",protect_gui or(syn and syn.protect_gui))
ad.gethui=missing("function",gethui or get_hidden_gui)
ad.setclipboard=missing("function",setclipboard or toclipboard or set_clipboard or(Clipboard and Clipboard.set))
ad.getnilinstances=missing("function",getnilinstances or get_nil_instances)
ad.getloadedmodules=missing("function",getloadedmodules)

ad.executor=(function()
local ai=identifyexecutor or getexecutorname or whatexecutor
local aj,ak=pcall(function()
return tostring(ai())
end)
return aj and ak or"Your executor"
end)()

ah.GuiHolder=ah.Elevated and d.CoreGui or ae:FindFirstChildWhichIsA"PlayerGui"

setmetatable(ad,nil)
end

ah.LoadSettings=function()
local ai,aj=pcall(ad.readfile or error,"DexSettings.json")
if ai and aj and aj~=""then
local ak,al=d.HttpService:JSONDecode(aj)
if ak and al then
for am,an in next,al do

end


end
else
ah.ResetSettings()
end
end

ah.ResetSettings=function()
local function recur(ai,aj)
for ak,al in pairs(ai)do
if type(al)=="table"and al._Recurse then
if type(aj[ak])~="table"then
aj[ak]={}
end
recur(al,aj[ak])
else
aj[ak]=al
end
end
return aj
end
recur(DefaultSettings,ab)
end

local function jsonDecode(ai)
local aj,ak=pcall(d.HttpService.JSONDecode,d.HttpService,ai)
return aj and ak or aj
end

ah.FetchAPI=function()
local ai,aj
if ah.Elevated then
if ah.LocalDepsUpToDate()then
local ak=Lib.ReadFile"dex/rbx_api.dat"
if ak then
aj=ak
else
ah.DepsVersionData[1]=""
end
end
aj=aj or e:HttpGet("http://setup.roblox.com/"..ah.RobloxVersion.."-API-Dump.json")
else
if script:FindFirstChild"API"then
aj=require(script.API)
else
error"NO API EXISTS"
end
end
ah.RawAPI=aj
ai=jsonDecode(aj)


if not ai then
aj=e:HttpGet"https://raw.githubusercontent.com/infyiff/backup/refs/heads/main/rbx_api.dat"
ah.RawAPI=aj
ai=jsonDecode(aj)
end

local ak,al={},{}
local am,an={},{}

local function insertAbove(ao,ap,aq)
local ar=table.find(ao,ap)
if not ar then return end
table.remove(ao,ar)

local as=table.find(ao,aq)
if not as then return end
table.insert(ao,as,ap)
end

for ao,ap in pairs(ai.Classes)do
local aq={}
aq.Name=ap.Name
aq.Superclass=ap.Superclass
aq.Properties={}
aq.Functions={}
aq.Events={}
aq.Callbacks={}
aq.Tags={}

if ap.Tags then for ar,as in pairs(ap.Tags)do aq.Tags[as]=true end end
for ar,as in pairs(ap.Members)do
local at={}
at.Name=as.Name
at.Class=ap.Name
at.Security=as.Security
at.Tags={}
if as.Tags then for au,aw in pairs(as.Tags)do at.Tags[aw]=true end end

local au=as.MemberType
if au=="Property"then
local aw=as.Category or"Other"
aw=aw:match"^%s*(.-)%s*$"
if not an[aw]then
am[#am+1]=aw
an[aw]=true
end
at.ValueType=as.ValueType
at.Category=aw
at.Serialization=as.Serialization
table.insert(aq.Properties,at)
elseif au=="Function"then
at.Parameters={}
at.ReturnType=as.ReturnType.Name
for aw,ax in pairs(as.Parameters)do
table.insert(at.Parameters,{Name=ax.Name,Type=ax.Type.Name})
end
table.insert(aq.Functions,at)
elseif au=="Event"then
at.Parameters={}
for aw,ax in pairs(as.Parameters)do
table.insert(at.Parameters,{Name=ax.Name,Type=ax.Type.Name})
end
table.insert(aq.Events,at)
end
end

ak[ap.Name]=aq
end

for ao,ap in pairs(ak)do
ap.Superclass=ak[ap.Superclass]
end

for ao,ap in pairs(ai.Enums)do
local aq={}
aq.Name=ap.Name
aq.Items={}
aq.Tags={}

if ap.Tags then for ar,as in pairs(ap.Tags)do aq.Tags[as]=true end end
for ar,as in pairs(ap.Items)do
local at={}
at.Name=as.Name
at.Value=as.Value
table.insert(aq.Items,at)
end

al[ap.Name]=aq
end

local function getMember(ao,ap)
if not ak[ao]or not ak[ao][ap]then return end
local aq={}

local ar=ak[ao]
while ar do
for as,at in pairs(ar[ap])do
aq[#aq+1]=at
end
ar=ar.Superclass
end

table.sort(aq,function(as,at)return as.Name<at.Name end)
return aq
end

insertAbove(am,"Behavior","Tuning")
insertAbove(am,"Appearance","Data")
insertAbove(am,"Attachments","Axes")
insertAbove(am,"Cylinder","Slider")
insertAbove(am,"Localization","Jump Settings")
insertAbove(am,"Surface","Motion")
insertAbove(am,"Surface Inputs","Surface")
insertAbove(am,"Part","Surface Inputs")
insertAbove(am,"Assembly","Surface Inputs")
insertAbove(am,"Character","Controls")
am[#am+1]="Unscriptable"
am[#am+1]="Attributes"

local ao={}
for ap=1,#am do
ao[am[ap] ]=ap
end

return{
Classes=ak,
Enums=al,
CategoryOrder=ao,
GetMember=getMember
}
end

ah.FetchRMD=function()
local ai
if ah.Elevated then
if ah.LocalDepsUpToDate()then
local aj=Lib.ReadFile"dex/rbx_rmd.dat"
if aj then
ai=aj
else
ah.DepsVersionData[1]=""
end
end
ai=ai or e:HttpGet"https://raw.githubusercontent.com/CloneTrooper1019/Roblox-Client-Tracker/roblox/ReflectionMetadata.xml"
else
if script:FindFirstChild"RMD"then
ai=require(script.RMD)
else
error"NO RMD EXISTS"
end
end
ah.RawRMD=ai
local aj=Lib.ParseXML(ai)
local ak=aj.children[1].children[1].children
local al=aj.children[1].children[2].children
local am={}

local an,ao={},{}
for ap,aq in pairs(ak)do
local ar=""
for as,at in pairs(aq.children)do
if at.tag=="Properties"then
local au={Properties={},Functions={}}
local aw=at.children
for ax,az in pairs(aw)do
local aA=az.attrs.name
aA=aA:sub(1,1):upper()..aA:sub(2)
au[aA]=az.children[1].text
end
ar=au.Name
an[ar]=au
elseif at.attrs.class=="ReflectionMetadataProperties"then
local au=at.children
for aw,ax in pairs(au)do
if ax.attrs.class=="ReflectionMetadataMember"then
local az={}
if ax.children[1].tag=="Properties"then
local aA=ax.children[1].children
for aB,aC in pairs(aA)do
if aC.attrs then
local aD=aC.attrs.name
aD=aD:sub(1,1):upper()..aD:sub(2)
az[aD]=aC.children[1].text
end
end
if az.PropertyOrder then
local aB=am[ar]
if not aB then aB={}am[ar]=aB end
aB[az.Name]=tonumber(az.PropertyOrder)
end
an[ar].Properties[az.Name]=az
end
end
end
elseif at.attrs.class=="ReflectionMetadataFunctions"then
local au=at.children
for aw,ax in pairs(au)do
if ax.attrs.class=="ReflectionMetadataMember"then
local az={}
if ax.children[1].tag=="Properties"then
local aA=ax.children[1].children
for aB,aC in pairs(aA)do
if aC.attrs then
local aD=aC.attrs.name
aD=aD:sub(1,1):upper()..aD:sub(2)
az[aD]=aC.children[1].text
end
end
an[ar].Functions[az.Name]=az
end
end
end
end
end
end

for ap,aq in pairs(al)do
local ar=""
for as,at in pairs(aq.children)do
if at.tag=="Properties"then
local au={Items={}}
local aw=at.children
for ax,az in pairs(aw)do
local aA=az.attrs.name
aA=aA:sub(1,1):upper()..aA:sub(2)
au[aA]=az.children[1].text
end
ar=au.Name
ao[ar]=au
elseif at.attrs.class=="ReflectionMetadataEnumItem"then
local au={}
if at.children[1].tag=="Properties"then
local aw=at.children[1].children
for ax,az in pairs(aw)do
local aA=az.attrs.name
aA=aA:sub(1,1):upper()..aA:sub(2)
au[aA]=az.children[1].text
end
ao[ar].Items[au.Name]=au
end
end
end
end

return{Classes=an,Enums=ao,PropertyOrders=am}
end

ah.ShowGui=function(ai)
if ad.gethui then
ai.Parent=ad.gethui()
elseif ad.protectgui then
ad.protectgui(ai)
ai.Parent=ah.GuiHolder
else
ai.Parent=ah.GuiHolder
end
end

ah.CreateIntro=function(ai)
local aj=af{
{1,"ScreenGui",{Name="Intro",}},
{2,"Frame",{Active=true,BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="Main",Parent={1},Position=UDim2.new(0.5,-175,0.5,-100),Size=UDim2.new(0,350,0,200),}},
{3,"Frame",{BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,ClipsDescendants=true,Name="Holder",Parent={2},Size=UDim2.new(1,0,1,0),}},
{4,"UIGradient",{Parent={3},Rotation=30,Transparency=NumberSequence.new{NumberSequenceKeypoint.new(0,1,0),NumberSequenceKeypoint.new(1,1,0),},}},
{5,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=4,Name="Title",Parent={3},Position=UDim2.new(0,-190,0,15),Size=UDim2.new(0,100,0,50),Text="Dex",TextColor3=Color3.new(1,1,1),TextSize=50,TextTransparency=1,}},
{6,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Desc",Parent={3},Position=UDim2.new(0,-230,0,60),Size=UDim2.new(0,180,0,25),Text="Ultimate Debugging Suite",TextColor3=Color3.new(1,1,1),TextSize=18,TextTransparency=1,}},
{7,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="StatusText",Parent={3},Position=UDim2.new(0,20,0,110),Size=UDim2.new(0,180,0,25),Text="Fetching API",TextColor3=Color3.new(1,1,1),TextSize=14,TextTransparency=1,}},
{8,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="ProgressBar",Parent={3},Position=UDim2.new(0,110,0,145),Size=UDim2.new(0,0,0,4),}},
{9,"Frame",{BackgroundColor3=Color3.new(0.2392156869173,0.56078433990479,0.86274510622025),BorderSizePixel=0,Name="Bar",Parent={8},Size=UDim2.new(0,0,1,0),}},
{10,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://2764171053",ImageColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),Parent={8},ScaleType=1,Size=UDim2.new(1,0,1,0),SliceCenter=Rect.new(2,2,254,254),}},
{11,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Creator",Parent={2},Position=UDim2.new(1,-110,1,-20),Size=UDim2.new(0,105,0,20),Text="Developed by Moon",TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=1,}},
{12,"UIGradient",{Parent={11},Transparency=NumberSequence.new{NumberSequenceKeypoint.new(0,1,0),NumberSequenceKeypoint.new(1,1,0),},}},
{13,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Version",Parent={2},Position=UDim2.new(1,-110,1,-35),Size=UDim2.new(0,105,0,20),Text=ah.Version,TextColor3=Color3.new(1,1,1),TextSize=14,TextXAlignment=1,}},
{14,"UIGradient",{Parent={13},Transparency=NumberSequence.new{NumberSequenceKeypoint.new(0,1,0),NumberSequenceKeypoint.new(1,1,0),},}},
{15,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Image="rbxassetid://1427967925",Name="Outlines",Parent={2},Position=UDim2.new(0,-5,0,-5),ScaleType=1,Size=UDim2.new(1,10,1,10),SliceCenter=Rect.new(6,6,25,25),TileSize=UDim2.new(0,20,0,20),}},
{16,"UIGradient",{Parent={15},Rotation=-30,Transparency=NumberSequence.new{NumberSequenceKeypoint.new(0,1,0),NumberSequenceKeypoint.new(1,1,0),},}},
{17,"UIGradient",{Parent={2},Rotation=-30,Transparency=NumberSequence.new{NumberSequenceKeypoint.new(0,1,0),NumberSequenceKeypoint.new(1,1,0),},}},
}
ah.ShowGui(aj)
local ak=aj.Main.UIGradient
local al=aj.Main.Outlines.UIGradient
local am=aj.Main.Holder.UIGradient
local an=aj.Main.Holder.Title
local ao=aj.Main.Holder.Desc
local ap=aj.Main.Version
local aq=ap.UIGradient
local ar=aj.Main.Creator
local as=ar.UIGradient
local at=aj.Main.Holder.StatusText
local au=aj.Main.Holder.ProgressBar
local aw=d.TweenService

local ax=d.RunService.RenderStepped
local az=ax.wait
local aA=function(aA)
if not aA then return az(ax)end
local aB=tick()
while tick()-aB<aA do az(ax)end
end

at.Text=ai

local function tweenNumber(aB,aC,aD)
local aE=Instance.new"IntValue"
aE.Value=0
aE.Changed:Connect(aD)
local aF=aw:Create(aE,aC,{Value=aB})
aF:Play()
aF.Completed:Connect(function()
aE:Destroy()
end)
end

local aB=TweenInfo.new(0.4,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)
tweenNumber(100,aB,function(aC)
aC=aC/200
local aD=NumberSequenceKeypoint.new(0,0)
local aE=NumberSequenceKeypoint.new(aC,0)
local aF=NumberSequenceKeypoint.new(math.min(0.5,aC+math.min(0.05,aC)),1)
if aE.Time==aF.Time then aF=aE end
local aG=NumberSequenceKeypoint.new(1-aC,0)
local aH=NumberSequenceKeypoint.new(math.max(0.5,1-aC-math.min(0.05,aC)),1)
if aG.Time==aH.Time then aH=aG end
local g=NumberSequenceKeypoint.new(1,0)
ak.Transparency=NumberSequence.new{aD,aE,aF,aH,aG,g}
al.Transparency=NumberSequence.new{aD,aE,aF,aH,aG,g}
end)

aA(0.4)

tweenNumber(100,aB,function(aC)
aC=aC/166.66
local aD=NumberSequenceKeypoint.new(0,0)
local aE=NumberSequenceKeypoint.new(aC,0)
local aF=NumberSequenceKeypoint.new(aC+0.01,1)
local aG=NumberSequenceKeypoint.new(1,1)
am.Transparency=NumberSequence.new{aD,aE,aF,aG}
end)

aw:Create(an,aB,{Position=UDim2.new(0,60,0,15),TextTransparency=0}):Play()
aw:Create(ao,aB,{Position=UDim2.new(0,20,0,60),TextTransparency=0}):Play()

local function rightTextTransparency(aC)
tweenNumber(100,aB,function(aD)
aD=aD/100
local aE=NumberSequenceKeypoint.new(1-aD,0)
local aF=NumberSequenceKeypoint.new(math.max(0,1-aD-0.01),1)
if aE.Time==aF.Time then aF=aE end
local aG=NumberSequenceKeypoint.new(0,aE==aF and 0 or 1)
local aH=NumberSequenceKeypoint.new(1,0)
aC.Transparency=NumberSequence.new{aG,aF,aE,aH}
end)
end
rightTextTransparency(aq)
rightTextTransparency(as)

aA(0.9)

local aC=TweenInfo.new(0.25,Enum.EasingStyle.Quad,Enum.EasingDirection.Out)

aw:Create(at,aC,{Position=UDim2.new(0,20,0,120),TextTransparency=0}):Play()
aw:Create(au,aC,{Position=UDim2.new(0,60,0,145),Size=UDim2.new(0,100,0,4)}):Play()

aA(0.25)

local function setProgress(aD,aE)
at.Text=aD
aw:Create(au.Bar,aC,{Size=UDim2.new(aE,0,1,0)}):Play()
end

local function close()
aw:Create(an,aC,{TextTransparency=1}):Play()
aw:Create(ao,aC,{TextTransparency=1}):Play()
aw:Create(ap,aC,{TextTransparency=1}):Play()
aw:Create(ar,aC,{TextTransparency=1}):Play()
aw:Create(at,aC,{TextTransparency=1}):Play()
aw:Create(au,aC,{BackgroundTransparency=1}):Play()
aw:Create(au.Bar,aC,{BackgroundTransparency=1}):Play()
aw:Create(au.ImageLabel,aC,{ImageTransparency=1}):Play()

tweenNumber(100,TweenInfo.new(0.4,Enum.EasingStyle.Back,Enum.EasingDirection.In),function(aD)
aD=aD/250
local aE=NumberSequenceKeypoint.new(0,0)
local aF=NumberSequenceKeypoint.new(0.6+aD,0)
local aG=NumberSequenceKeypoint.new(math.min(1,0.601+aD),1)
if aF.Time==aG.Time then aG=aF end
local aH=NumberSequenceKeypoint.new(1,aF==aG and 0 or 1)
am.Transparency=NumberSequence.new{aE,aF,aG,aH}
end)

aA(0.5)
aj.Main.BackgroundTransparency=1
al.Rotation=30

tweenNumber(100,aB,function(aD)
aD=aD/100
local aE=NumberSequenceKeypoint.new(0,1)
local aF=NumberSequenceKeypoint.new(aD,1)
local aG=NumberSequenceKeypoint.new(math.min(1,aD+math.min(0.05,aD)),0)
if aF.Time==aG.Time then aG=aF end
local aH=NumberSequenceKeypoint.new(1,aF==aG and 1 or 0)
al.Transparency=NumberSequence.new{aE,aF,aG,aH}
am.Transparency=NumberSequence.new{aE,aF,aG,aH}
end)

aA(0.45)
aj:Destroy()
end

return{SetProgress=setProgress,Close=close}
end

ah.CreateApp=function(ai)
if ah.MenuApps[ai.Name]then return end
local aj={}

local ak=ah.AppTemplate:Clone()

local al=ai.Icon
if ai.IconMap and al then
if type(al)=="number"then
ai.IconMap:Display(ak.Main.Icon,al)
elseif type(al)=="string"then
ai.IconMap:DisplayByKey(ak.Main.Icon,al)
end
elseif type(al)=="string"then
ak.Main.Icon.Image=al
else
ak.Main.Icon.Image=""
end

local function updateState()
ak.Main.BackgroundTransparency=ai.Open and 0 or(Lib.CheckMouseInGui(ak.Main)and 0 or 1)
ak.Main.Highlight.Visible=ai.Open
end

local function enable(am)
if ai.Open then return end
ai.Open=true
updateState()
if not am then
if ai.Window then ai.Window:Show()end
if ai.OnClick then ai.OnClick(ai.Open)end
end
end

local function disable(am)
if not ai.Open then return end
ai.Open=false
updateState()
if not am then
if ai.Window then ai.Window:Hide()end
if ai.OnClick then ai.OnClick(ai.Open)end
end
end

updateState()

local am=d.TextService:GetTextSize(ai.Name,14,Enum.Font.SourceSans,Vector2.new(62,999999)).Y
ak.Main.Size=UDim2.new(1,0,0,math.clamp(46+am,60,74))
ak.Main.AppName.Text=ai.Name

ak.Main.InputBegan:Connect(function(an)
if(an.UserInputType==Enum.UserInputType.MouseMovement or an.UserInputType==Enum.UserInputType.Touch)then
ak.Main.BackgroundTransparency=0
ak.Main.BackgroundColor3=ab.Theme.ButtonHover
end
end)

ak.Main.InputEnded:Connect(function(an)
if(an.UserInputType==Enum.UserInputType.MouseMovement or an.UserInputType==Enum.UserInputType.Touch)then
ak.Main.BackgroundTransparency=ai.Open and 0 or 1
ak.Main.BackgroundColor3=ab.Theme.Button
end
end)

ak.Main.MouseButton1Click:Connect(function()
if ai.Open then disable()else enable()end
end)

local an=ai.Window
if an then
an.OnActivate:Connect(function()enable(true)end)
an.OnDeactivate:Connect(function()disable(true)end)
end

ak.Visible=true
ak.Parent=ah.AppsContainer
ah.AppsFrame.CanvasSize=UDim2.new(0,0,0,ah.AppsContainerGrid.AbsoluteCellCount.Y*82+8)

aj.Enable=enable
aj.Disable=disable
ah.MenuApps[ai.Name]=aj
return aj
end

ah.SetMainGuiOpen=function(ai)
ah.MainGuiOpen=ai

ah.MainGui.OpenButton.Text=ai and"X"or"Dex"
if ai then ah.MainGui.OpenButton.MainFrame.Visible=true end
ah.MainGui.OpenButton.MainFrame:TweenSize(ai and UDim2.new(0,224,0,200)or UDim2.new(0,0,0,0),Enum.EasingDirection.Out,Enum.EasingStyle.Quad,0.2,true)

d.TweenService:Create(ah.MainGui.OpenButton,TweenInfo.new(0.2,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{BackgroundTransparency=ai and 0 or(Lib.CheckMouseInGui(ah.MainGui.OpenButton)and 0 or 0.2)}):Play()

if ah.MainGuiMouseEvent then ah.MainGuiMouseEvent:Disconnect()end

if not ai then
local aj=tick()
ah.MainGuiCloseTime=aj
coroutine.wrap(function()
Lib.FastWait(0.2)
if not ah.MainGuiOpen and aj==ah.MainGuiCloseTime then ah.MainGui.OpenButton.MainFrame.Visible=false end
end)()
else
ah.MainGuiMouseEvent=d.UserInputService.InputBegan:Connect(function(aj)
if(aj.UserInputType==Enum.UserInputType.MouseButton1 or aj.UserInputType==Enum.UserInputType.Touch)and not Lib.CheckMouseInGui(ah.MainGui.OpenButton)and not Lib.CheckMouseInGui(ah.MainGui.OpenButton.MainFrame)then

ah.SetMainGuiOpen(false)
end
end)
end
end

ah.CreateMainGui=function()
local ai=af{
{1,"ScreenGui",{IgnoreGuiInset=true,Name="MainMenu",}},
{2,"TextButton",{AnchorPoint=Vector2.new(0.5,0),AutoButtonColor=false,BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),BorderSizePixel=0,Font=4,Name="OpenButton",Parent={1},Position=UDim2.new(0.5,0,0,2),Size=UDim2.new(0,32,0,32),Text="Dex",TextColor3=Color3.new(1,1,1),TextSize=16,TextTransparency=0.20000000298023,}},
{3,"UICorner",{CornerRadius=UDim.new(0,4),Parent={2},}},
{4,"Frame",{AnchorPoint=Vector2.new(0.5,0),BackgroundColor3=Color3.new(0.17647059261799,0.17647059261799,0.17647059261799),ClipsDescendants=true,Name="MainFrame",Parent={2},Position=UDim2.new(0.5,0,1,-4),Size=UDim2.new(0,224,0,200),}},
{5,"UICorner",{CornerRadius=UDim.new(0,4),Parent={4},}},
{6,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),Name="BottomFrame",Parent={4},Position=UDim2.new(0,0,1,-24),Size=UDim2.new(1,0,0,24),}},
{7,"UICorner",{CornerRadius=UDim.new(0,4),Parent={6},}},
{8,"Frame",{BackgroundColor3=Color3.new(0.20392157137394,0.20392157137394,0.20392157137394),BorderSizePixel=0,Name="CoverFrame",Parent={6},Size=UDim2.new(1,0,0,4),}},
{9,"Frame",{BackgroundColor3=Color3.new(0.1294117718935,0.1294117718935,0.1294117718935),BorderSizePixel=0,Name="Line",Parent={8},Position=UDim2.new(0,0,0,-1),Size=UDim2.new(1,0,0,1),}},
{10,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Settings",Parent={6},Position=UDim2.new(1,-48,0,0),Size=UDim2.new(0,24,1,0),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{11,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://6578871732",ImageTransparency=0.20000000298023,Name="Icon",Parent={10},Position=UDim2.new(0,4,0,4),Size=UDim2.new(0,16,0,16),}},
{12,"TextButton",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Font=3,Name="Information",Parent={6},Position=UDim2.new(1,-24,0,0),Size=UDim2.new(0,24,1,0),Text="",TextColor3=Color3.new(1,1,1),TextSize=14,}},
{13,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://6578933307",ImageTransparency=0.20000000298023,Name="Icon",Parent={12},Position=UDim2.new(0,4,0,4),Size=UDim2.new(0,16,0,16),}},
{14,"ScrollingFrame",{Active=true,AnchorPoint=Vector2.new(0.5,0),BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderColor3=Color3.new(0.1294117718935,0.1294117718935,0.1294117718935),BorderSizePixel=0,Name="AppsFrame",Parent={4},Position=UDim2.new(0.5,0,0,0),ScrollBarImageColor3=Color3.new(0,0,0),ScrollBarThickness=4,Size=UDim2.new(0,222,1,-25),}},
{15,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="Container",Parent={14},Position=UDim2.new(0,7,0,8),Size=UDim2.new(1,-14,0,2),}},
{16,"UIGridLayout",{CellSize=UDim2.new(0,66,0,74),Parent={15},SortOrder=2,}},
{17,"Frame",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Name="App",Parent={1},Size=UDim2.new(0,100,0,100),Visible=false,}},
{18,"TextButton",{AutoButtonColor=false,BackgroundColor3=Color3.new(0.2352941185236,0.2352941185236,0.2352941185236),BorderSizePixel=0,Font=3,Name="Main",Parent={17},Size=UDim2.new(1,0,0,60),Text="",TextColor3=Color3.new(0,0,0),TextSize=14,}},
{19,"ImageLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,Image="rbxassetid://6579106223",ImageRectSize=Vector2.new(32,32),Name="Icon",Parent={18},Position=UDim2.new(0.5,-16,0,4),ScaleType=4,Size=UDim2.new(0,32,0,32),}},
{20,"TextLabel",{BackgroundColor3=Color3.new(1,1,1),BackgroundTransparency=1,BorderSizePixel=0,Font=3,Name="AppName",Parent={18},Position=UDim2.new(0,2,0,38),Size=UDim2.new(1,-4,1,-40),Text="Explorer",TextColor3=Color3.new(1,1,1),TextSize=14,TextTransparency=0.10000000149012,TextTruncate=1,TextWrapped=true,TextYAlignment=0,}},
{21,"Frame",{BackgroundColor3=Color3.new(0,0.66666668653488,1),BorderSizePixel=0,Name="Highlight",Parent={18},Position=UDim2.new(0,0,1,-2),Size=UDim2.new(1,0,0,2),}},
}
ah.MainGui=ai
ah.AppsFrame=ai.OpenButton.MainFrame.AppsFrame
ah.AppsContainer=ah.AppsFrame.Container
ah.AppsContainerGrid=ah.AppsContainer.UIGridLayout
ah.AppTemplate=ai.App
ah.MainGuiOpen=false

local aj=ai.OpenButton
aj.BackgroundTransparency=0.2
aj.MainFrame.Size=UDim2.new(0,0,0,0)
aj.MainFrame.Visible=false
aj.MouseButton1Click:Connect(function()
ah.SetMainGuiOpen(not ah.MainGuiOpen)
end)

aj.InputBegan:Connect(function(ak)
if ak.UserInputType==Enum.UserInputType.MouseMovement or ak.UserInputType==Enum.UserInputType.Touch then
d.TweenService:Create(ah.MainGui.OpenButton,TweenInfo.new(0,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{BackgroundTransparency=0}):Play()
end
end)

aj.InputEnded:Connect(function(ak)
if ak.UserInputType==Enum.UserInputType.MouseMovement or ak.UserInputType==Enum.UserInputType.Touch then
d.TweenService:Create(ah.MainGui.OpenButton,TweenInfo.new(0,Enum.EasingStyle.Quad,Enum.EasingDirection.Out),{BackgroundTransparency=ah.MainGuiOpen and 0 or 0.2}):Play()
end
end)


ah.CreateApp{Name="Explorer",IconMap=ah.LargeIcons,Icon="Explorer",Open=true,Window=Explorer.Window}

ah.CreateApp{Name="Properties",IconMap=ah.LargeIcons,Icon="Properties",Open=true,Window=Properties.Window}

ah.CreateApp{Name="Script Viewer",IconMap=ah.LargeIcons,Icon="Script_Viewer",Window=ScriptViewer.Window}

local ak
ah.CreateApp{Name="Click part to select",IconMap=ah.LargeIcons,Icon=6,OnClick=function(al)
if al then
local am=ah.Mouse
ak=am.Button1Down:Connect(function()
pcall(function()
local an=am.Target
if a[an]then
b:Set(a[an])
Explorer.ViewNode(a[an])
end
end)
end)
else if ak~=nil then ak:Disconnect()ak=nil end end
end}

ah.CreateApp{Name="Console",IconMap=ah.LargeIcons,Icon="Output",Window=Console.Window}

ah.CreateApp{Name="Save Instance",IconMap=ah.LargeIcons,Icon="Watcher",Window=SaveInstance.Window}

Lib.ShowGui(ai)
end

ah.SetupFilesystem=function()
if not ad.writefile or not ad.makefolder then return end local
ai, aj=ad.writefile, ad.makefolder
aj"dex"
aj"dex/assets"
aj"dex/saved"
aj"dex/plugins"
aj"dex/ModuleCache"
end

ah.LocalDepsUpToDate=function()
return ah.DepsVersionData and ah.ClientVersion==ah.DepsVersionData[1]
end

ah.Init=function()
ah.Elevated=pcall(function()d.CoreGui:GetFullName()end)
ah.InitEnv()
ah.LoadSettings()
ah.SetupFilesystem()


local ai=ah.CreateIntro"Initializing Library"
Lib=ah.LoadModule"Lib"
Lib.FastWait()





ah.MiscIcons=Lib.IconMap.new("http://www.roblox.com/asset/?id=6511490623",256,256,16,16)

ah.MiscIcons:SetDict{
Reference=0;
Cut=1;
Cut_Disabled=2;
Copy=3;
Copy_Disabled=4;
Paste=5;
Paste_Disabled=6;
Delete=7;
Delete_Disabled=8;
Group=9;
Group_Disabled=10;
Ungroup=11;
Ungroup_Disabled=12;
TeleportTo=13;
Rename=14;
JumpToParent=15;
ExploreData=16;
Save=17;
CallFunction=18;
CallRemote=19;
Undo=20,
Undo_Disabled=21;
Redo=22;
Redo_Disabled=23;
Expand_Over=24;
Expand=25;
Collapse_Over=26;
Collapse=27;
SelectChildren=28;
SelectChildren_Disabled=29;
InsertObject=30;
ViewScript=31;
AddStar=32;
RemoveStar=33;
Script_Disabled=34;
LocalScript_Disabled=35;
Play=36;
Pause=37;
Rename_Disabled=38;
}
ah.LargeIcons=Lib.IconMap.new("rbxassetid://6579106223",256,256,32,32)
ah.LargeIcons:SetDict{
Explorer=0,Properties=1,Script_Viewer=2,Watcher=3,Output=4
}


ai.SetProgress("Fetching Roblox Version",0.2)
if ah.Elevated then
local aj=Lib.ReadFile"dex/deps_version.dat"
ah.ClientVersion=Version()

if aj then
ah.DepsVersionData=string.split(aj,"\n")
if ah.LocalDepsUpToDate()then
ah.RobloxVersion=ah.DepsVersionData[2]
end
end
ah.RobloxVersion=ah.RobloxVersion or e:HttpGet"http://setup.roblox.com/versionQTStudio"

if#ah.RobloxVersion<1 then
ah.RobloxVersion=e:HttpGet"https://raw.githubusercontent.com/infyiff/backup/refs/heads/main/deps_version.dat":gsub("%s+","")
end
end


ai.SetProgress("Fetching API",0.35)task.wait(0.5)
API=ah.FetchAPI()task.wait(0.5)
Lib.FastWait()
ai.SetProgress("Fetching RMD",0.5)
RMD=ah.FetchRMD()task.wait(0.5)
Lib.FastWait()


if ah.Elevated and ad.writefile and not ah.LocalDepsUpToDate()then
ad.writefile("dex/deps_version.dat",ah.ClientVersion.."\n"..ah.RobloxVersion)
ad.writefile("dex/rbx_api.dat",ah.RawAPI)
ad.writefile("dex/rbx_rmd.dat",ah.RawRMD)
end


ai.SetProgress("Loading Modules",0.75)task.wait(0)
ah.AppControls.Lib.InitDeps(ah.GetInitDeps())task.wait(0)
ah.LoadModules()task.wait(0)
Lib.FastWait()


ai.SetProgress("Initializing Modules",0.9)
task.wait(0.5)
Explorer.Init()task.wait(0.5)
Properties.Init()task.wait(0.5)
ScriptViewer.Init()task.wait(0.5)
Console.Init()task.wait(0.5)
SaveInstance.Init()task.wait(0.5)
Lib.FastWait()task.wait(0.5)


ai.SetProgress("Complete",1)
coroutine.wrap(function()
Lib.FastWait(1.25)
ai.Close()
end)()


task.wait(0.5)
Lib.Window.Init()
ah.CreateMainGui()
Explorer.Window:Show{Align="right",Pos=1,Size=0.5,Silent=true}
Properties.Window:Show{Align="right",Pos=2,Size=0.5,Silent=true}
Lib.DeferFunc(function()Lib.Window.ToggleSide"right"end)
end

return ah
end)()


task.wait(0)
Main.Init()
